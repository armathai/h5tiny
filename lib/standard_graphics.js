!function(e){var n={};function r(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,r),i.l=!0,i.exports}r.m=e,r.c=n,r.d=function(t,i,e){r.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(i,t){if(1&t&&(i=r(i)),8&t)return i;if(4&t&&"object"==typeof i&&i&&i.__esModule)return i;var e=Object.create(null);if(r.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:i}),2&t&&"string"!=typeof i)for(var n in i)r.d(e,n,function(t){return i[t]}.bind(null,n));return e},r.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(i,"a",i),i},r.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},r.p="",r(r.s=39)}([function(t,i,e){e(1),window.Tiny=e(2),e(3),e(4),e(5),e(6),e(7),e(8),e(9),e(10),e(11),e(12)},function(t,i){Date.now||(Date.now=function(){return(new Date).getTime()}),"undefined"==typeof Float32Array&&(window.Float32Array=Array)},function(t,i){var h=function(t,i,e,n,r){e=e?document.getElementById(e):document.body,this._preboot(t,i,n,r),this.renderer=new h.CanvasRenderer(this.width,this.height,{autoResize:!0});var s=this.canvas=this.inputView=this.renderer.view;e.appendChild(s),s.style.position="absolute",s.style.top="0px",s.style.left="0px",s.style.transformOrigin="0% 0%",s.style.perspective="1000px",this._boot()};h.prototype._preload=function(){this.preload.call(this.callbackContext),this.state=1,h.Loader?this.load.start(this._create):this._create()},h.prototype.setPixelRatio=function(t){this.renderer.resolution=t},h.prototype._render=function(){this.renderer.render(this.stage)},h.prototype.resize=function(t,i,e){this._resize(t,i,e)},h.prototype.destroy=function(){this._destroy()},t.exports=h},function(t,i){function r(){}var s=!1,e={_preboot:function(t,i,e,n){this.height=i||720,this.width=t||430,n=n||{},(this.callbackContext=this).state=0,this.preload=this.preload||n.preload||r,this.create=this.create||n.create||r,this.update=this.update||n.update||r,this._resize_cb=this._resize_cb||n.resize||r,this._destroy_cb=this._destroy_cb||n.destroy||r,this.stage=new Tiny.Stage(this),"object"==typeof window.TWEEN&&(s=!0),this._raf=e&&Tiny.RAF,this.time={timeToCall:15},this.paused=!1,this.pauseDuration=0,this.tweens=[]},_boot:function(){Tiny.Loader&&(this.load=new Tiny.Loader(this)),Tiny.ObjectCreator&&(this.add=new Tiny.ObjectCreator(this)),Tiny.Input&&(this.input=new Tiny.Input(this)),Tiny.TimerCreator&&(this.timer=new Tiny.TimerCreator(this)),Tiny.Particles&&(this.particles=new Tiny.Particles(this)),this._raf&&(this.raf=new Tiny.RAF(this)),Tiny.defaultRenderer=this.renderer;var t=this;setTimeout(function(){t._preload()},0)},_resize:function(t,i,e){this.width=t||this.width,this.height=i||this.height,this.renderer.resize(this.width,this.height),0<this.state&&this._resize_cb.call(this.callbackContext,this.width,this.height,e)},_create:function(){this.create.call(this.callbackContext),this._raf&&this.raf.start(),this.state=2},pause:function(){if(!this.paused){if(s)for(var t in this.tweens.length=0,TWEEN._tweens)this.tweens.push(TWEEN._tweens[t]),TWEEN._tweens[t].pause();this.paused=!0}},resume:function(){this.paused&&(s&&(this.tweens.forEach(function(t){t.resume()}),this.tweens.length=0),this.paused=!1)},_update:function(t,i){this.paused?(this.pauseDuration+=i,this.stage.updateTransform()):(this.update.call(this.callbackContext,t,i),s&&TWEEN.update(),this.timers&&this.timers.forEach(function(t){t.update(i)}),this.stage.updateTransform(),this.particles&&this.particles.update(i)),this._render()},_destroy:function(){for(var t in Tiny.Input&&this.input.destroy(),s&&TWEEN.removeAll(),this.timers&&this.timer.removeAll(),this.paused=!0,this.stage.destroy(),Tiny.TextureCache)Tiny.TextureCache[t].destroy(!0);for(var t in Tiny.BaseTextureCache)Tiny.BaseTextureCache[t].destroy();Tiny.BaseTextureCache=[],Tiny.TextureCache=[],this.stage.children=[],this.update(),this.renderer.destroy(!0),this._raf&&this.raf.stop(),this._destroy_cb.call(this.callbackContext)}};for(var n in e.stop=e.pause,e.play=e.resume,e.setSize=e.resize,e)Tiny.prototype[n]=e[n]},function(t,i){Tiny.VERSION="1.4.5",Tiny._UID=0,Tiny.Polygon=function(){},Tiny.Primitives={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4,RREC_LJOIN:5},Tiny.rnd=function(t,i){return t+Math.floor(Math.random()*(i-t+1))},Tiny.hex2rgb=function(t){return[(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]},Tiny.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]},Tiny.getNextPowerOfTwo=function(t){if(0<t&&0==(t&t-1))return t;for(var i=1;i<t;)i<<=1;return i},Tiny.isPowerOfTwo=function(t,i){return 0<t&&0==(t&t-1)&&0<i&&0==(i&i-1)}},function(t,i){Tiny.Math={distance:function(t,i,e,n){var r=t-e,s=i-n;return Math.sqrt(r*r+s*s)}};var e=Math.PI/180,n=180/Math.PI;Tiny.Math.degToRad=function(t){return t*e},Tiny.Math.radToDeg=function(t){return t*n}},function(t,i){Tiny.Point=function(t,i){this.x=t||0,this.y=i||0},Tiny.Point.prototype={set:function(t,i){return this.x=t||0,this.y=i||(0!==i?this.x:0),this},setTo:function(t,i){this.set(t,i)}}},function(t,i){Tiny.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.type=Tiny.MATRIX},Tiny.Matrix.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},Tiny.Matrix.prototype.toArray=function(t){this.array||(this.array=new Float32Array(9));var i=this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0),i[8]=1,i},Tiny.Matrix.prototype.apply=function(t,i){i=i||new Tiny.Point;var e=t.x,n=t.y;return i.x=this.a*e+this.c*n+this.tx,i.y=this.b*e+this.d*n+this.ty,i},Tiny.Matrix.prototype.applyInverse=function(t,i){i=i||new Tiny.Point;var e=1/(this.a*this.d+this.c*-this.b),n=t.x,r=t.y;return i.x=this.d*e*n+-this.c*e*r+(this.ty*this.c-this.tx*this.d)*e,i.y=this.a*e*r+-this.b*e*n+(-this.ty*this.a+this.tx*this.b)*e,i},Tiny.Matrix.prototype.translate=function(t,i){return this.tx+=t,this.ty+=i,this},Tiny.Matrix.prototype.scale=function(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this},Tiny.Matrix.prototype.rotate=function(t){var i=Math.cos(t),e=Math.sin(t),n=this.a,r=this.c,s=this.tx;return this.a=n*i-this.b*e,this.b=n*e+this.b*i,this.c=r*i-this.d*e,this.d=r*e+this.d*i,this.tx=s*i-this.ty*e,this.ty=s*e+this.ty*i,this},Tiny.Matrix.prototype.append=function(t){var i=this.a,e=this.b,n=this.c,r=this.d;return this.a=t.a*i+t.b*n,this.b=t.a*e+t.b*r,this.c=t.c*i+t.d*n,this.d=t.c*e+t.d*r,this.tx=t.tx*i+t.ty*n+this.tx,this.ty=t.tx*e+t.ty*r+this.ty,this},Tiny.Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Tiny.identityMatrix=new Tiny.Matrix},function(t,i){Tiny.Rectangle=function(t,i,e,n){t=t||0,i=i||0,e=e||0,n=n||0,this.x=t,this.y=i,this.width=e,this.height=n,this.type=Tiny.Primitives.RECT},Tiny.Rectangle.prototype={setTo:function(t,i,e,n){return this.x=t,this.y=i,this.width=e,this.height=n,this},contains:function(t,i){return Tiny.Rectangle.contains(this,t,i)},intersects:function(t){return Tiny.Rectangle.intersects(this,t)}},Object.defineProperty(Tiny.Rectangle.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}}),Object.defineProperty(Tiny.Rectangle.prototype,"right",{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}}),Object.defineProperty(Tiny.Rectangle.prototype,"volume",{get:function(){return this.width*this.height}}),Tiny.Rectangle.prototype.constructor=Tiny.Rectangle,Tiny.Rectangle.contains=function(t,i,e){return!(t.width<=0||t.height<=0)&&(i>=t.x&&i<t.right&&e>=t.y&&e<t.bottom)},Tiny.Rectangle.containsPoint=function(t,i){return Tiny.Rectangle.contains(t,i.x,i.y)},Tiny.Rectangle.containsRect=function(t,i){return!(t.volume>i.volume)&&(t.x>=i.x&&t.y>=i.y&&t.right<i.right&&t.bottom<i.bottom)},Tiny.Rectangle.intersects=function(t,i){return!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)&&!(t.right<i.x||t.bottom<i.y||t.x>i.right||t.y>i.bottom)},Tiny.EmptyRectangle=new Tiny.Rectangle(0,0,0,0)},function(t,i){var a=2*Math.PI;Tiny.DisplayObject=function(){this.position=new Tiny.Point(0,0),this.scale=new Tiny.Point(1,1),this.pivot=new Tiny.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.hitArea=null,this.renderable=!1,this.parent=null,this.stage=null,this.worldAlpha=1,this.worldTransform=new Tiny.Matrix,this._sr=0,this._cr=1,this._bounds=new Tiny.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null,this._cacheAsBitmap=!1,this._cacheIsDirty=!1,this.input=null},Object.defineProperty(Tiny.DisplayObject.prototype,"inputEnabled",{get:function(){return this.input&&this.input.enabled},set:function(t){t?null===this.input?(this.input={enabled:!0,parent:this},Tiny.EventTarget.mixin(this.input)):this.input.enabled=!0:null!==this.input&&(this.input.enabled=!1)}}),Tiny.DisplayObject.prototype.constructor=Tiny.DisplayObject,Tiny.DisplayObject.prototype.destroy=function(){if(this.children){for(var t=this.children.length;t--;)this.children[t].destroy();this.children=[]}this.parent&&this.parent.removeChild(this),this.hitArea=null,this.parent=null,this.stage=null,this.worldTransform=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.renderable=!1,this._destroyCachedSprite()},Object.defineProperty(Tiny.DisplayObject.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}}),Object.defineProperty(Tiny.DisplayObject.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.isMask=!0)}}),Object.defineProperty(Tiny.DisplayObject.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(t?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=t)}}),Tiny.DisplayObject.prototype.updateTransform=function(){var t,i,e,n,r,s,h,o;this.parent&&(t=this.parent.worldTransform,i=this.worldTransform,this.rotation%a?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),e=this._cr*this.scale.x,n=this._sr*this.scale.x,r=-this._sr*this.scale.y,s=this._cr*this.scale.y,h=this.position.x,o=this.position.y,(this.pivot.x||this.pivot.y)&&(h-=this.pivot.x*e+this.pivot.y*r,o-=this.pivot.x*n+this.pivot.y*s),i.a=e*t.a+n*t.c,i.b=e*t.b+n*t.d,i.c=r*t.a+s*t.c,i.d=r*t.b+s*t.d):(e=this.scale.x,s=this.scale.y,h=this.position.x-this.pivot.x*e,o=this.position.y-this.pivot.y*s,i.a=e*t.a,i.b=e*t.b,i.c=s*t.c,i.d=s*t.d),i.tx=h*t.a+o*t.c+t.tx,i.ty=h*t.b+o*t.d+t.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha)},Tiny.DisplayObject.prototype.displayObjectUpdateTransform=Tiny.DisplayObject.prototype.updateTransform,Tiny.DisplayObject.prototype.getBounds=function(t){return Tiny.EmptyRectangle},Tiny.DisplayObject.prototype.getLocalBounds=function(){return this.getBounds(Tiny.identityMatrix)},Tiny.DisplayObject.prototype.setStageReference=function(t){this.stage=t},Tiny.DisplayObject.prototype.preUpdate=function(){},Tiny.DisplayObject.prototype.generateTexture=function(t,i){var e=this.getLocalBounds(),n=new Tiny.RenderTexture(0|e.width,0|e.height,i,t);return Tiny.DisplayObject._tempMatrix.tx=-e.x,Tiny.DisplayObject._tempMatrix.ty=-e.y,n.render(this,Tiny.DisplayObject._tempMatrix),n},Tiny.DisplayObject.prototype.updateCache=function(){this._generateCachedSprite()},Tiny.DisplayObject.prototype.toGlobal=function(t){return this.displayObjectUpdateTransform(),this.worldTransform.apply(t)},Tiny.DisplayObject.prototype.toLocal=function(t,i){return i&&(t=i.toGlobal(t)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(t)},Tiny.DisplayObject.prototype._renderCachedSprite=function(t){this._cachedSprite.worldAlpha=this.worldAlpha,Tiny.Sprite.prototype._renderCanvas.call(this._cachedSprite,t)},Tiny.DisplayObject.prototype._generateCachedSprite=function(){this._cachedSprite=null,this._cacheAsBitmap=!1;var t,i=this.getLocalBounds();this._cachedSprite?this._cachedSprite.texture.resize(0|i.width,0|i.height):(t=new Tiny.RenderTexture(0|i.width,0|i.height),this._cachedSprite=new Tiny.Sprite(t),this._cachedSprite.worldTransform=this.worldTransform),Tiny.DisplayObject._tempMatrix.tx=-i.x,Tiny.DisplayObject._tempMatrix.ty=-i.y,this._cachedSprite.texture.render(this,Tiny.DisplayObject._tempMatrix,!0),this._cachedSprite.anchor.x=-(i.x/i.width),this._cachedSprite.anchor.y=-(i.y/i.height),this._cacheAsBitmap=!0},Tiny.DisplayObject.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},Tiny.DisplayObject.prototype._renderCanvas=function(t){},Object.defineProperty(Tiny.DisplayObject.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(Tiny.DisplayObject.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}}),Tiny.DisplayObject._tempMatrix=new Tiny.Matrix},function(t,i){Tiny.DisplayObjectContainer=function(){Tiny.DisplayObject.call(this),this.children=[]},Tiny.DisplayObjectContainer.prototype=Object.create(Tiny.DisplayObject.prototype),Tiny.DisplayObjectContainer.prototype.constructor=Tiny.DisplayObjectContainer,Object.defineProperty(Tiny.DisplayObjectContainer.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var i=this.getLocalBounds().width;this.scale.x=0!==i?t/i:1,this._width=t}}),Object.defineProperty(Tiny.DisplayObjectContainer.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var i=this.getLocalBounds().height;this.scale.y=0!==i?t/i:1,this._height=t}}),Tiny.DisplayObjectContainer.prototype.addChild=function(t){return this.addChildAt(t,this.children.length)},Tiny.DisplayObjectContainer.prototype.addChildAt=function(t,i){if(0<=i&&i<=this.children.length)return t.parent&&t.parent.removeChild(t),t.parent=this,t.game=this.game,this.children.splice(i,0,t),this.stage&&t.setStageReference(this.stage),t;throw new Error(t+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length)},Tiny.DisplayObjectContainer.prototype.swapChildren=function(t,i){if(t!==i){var e=this.getChildIndex(t),n=this.getChildIndex(i);if(e<0||n<0)throw new Error("swapChildren: Both the supplied DisplayObjects must be a child of the caller.");this.children[e]=i,this.children[n]=t}},Tiny.DisplayObjectContainer.prototype.getChildIndex=function(t){var i=this.children.indexOf(t);if(-1===i)throw new Error("The supplied DisplayObject must be a child of the caller");return i},Tiny.DisplayObjectContainer.prototype.setChildIndex=function(t,i){if(i<0||i>=this.children.length)throw new Error("The supplied index is out of bounds");var e=this.getChildIndex(t);this.children.splice(e,1),this.children.splice(i,0,t)},Tiny.DisplayObjectContainer.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied DisplayObject must be a child of the caller");return this.children[t]},Tiny.DisplayObjectContainer.prototype.removeChild=function(t){var i=this.children.indexOf(t);if(-1!==i)return this.removeChildAt(i)},Tiny.DisplayObjectContainer.prototype.removeChildAt=function(t){var i=this.getChildAt(t);return this.stage&&i.removeStageReference(),i.parent=void 0,this.children.splice(t,1),i},Tiny.DisplayObjectContainer.prototype.removeChildren=function(t,i){var e=t||0,n="number"==typeof i?i:this.children.length,r=n-e;if(0<r&&r<=n){for(var s=this.children.splice(e,r),h=0;h<s.length;h++){var o=s[h];this.stage&&o.removeStageReference(),o.parent=void 0}return s}if(0==r&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},Tiny.DisplayObjectContainer.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var t=0,i=this.children.length;t<i;t++)this.children[t].updateTransform()},Tiny.DisplayObjectContainer.prototype.displayObjectContainerUpdateTransform=Tiny.DisplayObjectContainer.prototype.updateTransform,Tiny.DisplayObjectContainer.prototype.getBounds=function(){if(0===this.children.length)return Tiny.EmptyRectangle;if(this._cachedSprite)return this._cachedSprite.getBounds();for(var t,i,e,n=1/0,r=1/0,s=-1/0,h=-1/0,o=!1,a=0,c=this.children.length;a<c;a++){this.children[a].visible&&(o=!0,n=n<(t=this.children[a].getBounds()).x?n:t.x,r=r<t.y?r:t.y,s=(i=t.width+t.x)<s?s:i,h=(e=t.height+t.y)<h?h:e)}if(!o)return Tiny.EmptyRectangle;var l=this._bounds;return l.x=n,l.y=r,l.width=s-n,l.height=h-r,l},Tiny.DisplayObjectContainer.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=Tiny.identityMatrix;for(var i=0,e=this.children.length;i<e;i++)this.children[i].updateTransform();var n=this.getBounds();return this.worldTransform=t,n},Tiny.DisplayObjectContainer.prototype.setStageReference=function(t){this.stage=t;for(var i=0;i<this.children.length;i++)this.children[i].setStageReference(t)},Tiny.DisplayObjectContainer.prototype.removeStageReference=function(){for(var t=0;t<this.children.length;t++)this.children[t].removeStageReference();this.stage=null},Tiny.DisplayObjectContainer.prototype._renderCanvas=function(t){if(!1!==this.visible&&0!==this.alpha)if(this._cacheAsBitmap)this._renderCachedSprite(t);else{this._mask&&t.maskManager.pushMask(this._mask,t);for(var i=0;i<this.children.length;i++)this.children[i]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}}},function(t,i){Tiny.Stage=function(t){Tiny.DisplayObjectContainer.call(this),this.worldTransform=new Tiny.Matrix,this.game=t,(this.stage=this).setBackgroundColor(16777215)},Tiny.Stage.prototype=Object.create(Tiny.DisplayObjectContainer.prototype),Tiny.Stage.prototype.constructor=Tiny.Stage,Tiny.Stage.prototype.updateTransform=function(){this.worldAlpha=1;for(var t=0;t<this.children.length;t++)this.children[t].updateTransform()},Tiny.Stage.prototype.setBackgroundColor=function(t){this.backgroundColor=t||0,this.backgroundColorSplit=Tiny.hex2rgb(this.backgroundColor);var i=this.backgroundColor.toString(16),i="000000".substr(0,6-i.length)+i;this.backgroundColorString="#"+i}},function(t,i){Tiny.CanvasRenderer=function(t,i,e){e=e||{},this.resolution=null!=e.resolution?e.resolution:1,this.clearBeforeRender=null==e.clearBeforeRender||e.clearBeforeRender,this.transparent=null!=e.transparent&&e.transparent,this.autoResize=e.autoResize||!1,this.width=t||800,this.height=i||600,this.width*=this.resolution,this.height*=this.resolution,this.view=e.view||document.createElement("canvas"),this.context=this.view.getContext("2d",{alpha:this.transparent}),this.view.width=this.width,this.view.height=this.height,Tiny.CanvasMaskManager&&(this.maskManager=new Tiny.CanvasMaskManager),this.renderSession={context:this.context,maskManager:this.maskManager,smoothProperty:null,roundPixels:!1},this.resize(t,i),"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="oImageSmoothingEnabled":"msImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="msImageSmoothingEnabled")},Tiny.CanvasRenderer.prototype.constructor=Tiny.CanvasRenderer,Tiny.CanvasRenderer.prototype.render=function(t){this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode="source-over",this.context.globalCompositeOperation="source-over",navigator.isCocoonJS&&this.view.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width,this.height):(this.context.fillStyle=t.backgroundColorString,this.context.fillRect(0,0,this.width,this.height))),this.renderDisplayObject(t)},Tiny.CanvasRenderer.prototype.destroy=function(t){void 0===t&&(t=!0),t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.view=null,this.context=null,this.maskManager=null,this.renderSession=null},Tiny.CanvasRenderer.prototype.resize=function(t,i){this.width=t*this.resolution,this.height=i*this.resolution,this.view.width=this.width,this.view.height=this.height,this.autoResize&&(this.view.style.width=this.width/this.resolution+"px",this.view.style.height=this.height/this.resolution+"px")},Tiny.CanvasRenderer.prototype.renderDisplayObject=function(t,i){this.renderSession.context=i||this.context,this.renderSession.resolution=this.resolution,t._renderCanvas(this.renderSession)}},function(t,i,e){e(0),e(14),e(15),e(16),e(17),e(18)},function(t,i){var r,s,h,o,a,e=function(){return(new Date).getTime()};void 0!==self.performance&&void 0!==self.performance.now?e=self.performance.now.bind(self.performance):void 0!==Date.now&&(e=Date.now),Tiny.RAF=function(t,i){void 0===i&&(i=!1),this.game=t,this.isRunning=!1,this.forceSetTimeOut=i;for(var e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;n++)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];r=!1,h=s=null,a=o=0},Tiny.RAF.prototype={start:function(){o=e(),this.isRunning=!0;var t=this;h=!window.requestAnimationFrame||this.forceSetTimeOut?(r=!0,s=function(){return t.updateSetTimeout()},window.setTimeout(s,0)):(r=!1,s=function(){return t.updateRAF()},window.requestAnimationFrame(s))},updateRAF:function(){a=e(),this.isRunning&&(this.game._update(Math.floor(a),a-o),h=window.requestAnimationFrame(s)),o=a},updateSetTimeout:function(){a=e(),this.isRunning&&(this.game._update(Math.floor(a),a-o),h=window.setTimeout(s,this.game.time.timeToCall)),o=a},stop:function(){r?clearTimeout(h):window.cancelAnimationFrame(h),this.isRunning=!1}}},function(t,i){Tiny.BaseTextureCache={},Tiny.BaseTextureCacheIdGenerator=0,Tiny.BaseTexture=function(t){var i;this.resolution=1,this.width=100,this.height=100,this.hasLoaded=!1,this.source=t,this.uid=Tiny._UID++,t&&((this.source.complete||this.source.getContext)&&this.source.width&&this.source.height?(this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height):(i=this).source.onload=function(){i.hasLoaded=!0,i.width=i.source.naturalWidth||i.source.width,i.height=i.source.naturalHeight||i.source.height},this.imageUrl=null)},Tiny.BaseTexture.prototype.constructor=Tiny.BaseTexture,Tiny.BaseTexture.prototype.destroy=function(){this.imageUrl?(delete Tiny.BaseTextureCache[this.key],delete Tiny.TextureCache[this.key],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")):this.source&&this.source._pixiId&&delete Tiny.BaseTextureCache[this.source._pixiId],this.source=null},Tiny.BaseTexture.fromImage=function(t,i,e){var n,r=Tiny.BaseTextureCache[t];return void 0===e&&-1===i.indexOf("data:")&&(e=!0),r||(n=new Image,e&&(n.crossOrigin=""),n.src=i,(r=new Tiny.BaseTexture(n)).imageUrl=i,r.key=t,Tiny.BaseTextureCache[t]=r),r},Tiny.BaseTexture.fromCanvas=function(t){t._pixiId||(t._pixiId="canvas_"+Tiny.TextureCacheIdGenerator++);var i=Tiny.BaseTextureCache[t._pixiId];return i||(i=new Tiny.BaseTexture(t),Tiny.BaseTextureCache[t._pixiId]=i),i}},function(t,i){Tiny.TextureCache={},Tiny.FrameCache={},Tiny.TextureSilentFail=!1,Tiny.TextureCacheIdGenerator=0,Tiny.Texture=function(t,i,e,n){this.noFrame=!1,i||(this.noFrame=!0,i=new Tiny.Rectangle(0,0,1,1)),t instanceof Tiny.Texture&&(t=t.baseTexture),this.baseTexture=t,this.frame=i,this.trim=n,this.valid=!1,this.width=0,this.height=0,this.crop=e||new Tiny.Rectangle(0,0,1,1),t.hasLoaded&&(this.noFrame&&(i=new Tiny.Rectangle(0,0,t.width,t.height)),this.setFrame(i))},Tiny.Texture.prototype.constructor=Tiny.Texture,Tiny.Texture.prototype.onBaseTextureLoaded=function(){var t=this.baseTexture;this.noFrame&&(this.frame=new Tiny.Rectangle(0,0,t.width,t.height)),this.setFrame(this.frame)},Tiny.Texture.prototype.destroy=function(t){t&&this.baseTexture.destroy(),this.valid=!1},Tiny.Texture.prototype.setFrame=function(t){if(this.noFrame=!1,this.frame=t,this.width=t.width,this.height=t.height,this.crop.x=t.x,this.crop.y=t.y,this.crop.width=t.width,this.crop.height=t.height,this.trim||!(t.x+t.width>this.baseTexture.width||t.y+t.height>this.baseTexture.height))this.valid=t&&t.width&&t.height&&this.baseTexture.source&&this.baseTexture.hasLoaded,this.trim&&(this.width=this.trim.width,this.height=this.trim.height,this.frame.width=this.trim.width,this.frame.height=this.trim.height);else{if(!Tiny.TextureSilentFail)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=!1}},Tiny.Texture.fromImage=function(t,i,e){var n=Tiny.TextureCache[t];return n||((n=new Tiny.Texture(Tiny.BaseTexture.fromImage(t,i,e))).key=t,Tiny.TextureCache[t]=n),n},Tiny.Texture.fromFrame=function(t){var i=Tiny.TextureCache[t];if(!i)throw new Error('The frameId "'+t+'" does not exist in the texture cache ');return i},Tiny.Texture.fromCanvas=function(t){var i=Tiny.BaseTexture.fromCanvas(t);return new Tiny.Texture(i)},Tiny.Texture.addTextureToCache=function(t,i){Tiny.TextureCache[i]=t},Tiny.Texture.removeTextureFromCache=function(t){var i=Tiny.TextureCache[t];return delete Tiny.TextureCache[t],delete Tiny.BaseTextureCache[t],i}},function(t,i){Tiny.Sprite=function(t,i){Tiny.DisplayObjectContainer.call(this),this.anchor=new Tiny.Point,this.setTexture(t,i,!1),this._width=0,this._height=0,this._frame=0,this.tint=16777215,this.blendMode="source-over",this.shader=null,this.texture.baseTexture.hasLoaded&&this.onTextureUpdate(),this.renderable=!0},Tiny.Sprite.prototype=Object.create(Tiny.DisplayObjectContainer.prototype),Tiny.Sprite.prototype.constructor=Tiny.Sprite,Object.defineProperty(Tiny.Sprite.prototype,"frameName",{get:function(){return this.texture.frame.name},set:function(t){this.texture.frame.name&&this.setTexture(Tiny.TextureCache[this.texture.key+"_"+t])}}),Object.defineProperty(Tiny.Sprite.prototype,"frame",{get:function(){return this._frame},set:function(t){this.texture.max_no_frame&&(this._frame=t,this._frame>this.texture.max_no_frame&&(this._frame=0),this.setTexture(Tiny.TextureCache[this.texture.key+"_"+this._frame]))}}),Object.defineProperty(Tiny.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(Tiny.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),Tiny.Sprite.prototype.setTexture=function(t,i,e){if("string"==typeof t){var n=t;if(null!=i&&(n=n+"_"+i),!(t=Tiny.TextureCache[n]))throw new Error("Cache Error: image "+n+" does`t found in cache")}return this.texture!==t&&(this.texture=t,this.cachedTint=16777215,!0===e&&this.onTextureUpdate(),!0)},Tiny.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},Tiny.Sprite.prototype.animate=function(t){var i;this.texture.max_no_frame&&null!=this.texture.frame.index&&(i=t||this.texture.frame.duration||100,this.animation?this.animation.delay=i:this.animation=this.game.timer.loop(i,function(){this.frame+=1,this.animation.delay=t||this.texture.frame.duration||100}.bind(this)),this.animation.start())},Tiny.Sprite.prototype.getBounds=function(t){var i,e,n,r,s,h,o,a,c=this.texture.frame.width,l=this.texture.frame.height,u=c*(1-this.anchor.x),p=c*-this.anchor.x,y=l*(1-this.anchor.y),d=l*-this.anchor.y,f=t||this.worldTransform,T=f.a,g=f.b,x=f.c,m=f.d,v=f.tx,w=f.ty,b=-1/0,_=-1/0,C=1/0,S=1/0,_=0===g&&0===x?(T<0&&(T*=-1),m<0&&(m*=-1),C=T*p+v,b=T*u+v,S=m*d+w,m*y+w):(C=(o=T*p+x*y+v)<(C=(s=T*u+x*y+v)<(C=(n=T*u+x*d+v)<(C=(i=T*p+x*d+v)<C?i:C)?n:C)?s:C)?o:C,S=(a=m*y+g*p+w)<(S=(h=m*y+g*u+w)<(S=(r=m*d+g*u+w)<(S=(e=m*d+g*p+w)<S?e:S)?r:S)?h:S)?a:S,b=(b=(b=(b=b<i?i:b)<n?n:b)<s?s:b)<o?o:b,(_=(_=(_=_<e?e:_)<r?r:_)<h?h:_)<a?a:_),P=this._bounds;return P.x=C,P.width=b-C,P.y=S,P.height=_-S,this._currentBounds=P},Tiny.Sprite.prototype._renderCanvas=function(t){if(!(!1===this.visible||0===this.alpha||!1===this.renderable||this.texture.crop.width<=0||this.texture.crop.height<=0)){var i,e,n;this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,t.context.globalCompositeOperation=t.currentBlendMode),this._mask&&t.maskManager.pushMask(this._mask,t),this.texture.valid&&(i=this.texture.baseTexture.resolution/t.resolution,t.context.globalAlpha=this.worldAlpha,e=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,n=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height,t.roundPixels?(t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution|0,this.worldTransform.ty*t.resolution|0),e|=0,n|=0):t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution,this.worldTransform.ty*t.resolution),16777215!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=Tiny.CanvasTinter.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,e/i,n/i,this.texture.crop.width/i,this.texture.crop.height/i)):t.context.drawImage(this.texture.baseTexture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,e/i,n/i,this.texture.crop.width/i,this.texture.crop.height/i));for(var r=0;r<this.children.length;r++)this.children[r]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}}},function(t,i){Tiny.Text=function(t,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=1,Tiny.Sprite.call(this,Tiny.Texture.fromCanvas(this.canvas)),this.setText(t),this.setStyle(i)},Tiny.Text.prototype=Object.create(Tiny.Sprite.prototype),Tiny.Text.prototype.constructor=Tiny.Text,Object.defineProperty(Tiny.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(Tiny.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),Tiny.Text.prototype.setStyle=function(t){(t=t||{}).font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.lineSpacing=t.lineSpacing||0,t.wordWrapWidth=t.wordWrapWidth||100,t.dropShadow=t.dropShadow||!1,t.dropShadowAngle=t.dropShadowAngle||Math.PI/6,t.dropShadowDistance=t.dropShadowDistance||4,t.dropShadowColor=t.dropShadowColor||"black",this.style=t,this.dirty=!0},Tiny.Text.prototype.setText=function(t){this.text=t.toString()||" ",this.dirty=!0},Tiny.Text.prototype.updateText=function(){this.texture.baseTexture.resolution=this.resolution,this.context.font=this.style.font;var t=this.text;this.style.wordWrap&&(t=this.wordWrap(this.text));for(var i=t.split(/(?:\r\n|\r|\n)/),e=[],n=0,r=this.determineFontProperties(this.style.font),s=0;s<i.length;s++){var h=this.context.measureText(i[s]).width;e[s]=h,n=Math.max(n,h)}var o=n+this.style.strokeThickness;this.style.dropShadow&&(o+=this.style.dropShadowDistance),this.canvas.width=(o+this.context.lineWidth)*this.resolution;var a,c,l=r.fontSize+this.style.strokeThickness+this.style.lineSpacing,u=l*i.length;if(this.style.dropShadow&&(u+=this.style.dropShadowDistance),this.canvas.height=(u-this.style.lineSpacing)*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="alphabetic",this.context.miterLimit=2,this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;for(var p=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,y=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance,s=0;s<i.length;s++)a=this.style.strokeThickness/2,c=this.style.strokeThickness/2+s*l+r.ascent,"right"===this.style.align?a+=n-e[s]:"center"===this.style.align&&(a+=(n-e[s])/2),this.style.fill&&this.context.fillText(i[s],a+p,c+y)}for(this.context.fillStyle=this.style.fill,s=0;s<i.length;s++)a=this.style.strokeThickness/2,c=this.style.strokeThickness/2+s*l+r.ascent,"right"===this.style.align?a+=n-e[s]:"center"===this.style.align&&(a+=(n-e[s])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(i[s],a,c),this.style.fill&&this.context.fillText(i[s],a,c);this.updateTexture()},Tiny.Text.prototype.updateTexture=function(){this.texture.baseTexture.width=this.canvas.width,this.texture.baseTexture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height},Tiny.Text.prototype._renderCanvas=function(t){this.dirty&&(this.resolution=t.resolution,this.updateText(),this.dirty=!1),Tiny.Sprite.prototype._renderCanvas.call(this,t)},Tiny.Text.prototype.determineFontProperties=function(t){var i=Tiny.Text.fontPropertiesCache[t];if(!i){i={};var e=Tiny.Text.fontPropertiesCanvas,n=Tiny.Text.fontPropertiesContext;n.font=t;var r=Math.ceil(n.measureText("|MÉq").width),s=2*(h=Math.ceil(n.measureText("|MÉq").width)),h=1.4*h|0;e.width=r,e.height=s,n.fillStyle="#f00",n.fillRect(0,0,r,s),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText("|MÉq",0,h);for(var o,a=n.getImageData(0,0,r,s).data,c=a.length,l=4*r,u=0,p=!1,y=0;y<h;y++){for(o=0;o<l;o+=4)if(255!==a[u+o]){p=!0;break}if(p)break;u+=l}for(i.ascent=h-y,u=c-l,p=!1,y=s;h<y;y--){for(o=0;o<l;o+=4)if(255!==a[u+o]){p=!0;break}if(p)break;u-=l}i.descent=y-h,i.descent+=6,i.fontSize=i.ascent+i.descent,Tiny.Text.fontPropertiesCache[t]=i}return i},Tiny.Text.prototype.wordWrap=function(t){for(var i="",e=t.split("\n"),n=0;n<e.length;n++){for(var r=this.style.wordWrapWidth,s=e[n].split(" "),h=0;h<s.length;h++){var o=this.context.measureText(s[h]).width,a=o+this.context.measureText(" ").width;0===h||r<a?(0<h&&(i+="\n"),i+=s[h],r=this.style.wordWrapWidth-o):(r-=a,i+=" "+s[h])}n<e.length-1&&(i+="\n")}return i},Tiny.Text.prototype.getBounds=function(t){return this.dirty&&(this.updateText(),this.dirty=!1),Tiny.Sprite.prototype.getBounds.call(this,t)},Tiny.Text.prototype.destroy=function(t){this.context=null,this.canvas=null,this.texture.destroy(void 0===t||t)},Tiny.Text.fontPropertiesCache={},Tiny.Text.fontPropertiesCanvas=document.createElement("canvas"),Tiny.Text.fontPropertiesContext=Tiny.Text.fontPropertiesCanvas.getContext("2d")},function(t,i,e){e(13),e(20),e(21),e(22),e(23),e(24)},function(t,i){Tiny.ObjectCreator=function(t){this.game=t},Tiny.ObjectCreator.prototype={group:function(t,i){var e=new Tiny.DisplayObjectContainer;return this.game.stage.addChild(e),e.x=t||0,e.y=i||0,e},sprite:function(t,i,e,n){var r=new Tiny.Sprite(e,n);return r.frame=0,this.game.stage.addChild(r),r.x=t||0,r.y=i||0,r},text:function(t,i,e,n){e=new Tiny.Text(e,n);return this.game.stage.addChild(e),e.x=t||0,e.y=i||0,e},tileSprite:function(t,i,e,n,r,s){var h=new Tiny.TilingSprite(r,s,e,n);return this.game.stage.addChild(h),h.x=t||0,h.y=i||0,h},graphics:function(t,i){var e=new Tiny.Graphics;return this.game.stage.addChild(e),e.x=t||0,e.y=i||0,e}}},function(t,i){Tiny.Loader=function(t){this.game=t,this.cache=[]},Tiny.Loader.loadSpriteSheet=function(t,i){for(var e=i.length-1,n=0;n<=e;n++){var r=t+"_"+n;Tiny.TextureCache[r]=new Tiny.Texture(Tiny.BaseTextureCache[t],{index:n,x:Math.floor(i[n].x),y:Math.floor(i[n].y),width:Math.floor(i[n].width),height:Math.floor(i[n].height),duration:i[n].duration}),Tiny.TextureCache[r].key=t,Tiny.TextureCache[r].max_no_frame=e}return e},Tiny.Loader.parseSpriteSheet=function(t,i,e,n){var r=Tiny.BaseTextureCache[t],s=r.width,h=r.height;i<=0&&(i=Math.floor(-s/Math.min(-1,i))),e<=0&&(e=Math.floor(-h/Math.min(-1,e)));var o=Math.floor(s/i)*Math.floor(h/e);if(0==o)return null;for(var a=0,c=0,l=o-1,u={},p=0;p<o;p++){u={index:p,x:a,y:c,width:i,height:e,duration:n};var y=t+"_"+p;Tiny.TextureCache[y]=new Tiny.Texture(r,u),Tiny.TextureCache[y].key=t,Tiny.TextureCache[y].max_no_frame=l,s<(a+=i)+i&&(a=0,c+=e)}return l},Tiny.Loader.loadAtlas=function(t,i){for(var e=0;e<i.length;e++){var n=t+"_"+i[e].name;Tiny.TextureCache[n]=new Tiny.Texture(Tiny.BaseTextureCache[t],i[e]),Tiny.TextureCache[n].key=t}},Tiny.Loader.prototype={image:function(t,i){this.cache.push({src:i,key:t,cb:function(){}})},spritesheet:function(t,i,e,n,r){this.cache.push({src:i,key:t,cb:function(){"number"==typeof e?Tiny.TextureCache[t].max_no_frame=Tiny.Loader.parseSpriteSheet(t,e,n,r):0<e.length&&(Tiny.TextureCache[t].max_no_frame=Tiny.Loader.loadSpriteSheet(t,e))}})},atlas:function(t,i,e){this.cache.push({src:i,key:t,cb:function(){Tiny.Loader.loadAtlas(t,e)}})},start:function(r){var s=this.game,h=this.cache;0!=h.length?function t(){var i=!1,e=h.shift(),n=new Image;n.onload=function(){Tiny.BaseTextureCache[e.key]=new Tiny.BaseTexture(n),Tiny.TextureCache[e.key]=new Tiny.Texture(Tiny.BaseTextureCache[e.key]),Tiny.TextureCache[e.key].key=e.key,e.cb(),i||(n.onload=null,i=!0,0!=h.length?t():r.call(s))},n.src=e.src}():r.call(s)}}},function(t,i){var e,o,h,a,c,l;function u(t,i){var e,n,r,s=null;return"undefined"!=typeof TouchEvent&&t instanceof TouchEvent?(h=!0,0<t.touches.length?s={x:t.touches[0].pageX,y:t.touches[0].pageY}:t.pageX&&t.pageY&&(s={x:t.pageX,y:t.pageY})):s={x:t.pageX,y:t.pageY},h&&t instanceof MouseEvent||null===s?null:(e=s.x,n=s.y,i&&a||(a=c.inputView.getBoundingClientRect()),s={x:e-(r=a).left,y:n-r.top})}function n(t,i,e){var n=u(i,e);if(null!==n){if("move"!=t){o.length=0,function t(i,e,n){if(i.inputEnabled&&i.worldVisible&&i.getBounds().contains(e,n)&&o.push(i),i.children&&0<i.children.length)for(var r=0;r<i.children.length;r++)t(i.children[r],e,n)}(c.stage,n.x,n.y);for(var r=o.length-1;0<=r;r--){var s,h=o[r];if(h.input["last_"+t]={x:n.x,y:n.y},h.input.emit(t,{x:n.x,y:n.y}),"up"!=t||(s=h.input.last_down)&&Tiny.Math.distance(s.x,s.y,n.x,n.y)<30&&h.input.emit("click",{x:n.x,y:n.y}),!h.input.transparent)break}}l.emit(t,{x:n.x,y:n.y})}}function r(t){n("move",e=t,!0)}function s(t){l.isDown=!1,n("up",e,!0)}function p(t){l.isDown=!0,n("down",e=t,!1)}Tiny.Input=function(t){c=t,o=[],e=null,(l=this).isDown=!1;var i=c.inputView.addEventListener;i("touchstart",p),i("touchmove",r),i("touchend",s),i("touchcancel",s),i("mousedown",p),i("mousemove",r),i("mouseup",s),Tiny.EventTarget.mixin(this)},Tiny.Input.prototype={destroy:function(){var t=c.inputView.removeEventListener;t("touchstart",p),t("touchmove",r),t("touchend",s),t("touchcancel",s),t("mousedown",p),t("mousemove",r),t("mouseup",s)}}},function(t,i){function a(){}function s(t,i,e,n,r,s,h,o){this.game=e,this._cb_=n||a,this.delay=null==r?1e3:r,this.loop=s,this._count=h||0,this._repeat=0<this._count,this.status=t,this._lastFrame=0,this.autoRemove=i,this._oncomplete=o||a}s.prototype={start:function(){this.status=1},pause:function(){this.status=0},stop:function(){this.status=0,this._lastFrame=0},update:function(t){this.status&&(this._lastFrame+=t,this._lastFrame>=this.delay&&(this._cb_(),this._lastFrame=0,this._repeat?(this._count--,0===this._count&&(this.status=0,this.autoRemove&&this.game.timer.remove(this),this._oncomplete())):this.loop||(this.status=0,this.autoRemove&&this.game.timer.remove(this))))}},Tiny.Timer=s,Tiny.TimerCreator=function(t){this.game=t,this.game.timers=[],this.autoStart=!0,this.autoRemove=!0},Tiny.TimerCreator.prototype={removeAll:function(){this.game.timers.forEach(function(t){t.stop()}),this.game.timers=[]},remove:function(t){var i=this.game.timers.indexOf(t);-1<i&&(t.stop(),this.game.timers.splice(i,1))},add:function(t,i,e,n){null==e&&(e=this.autoStart);var r=new s(e?1:0,null!=n?n:this.autoRemove,this.game,i,t);return this.game.timers.push(r),r},loop:function(t,i,e,n){null==e&&(e=this.autoStart);var r=new s(e?1:0,null!=n?n:this.autoRemove,this.game,i,t,!0);return this.game.timers.push(r),r},repeat:function(t,i,e,n){var r=new s(this.autoStart?1:0,this.autoRemove,this.game,e,t,!1,i,n);return this.game.timers.push(r),r}}},function(t,i){Tiny.EventTarget={call:function(t){t&&(t=t.prototype||t,Tiny.EventTarget.mixin(t))},mixin:function(t){t.listeners=function(t){return this._listeners=this._listeners||{},this._listeners[t]?this._listeners[t].slice():[]},t.emit=t.dispatchEvent=function(t,i){if(this._listeners=this._listeners||{},"object"==typeof t&&(t=(i=t).type),i&&!0===i.__isEventObject||(i=new Tiny.Event(this,t,i)),this._listeners&&this._listeners[t]){for(var e=this._listeners[t].slice(0),n=e.length,r=e[0],s=0;s<n;r=e[++s])if(r._cb_.call(r._ctx_,i),i.stoppedImmediate)return this;if(i.stopped)return this}return this.parent&&this.parent.emit&&this.parent.emit.call(this.parent,t,i),this},t.on=t.addEventListener=function(t,i,e){return this._listeners=this._listeners||{},(this._listeners[t]=this._listeners[t]||[]).push({_cb_:i,_ctx_:e}),this},t.once=function(t,i,e){this._listeners=this._listeners||{};var n=this;function r(){i.apply(e,arguments),n.off(t,i,e)}return r._originalHandler=i,this.on(t,r,e)},t.off=t.removeEventListener=function(t,i,e){if(this._listeners=this._listeners||{},!this._listeners[t])return this;for(var n=this._listeners[t],r=i?n.length:0;0<r--;)n[r]._cb_!==i&&n[r]._cb_._originalHandler!==i||(e&&n[r]._ctx_?n[r]._ctx_===e&&n.splice(n.indexOf(n[r]),1):e||n[r]._ctx_||n.splice(n.indexOf(n[r]),1));return 0===n.length&&delete this._listeners[t],this},t.removeAllListeners=function(t){return this._listeners=this._listeners||{},this._listeners[t]&&delete this._listeners[t],this}}},Tiny.Event=function(t,i,e){for(var n in e)this[n]=e[n];this.__isEventObject=!0,this.stopped=!1,this.stoppedImmediate=!1,this.target=t,this.type=i,this.timeStamp=Date.now()},Tiny.Event.prototype.stopPropagation=function(){this.stopped=!0},Tiny.Event.prototype.stopImmediatePropagation=function(){this.stoppedImmediate=!0}},function(t,i){Tiny.RoundedRectangle=function(t,i,e,n,r){this.x=t||0,this.y=i||0,this.width=e||0,this.height=n||0,this.radius=r||20,this.type=Tiny.Primitives.RREC},Tiny.RoundedRectangle.prototype.clone=function(){return new Tiny.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},Tiny.RoundedRectangle.prototype.contains=function(t,i){if(this.width<=0||this.height<=0)return!1;var e=this.x;if(e<=t&&t<=e+this.width){var n=this.y;if(n<=i&&i<=n+this.height)return!0}return!1},Tiny.RoundedRectangle.prototype.constructor=Tiny.RoundedRectangle},function(t,i){Tiny.Polygon=function(){this.area=0,this._points=[],0<arguments.length&&this.setTo.apply(this,arguments),this.closed=!0,this.type=Tiny.Primitives.POLY},Tiny.Polygon.prototype={toNumberArray:function(t){void 0===t&&(t=[]);for(var i=0;i<this._points.length;i++)"number"==typeof this._points[i]?(t.push(this._points[i]),t.push(this._points[i+1]),i++):(t.push(this._points[i].x),t.push(this._points[i].y));return t},flatten:function(){return this._points=this.toNumberArray(),this},clone:function(t){var i=this._points.slice();return null==t?t=new Tiny.Polygon(i):t.setTo(i),t},contains:function(t,i){for(var e=this._points.length,n=!1,r=-1,s=e-1;++r<e;s=r){var h=this._points[r].x,o=this._points[r].y,a=this._points[s].x,c=this._points[s].y;(o<=i&&i<c||c<=i&&i<o)&&t<(a-h)*(i-o)/(c-o)+h&&(n=!n)}return n},setTo:function(t){if(this.area=0,this._points=[],0<arguments.length){Array.isArray(t)||(t=Array.prototype.slice.call(arguments));for(var i,e=Number.MAX_VALUE,n=0,r=t.length;n<r;n++){"number"==typeof t[n]?(i=new Tiny.Point(t[n],t[n+1]),n++):i=new Tiny.Point(t[n].x,t[n].y),this._points.push(i),i.y<e&&(e=i.y)}this.calculateArea(e)}return this},calculateArea:function(t){for(var i,e,n,r,s=0,h=this._points.length;s<h;s++)i=this._points[s],e=s===h-1?this._points[0]:this._points[s+1],n=(i.y-t+(e.y-t))/2,r=i.x-e.x,this.area+=n*r;return this.area}},Tiny.Polygon.prototype.constructor=Tiny.Polygon,Object.defineProperty(Tiny.Polygon.prototype,"points",{get:function(){return this._points},set:function(t){null!=t?this.setTo(t):this.setTo()}})},function(t,i){Tiny.Circle=function(t,i,e){t=t||0,i=i||0,e=e||0,this.x=t,this.y=i,this._diameter=e,(this._radius=0)<e&&(this._radius=.5*e),this.type=Tiny.Primitives.CIRC},Tiny.Circle.prototype={getBounds:function(){return new Tiny.Rectangle(this.x-this.radius,this.y-this.radius,this.diameter,this.diameter)},setTo:function(t,i,e){return this.x=t,this.y=i,this._diameter=e,this._radius=.5*e,this},copyFrom:function(t){return this.setTo(t.x,t.y,t.diameter)},copyTo:function(t){return t.x=this.x,t.y=this.y,t.diameter=this._diameter,t},distance:function(t,i){var e=Tiny.Math.distance(this.x,this.y,t.x,t.y);return i?Math.round(e):e},clone:function(t){return null==t?t=new Tiny.Circle(this.x,this.y,this.diameter):t.setTo(this.x,this.y,this.diameter),t},contains:function(t,i){return Tiny.Circle.contains(this,t,i)},offset:function(t,i){return this.x+=t,this.y+=i,this},offsetPoint:function(t){return this.offset(t.x,t.y)}},Tiny.Circle.prototype.constructor=Tiny.Circle,Object.defineProperty(Tiny.Circle.prototype,"diameter",{get:function(){return this._diameter},set:function(t){0<t&&(this._diameter=t,this._radius=.5*t)}}),Object.defineProperty(Tiny.Circle.prototype,"radius",{get:function(){return this._radius},set:function(t){0<t&&(this._radius=t,this._diameter=2*t)}}),Object.defineProperty(Tiny.Circle.prototype,"left",{get:function(){return this.x-this._radius},set:function(t){t>this.x?(this._radius=0,this._diameter=0):this.radius=this.x-t}}),Object.defineProperty(Tiny.Circle.prototype,"right",{get:function(){return this.x+this._radius},set:function(t){t<this.x?(this._radius=0,this._diameter=0):this.radius=t-this.x}}),Object.defineProperty(Tiny.Circle.prototype,"top",{get:function(){return this.y-this._radius},set:function(t){t>this.y?(this._radius=0,this._diameter=0):this.radius=this.y-t}}),Object.defineProperty(Tiny.Circle.prototype,"bottom",{get:function(){return this.y+this._radius},set:function(t){t<this.y?(this._radius=0,this._diameter=0):this.radius=t-this.y}}),Object.defineProperty(Tiny.Circle.prototype,"area",{get:function(){return 0<this._radius?Math.PI*this._radius*this._radius:0}}),Object.defineProperty(Tiny.Circle.prototype,"empty",{get:function(){return 0===this._diameter},set:function(t){!0===t&&this.setTo(0,0,0)}}),Tiny.Circle.contains=function(t,i,e){return 0<t.radius&&i>=t.left&&i<=t.right&&e>=t.top&&e<=t.bottom&&(t.x-i)*(t.x-i)+(t.y-e)*(t.y-e)<=t.radius*t.radius},Tiny.Circle.equals=function(t,i){return t.x==i.x&&t.y==i.y&&t.diameter==i.diameter},Tiny.Circle.intersects=function(t,i){return Tiny.Math.distance(t.x,t.y,i.x,i.y)<=t.radius+i.radius},Tiny.Circle.intersectsRectangle=function(t,i){var e=Math.abs(t.x-i.x-i.halfWidth);if(i.halfWidth+t.radius<e)return!1;var n=Math.abs(t.y-i.y-i.halfHeight);if(i.halfHeight+t.radius<n)return!1;if(e<=i.halfWidth||n<=i.halfHeight)return!0;var r=e-i.halfWidth,s=n-i.halfHeight;return r*r+s*s<=t.radius*t.radius}},function(t,i){Tiny.CanvasGraphics=function(){},Tiny.CanvasGraphics.renderGraphics=function(t,i){var e=t.worldAlpha;t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1);for(var n=0;n<t.graphicsData.length;n++){var r,s,h,o,a,c,l,u,p,y,d,f,T,g,x,m,v=t.graphicsData[n],w=v.shape,b=v._fillTint,_=v._lineTint;if(i.lineWidth=v.lineWidth,v.type===Tiny.Primitives.POLY){i.beginPath();var C=w.points;i.moveTo(C[0],C[1]);for(var S=1;S<C.length/2;S++)i.lineTo(C[2*S],C[2*S+1]);w.closed&&i.lineTo(C[0],C[1]),C[0]===C[C.length-2]&&C[1]===C[C.length-1]&&i.closePath(),v.fill&&(i.globalAlpha=v.fillAlpha*e,i.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),i.fill()),v.lineWidth&&(i.globalAlpha=v.lineAlpha*e,i.strokeStyle="#"+("00000"+(0|_).toString(16)).substr(-6),i.stroke())}else{v.type===Tiny.Primitives.RECT?(!v.fillColor&&0!==v.fillColor||(i.globalAlpha=v.fillAlpha*e,i.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),i.fillRect(w.x,w.y,w.width,w.height)),v.lineWidth&&(i.globalAlpha=v.lineAlpha*e,i.strokeStyle="#"+("00000"+(0|_).toString(16)).substr(-6),i.strokeRect(w.x,w.y,w.width,w.height))):v.type===Tiny.Primitives.CIRC?(i.beginPath(),i.arc(w.x,w.y,w.radius,0,2*Math.PI),i.closePath(),v.fill&&(i.globalAlpha=v.fillAlpha*e,i.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),i.fill()),v.lineWidth&&(i.globalAlpha=v.lineAlpha*e,i.strokeStyle="#"+("00000"+(0|_).toString(16)).substr(-6),i.stroke())):v.type===Tiny.Primitives.ELIP?(r=2*w.width,s=2*w.height,h=w.x-r/2,o=w.y-s/2,i.beginPath(),a=r/2*.5522848,c=s/2*.5522848,l=h+r,u=o+s,p=h+r/2,y=o+s/2,i.moveTo(h,y),i.bezierCurveTo(h,y-c,p-a,o,p,o),i.bezierCurveTo(p+a,o,l,y-c,l,y),i.bezierCurveTo(l,y+c,p+a,u,p,u),i.bezierCurveTo(p-a,u,h,y+c,h,y),i.closePath(),v.fill&&(i.globalAlpha=v.fillAlpha*e,i.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),i.fill()),v.lineWidth&&(i.globalAlpha=v.lineAlpha*e,i.strokeStyle="#"+("00000"+(0|_).toString(16)).substr(-6),i.stroke())):v.type===Tiny.Primitives.RREC?(f=w.x,T=w.y,g=w.width,x=w.height,m=w.radius,m=(d=Math.min(g,x)/2|0)<m?d:m,i.beginPath(),i.moveTo(f,T+m),i.lineTo(f,T+x-m),i.quadraticCurveTo(f,T+x,f+m,T+x),i.lineTo(f+g-m,T+x),i.quadraticCurveTo(f+g,T+x,f+g,T+x-m),i.lineTo(f+g,T+m),i.quadraticCurveTo(f+g,T,f+g-m,T),i.lineTo(f+m,T),i.quadraticCurveTo(f,T,f,T+m),i.closePath(),!v.fillColor&&0!==v.fillColor||(i.globalAlpha=v.fillAlpha*e,i.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),i.fill()),v.lineWidth&&(i.globalAlpha=v.lineAlpha*e,i.strokeStyle="#"+("00000"+(0|_).toString(16)).substr(-6),i.stroke())):v.type===Tiny.Primitives.RREC_LJOIN&&(f=w.x,T=w.y,g=w.width,x=w.height,m=w.radius,!v.fillColor&&0!==v.fillColor||(i.globalAlpha=v.fillAlpha*e,i.fillStyle="#"+("00000"+(0|b).toString(16)).substr(-6),i.strokeStyle="#"+("00000"+(0|b).toString(16)).substr(-6)),i.lineJoin="round",i.lineWidth=m,i.strokeRect(f+m/2,T+m/2,g-m,x-m),i.fillRect(f+m/2,T+m/2,g-m,x-m))}}},Tiny.CanvasGraphics.renderGraphicsMask=function(t,i){var e=t.graphicsData.length;if(0!==e){i.beginPath();for(var n=0;n<e;n++){var r,s,h,o,a,c,l,u,p,y,d,f,T,g,x,m,v=t.graphicsData[n],w=v.shape;if(v.type===Tiny.Primitives.POLY){var b=w.points;i.moveTo(b[0],b[1]);for(var _=1;_<b.length/2;_++)i.lineTo(b[2*_],b[2*_+1]);b[0]===b[b.length-2]&&b[1]===b[b.length-1]&&i.closePath()}else{v.type===Tiny.Primitives.RECT?(i.rect(w.x,w.y,w.width,w.height),i.closePath()):v.type===Tiny.Primitives.CIRC?(i.arc(w.x,w.y,w.radius,0,2*Math.PI),i.closePath()):v.type===Tiny.Primitives.ELIP?(a=(r=2*w.width)/2*.5522848,c=(s=2*w.height)/2*.5522848,l=(h=w.x-r/2)+r,u=(o=w.y-s/2)+s,p=h+r/2,y=o+s/2,i.moveTo(h,y),i.bezierCurveTo(h,y-c,p-a,o,p,o),i.bezierCurveTo(p+a,o,l,y-c,l,y),i.bezierCurveTo(l,y+c,p+a,u,p,u),i.bezierCurveTo(p-a,u,h,y+c,h,y),i.closePath()):v.type!==Tiny.Primitives.RREC&&v.type!==Tiny.Primitives.RREC_LJOIN||(d=w.x,f=w.y,T=w.width,g=w.height,m=w.radius,m=(x=Math.min(T,g)/2|0)<m?x:m,i.moveTo(d,f+m),i.lineTo(d,f+g-m),i.quadraticCurveTo(d,f+g,d+m,f+g),i.lineTo(d+T-m,f+g),i.quadraticCurveTo(d+T,f+g,d+T,f+g-m),i.lineTo(d+T,f+m),i.quadraticCurveTo(d+T,f,d+T-m,f),i.lineTo(d+m,f),i.quadraticCurveTo(d,f,d,f+m),i.closePath())}}}},Tiny.CanvasGraphics.updateGraphicsTint=function(t){if(16777215!==t.tint)for(var i=(t.tint>>16&255)/255,e=(t.tint>>8&255)/255,n=(255&t.tint)/255,r=0;r<t.graphicsData.length;r++){var s=t.graphicsData[r],h=0|s.fillColor,o=0|s.lineColor;s._fillTint=((h>>16&255)/255*i*255<<16)+((h>>8&255)/255*e*255<<8)+(255&h)/255*n*255,s._lineTint=((o>>16&255)/255*i*255<<16)+((o>>8&255)/255*e*255<<8)+(255&o)/255*n*255}}},function(t,i){Tiny.GraphicsData=function(t,i,e,n,r,s,h){this.lineWidth=t,this.lineColor=i,this.lineAlpha=e,this._lineTint=i,this.fillColor=n,this.fillAlpha=r,this._fillTint=n,this.fill=s,this.shape=h,this.type=h.type},Tiny.GraphicsData.prototype.constructor=Tiny.GraphicsData,Tiny.GraphicsData.prototype.clone=function(){return new GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},Tiny.Graphics=function(){Tiny.DisplayObjectContainer.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint=16777215,this.blendMode="source-over",this.currentPath=null,this._webGL=[],this.isMask=!1,this.boundsPadding=0,this._localBounds=new Tiny.Rectangle(0,0,1,1),this._boundsDirty=!0,this.cachedSpriteDirty=!1},Tiny.Graphics.prototype=Object.create(Tiny.DisplayObjectContainer.prototype),Tiny.Graphics.prototype.constructor=Tiny.Graphics,Tiny.Graphics.prototype.lineStyle=function(t,i,e){return this.lineWidth=t||0,this.lineColor=i||0,this.lineAlpha=void 0===e?1:e,this.currentPath&&(this.currentPath.shape.points.length?this.drawShape(new Tiny.Polygon(this.currentPath.shape.points.slice(-2))):(this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha)),this},Tiny.Graphics.prototype.moveTo=function(t,i){return this.drawShape(new Tiny.Polygon([t,i])),this},Tiny.Graphics.prototype.lineTo=function(t,i){return this.currentPath||this.moveTo(0,0),this.currentPath.shape.points.push(t,i),this._boundsDirty=!0,this.cachedSpriteDirty=!0,this},Tiny.Graphics.prototype.quadraticCurveTo=function(t,i,e,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var r,s,h=this.currentPath.shape.points;0===h.length&&this.moveTo(0,0);for(var o=h[h.length-2],a=h[h.length-1],c=0,l=1;l<=20;++l)r=o+(t-o)*(c=l/20),s=a+(i-a)*c,h.push(r+(t+(e-t)*c-r)*c,s+(i+(n-i)*c-s)*c);return this._boundsDirty=!0,this.cachedSpriteDirty=!0,this},Tiny.Graphics.prototype.bezierCurveTo=function(t,i,e,n,r,s){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var h,o,a,c,l,u=this.currentPath.shape.points,p=u[u.length-2],y=u[u.length-1],d=0,f=1;f<=20;++f)a=(o=(h=1-(d=f/20))*h)*h,l=(c=d*d)*d,u.push(a*p+3*o*d*t+3*h*c*e+l*r,a*y+3*o*d*i+3*h*c*n+l*s);return this._boundsDirty=!0,this.cachedSpriteDirty=!0,this},Tiny.Graphics.prototype.arcTo=function(t,i,e,n,r){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,i):this.moveTo(t,i);var s,h,o,a,c,l,u,p,y,d,f,T,g,x,m,v=this.currentPath.shape.points,w=v[v.length-2],b=v[v.length-1]-i,_=w-t,C=n-i,S=e-t,P=Math.abs(b*S-_*C);return P<1e-8||0===r?v[v.length-2]===t&&v[v.length-1]===i||v.push(t,i):(s=b*b+_*_,h=C*C+S*S,o=b*C+_*S,p=(a=r*Math.sqrt(s)/P)*S+(c=r*Math.sqrt(h)/P)*_,y=a*C+c*b,d=_*(c+(l=a*o/s)),f=b*(c+l),T=S*(a+(u=c*o/h)),g=C*(a+u),x=Math.atan2(f-y,d-p),m=Math.atan2(g-y,T-p),this.arc(p+t,y+i,r,x,m,S*b<_*C)),this._boundsDirty=!0,this.cachedSpriteDirty=!0,this},Tiny.Graphics.prototype.arc=function(t,i,e,n,r,s){if(n===r)return this;void 0===s&&(s=!1),!s&&r<=n?r+=2*Math.PI:s&&n<=r&&(n+=2*Math.PI);var h=s?-1*(n-r):r-n,o=40*Math.ceil(Math.abs(h)/(2*Math.PI));if(0==h)return this;var a=t+Math.cos(n)*e,c=i+Math.sin(n)*e;s&&this.filling?this.moveTo(t,i):this.moveTo(a,c);for(var l=this.currentPath.shape.points,u=h/(2*o),p=2*u,y=Math.cos(u),d=Math.sin(u),f=o-1,T=f%1/f,g=0;g<=f;g++){var x=u+n+p*(g+T*g),m=Math.cos(x),v=-Math.sin(x);l.push((y*m+d*v)*e+t,(y*-v+d*m)*e+i)}return this._boundsDirty=!0,this.cachedSpriteDirty=!0,this},Tiny.Graphics.prototype.beginFill=function(t,i){return this.filling=!0,this.fillColor=t||0,this.fillAlpha=void 0===i?1:i,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},Tiny.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},Tiny.Graphics.prototype.drawRect=function(t,i,e,n){return this.drawShape(new Tiny.Rectangle(t,i,e,n)),this},Tiny.Graphics.prototype.drawRoundedRect=function(t,i,e,n,r){return this.drawShape(new Tiny.RoundedRectangle(t,i,e,n,r)),this},Tiny.Graphics.prototype.drawRoundedRect2=function(t,i,e,n,r){var s=new Tiny.RoundedRectangle(t,i,e,n,r);return s.type=Tiny.Primitives.RREC_LJOIN,this.drawShape(s),this},Tiny.Graphics.prototype.drawCircle=function(t,i,e){return this.drawShape(new Tiny.Circle(t,i,e)),this},Tiny.Graphics.prototype.drawEllipse=function(t,i,e,n){return this.drawShape(new Tiny.Ellipse(t,i,e,n)),this},Tiny.Graphics.prototype.drawPolygon=function(t){var i=t;if(!Array.isArray(i)){i=new Array(arguments.length);for(var e=0;e<i.length;++e)i[e]=arguments[e]}return this.drawShape(new Tiny.Polygon(i)),this},Tiny.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this._boundsDirty=!0,this.cachedSpriteDirty=!0,this.graphicsData=[],this.updateLocalBounds(),this},Tiny.Graphics.prototype.destroy=function(t){if(this.children){for(var i=this.children.length;i--;)this.children[i].destroy();this.children=[]}this.clear()},Tiny.Graphics.prototype.generateTexture=function(t){t=t||1;var i=this.getBounds(),e=new Tiny.CanvasBuffer(i.width*t,i.height*t),n=Tiny.Texture.fromCanvas(e.canvas);return n.baseTexture.resolution=t,e.context.scale(t,t),e.context.translate(-i.x,-i.y),Tiny.CanvasGraphics.renderGraphics(this,e.context),n},Tiny.Graphics.prototype._renderCanvas=function(t){if(!0!==this.isMask){if(this._prevTint!==this.tint&&(this._boundsDirty=!0,this._prevTint=this.tint),this._cacheAsBitmap)return this.cachedSpriteDirty&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this._boundsDirty=!1),this._cachedSprite.alpha=this.alpha,void Tiny.Sprite.prototype._renderCanvas.call(this._cachedSprite,t);var i=t.context,e=this.worldTransform;this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,i.globalCompositeOperation=t.currentBlendMode),this._mask&&t.maskManager.pushMask(this._mask,t);var n=t.resolution;i.setTransform(e.a*n,e.b*n,e.c*n,e.d*n,e.tx*n,e.ty*n),Tiny.CanvasGraphics.renderGraphics(this,i);for(var r=0;r<this.children.length;r++)this.children[r]._renderCanvas(t);this._mask&&t.maskManager.popMask(t)}},Tiny.Graphics.prototype.getBounds=function(t){if(!this._currentBounds||this._boundsDirty){if(!this.renderable)return Tiny.EmptyRectangle;this._boundsDirty&&(this.updateLocalBounds(),this.cachedSpriteDirty=!0,this._boundsDirty=!1);var i=this._localBounds,e=i.x,n=i.width+i.x,r=i.y,s=i.height+i.y,h=t||this.worldTransform,o=h.a,a=h.b,c=h.c,l=h.d,u=h.tx,p=h.ty,y=o*n+c*s+u,d=l*s+a*n+p,f=o*e+c*s+u,T=l*s+a*e+p,g=o*e+c*r+u,x=l*r+a*e+p,m=o*n+c*r+u,v=l*r+a*n+p,w=y,b=d,_=y,C=d;_=m<(_=g<(_=f<_?f:_)?g:_)?m:_,C=v<(C=x<(C=T<C?T:C)?x:C)?v:C,w=(w=(w=w<f?f:w)<g?g:w)<m?m:w,b=(b=(b=b<T?T:b)<x?x:b)<v?v:b,this._bounds.x=_,this._bounds.width=w-_,this._bounds.y=C,this._bounds.height=b-C,this._currentBounds=this._bounds}return this._currentBounds},Tiny.Graphics.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,tempPoint);for(var i=this.graphicsData,e=0;e<i.length;e++){var n=i[e];if(n.fill&&(n.shape&&n.shape.contains(tempPoint.x,tempPoint.y)))return!0}return!1},Tiny.Graphics.prototype.updateLocalBounds=function(){var t=1/0,i=-1/0,e=1/0,n=-1/0;if(this.graphicsData.length)for(var r,s,h,o,a,c=0;c<this.graphicsData.length;c++){var l=this.graphicsData[c],u=l.type,p=l.lineWidth,y=l.shape;if(u===Tiny.Primitives.RECT||u===Tiny.Primitives.RREC||u===Tiny.Primitives.RREC_LJOIN)s=y.x-p/2,h=y.y-p/2,t=s<t?s:t,i=i<s+(o=y.width+p)?s+o:i,e=h<e?h:e,n=n<h+(a=y.height+p)?h+a:n;else if(u===Tiny.Primitives.CIRC)s=y.x,h=y.y,t=s-(o=y.radius+p/2)<t?s-o:t,i=i<s+o?s+o:i,e=h-(a=y.radius+p/2)<e?h-a:e,n=n<h+a?h+a:n;else if(u===Tiny.Primitives.ELIP)s=y.x,h=y.y,t=s-(o=y.width+p/2)<t?s-o:t,i=i<s+o?s+o:i,e=h-(a=y.height+p/2)<e?h-a:e,n=n<h+a?h+a:n;else{r=y.points;for(var d=0;d<r.length;d++)r[d]instanceof Tiny.Point?(s=r[d].x,h=r[d].y):(s=r[d],h=r[d+1],d<r.length-1&&d++),t=s-p<t?s-p:t,i=i<s+p?s+p:i,e=h-p<e?h-p:e,n=n<h+p?h+p:n}}else n=e=i=t=0;var f=this.boundsPadding;this._localBounds.x=t-f,this._localBounds.width=i-t+2*f,this._localBounds.y=e-f,this._localBounds.height=n-e+2*f},Tiny.Graphics.prototype._generateCachedSprite=function(){var t,i,e=this.getLocalBounds();this._cachedSprite?this._cachedSprite.buffer.resize(e.width,e.height):(t=new Tiny.CanvasBuffer(e.width,e.height),i=Tiny.Texture.fromCanvas(t.canvas),this._cachedSprite=new Tiny.Sprite(i),this._cachedSprite.buffer=t,this._cachedSprite.worldTransform=this.worldTransform),this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this._cachedSprite.buffer.context.translate(-e.x,-e.y),this.worldAlpha=1,Tiny.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},Tiny.Graphics.prototype.updateCachedSpriteTexture=function(){var t=this._cachedSprite,i=t.texture,e=t.buffer.canvas;i.baseTexture.width=e.width,i.baseTexture.height=e.height,i.crop.width=i.frame.width=e.width,i.crop.height=i.frame.height=e.height,t._width=e.width,t._height=e.height},Tiny.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},Tiny.Graphics.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null,t instanceof Tiny.Polygon&&t.flatten();var i=new Tiny.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(i),i.type===Tiny.Primitives.POLY&&(i.shape.closed=this.filling,this.currentPath=i),this._boundsDirty=!0,this.cachedSpriteDirty=!0,i},Object.defineProperty(Tiny.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap=t,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this._boundsDirty=!0)}})},function(t,i){Tiny.CanvasBuffer=function(t,i){this.width=t,this.height=i,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.canvas.width=t,this.canvas.height=i},Tiny.CanvasBuffer.prototype.constructor=Tiny.CanvasBuffer,Tiny.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height)},Tiny.CanvasBuffer.prototype.resize=function(t,i){this.width=this.canvas.width=t,this.height=this.canvas.height=i}},function(t,i){Tiny.CanvasMaskManager=function(){},Tiny.CanvasMaskManager.prototype.constructor=Tiny.CanvasMaskManager,Tiny.CanvasMaskManager.prototype.pushMask=function(t,i){var e=i.context;e.save();var n=t.alpha,r=t.worldTransform,s=i.resolution;e.setTransform(r.a*s,r.b*s,r.c*s,r.d*s,r.tx*s,r.ty*s),Tiny.CanvasGraphics.renderGraphicsMask(t,e),e.clip(),t.worldAlpha=n},Tiny.CanvasMaskManager.prototype.popMask=function(t){t.context.restore()}},,,,,,,,function(t,i,e){e(19),e(25),e(26),e(27),e(30),e(31),e(28),e(29)}]);