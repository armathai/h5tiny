!function(){var t={776:function(){var t=function(){};Tiny.App=function(i){this.callbackContext=this,this.state=0,this.timeScale=1,this.width=0,this.height=0,this.systems=[],this.updatable=[],this.paused=!1,this.pauseDuration=0,this.inputView=document.body,Tiny.EventEmitter&&Tiny.EventEmitter.mixin(this),i=i||{},this.boot=i.boot||this.boot||t,this.preload=i.preload||this.preload||t,this.create=i.create||this.create||t,this.update=i.update||this.update||t,this.render=i.render||this.render||t,this._resize_cb=i.resize||t,this._destroy_cb=i.destroy||t;var e=this;setTimeout((function(){e._boot()}),0)},Tiny.App.prototype._boot=function(){for(var t=0;t<Tiny.systems.length;t++){var i=Tiny.systems[t],e=new i._class_(this);this.systems.push(e),e.update&&this.updatable.push(e),i.name&&(this[i.name]=e)}Tiny.RAF&&(this.raf=new Tiny.RAF(this)),this.boot.call(this.callbackContext);var n=this;setTimeout((function(){n.load?n._preload():n._create()}),0)},Tiny.App.prototype._preload=function(){this.preload.call(this.callbackContext),this.state=1,this.load.start(this._create)},Tiny.App.prototype._create=function(){this.emit("load"),this.create.call(this.callbackContext),this.raf&&this.raf.start(),this.state=2},Tiny.App.prototype.pause=function(){if(this.raf&&this.raf.reset(),!this.paused){for(var t=0;t<this.systems.length;t++)this.systems[t].pause&&this.systems[t].pause();this.paused=!0}},Tiny.App.prototype.resume=function(){if(this.raf&&this.raf.reset(),this.paused){for(var t=0;t<this.systems.length;t++)this.systems[t].resume&&this.systems[t].resume();this.paused=!1}},Tiny.App.prototype._update=function(t,i){if(this.paused)this.pauseDuration+=i;else{i*=this.timeScale,this.update.call(this.callbackContext,t,i),this.emit("update",i);for(var e=0;e<this.updatable.length;e++)this.updatable[e].update(i)}this.render(),this.emit("postrender")},Tiny.App.prototype.resize=function(t,i){this.width=t||this.width,this.height=i||this.height,this.state>0&&(this._resize_cb.call(this.callbackContext,this.width,this.height),this.emit("resize",t,i));var e=this;setTimeout((function(){e.input&&e.input.updateBounds()}),0)},Tiny.App.prototype.destroy=function(t){for(var i=0;i<this.systems.length;i++)this.systems[i].destroy&&this.systems[i].destroy(t);this.paused=!0,t&&this.load.clearCache(),this.raf&&this.raf.stop(),this._destroy_cb.call(this.callbackContext)}},132:function(t,i,e){e(623),window.Tiny={},e(776),e(377),e(100),e(606),e(68),e(378),e(717),e(758),e(746),e(162)},377:function(){Tiny.VERSION="2.1.11",Tiny.systems=[],Tiny.registerSystem=function(t,i){Tiny.systems.push({name:t,_class_:i})},Tiny.Primitives={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4,RREC_LJOIN:5},Tiny.rnd=function(t,i){return t+Math.floor(Math.random()*(i-t+1))},Tiny.color2rgb=function(t){return Tiny.hex2rgb(Tiny.style2hex(t))},Tiny.color2style=function(t){return t},Tiny.style2hex=function(t){return+t.replace("#","0x")},Tiny.hex2style=function(t){return"#"+("00000"+(0|t).toString(16)).substr(-6)},Tiny.hex2rgb=function(t){return[(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]},Tiny.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]}},465:function(){Tiny.Circle=function(t,i,e){t=t||0,i=i||0,e=e||0,this.x=t,this.y=i,this._diameter=e,this._radius=0,e>0&&(this._radius=.5*e),this.type=Tiny.Primitives.CIRC},Tiny.Circle.prototype={getBounds:function(){return new Tiny.Rectangle(this.x-this.radius,this.y-this.radius,this.diameter,this.diameter)},setTo:function(t,i,e){return this.x=t,this.y=i,this._diameter=e,this._radius=.5*e,this},copyFrom:function(t){return this.setTo(t.x,t.y,t.diameter)},copyTo:function(t){return t.x=this.x,t.y=this.y,t.diameter=this._diameter,t},distance:function(t,i){var e=Tiny.Math.distance(this.x,this.y,t.x,t.y);return i?Math.round(e):e},clone:function(t){return null==t?t=new Tiny.Circle(this.x,this.y,this.diameter):t.setTo(this.x,this.y,this.diameter),t},contains:function(t,i){return Tiny.Circle.contains(this,t,i)},offset:function(t,i){return this.x+=t,this.y+=i,this},offsetPoint:function(t){return this.offset(t.x,t.y)}},Tiny.Circle.prototype.constructor=Tiny.Circle,Object.defineProperty(Tiny.Circle.prototype,"diameter",{get:function(){return this._diameter},set:function(t){t>0&&(this._diameter=t,this._radius=.5*t)}}),Object.defineProperty(Tiny.Circle.prototype,"radius",{get:function(){return this._radius},set:function(t){t>0&&(this._radius=t,this._diameter=2*t)}}),Object.defineProperty(Tiny.Circle.prototype,"left",{get:function(){return this.x-this._radius},set:function(t){t>this.x?(this._radius=0,this._diameter=0):this.radius=this.x-t}}),Object.defineProperty(Tiny.Circle.prototype,"right",{get:function(){return this.x+this._radius},set:function(t){t<this.x?(this._radius=0,this._diameter=0):this.radius=t-this.x}}),Object.defineProperty(Tiny.Circle.prototype,"top",{get:function(){return this.y-this._radius},set:function(t){t>this.y?(this._radius=0,this._diameter=0):this.radius=this.y-t}}),Object.defineProperty(Tiny.Circle.prototype,"bottom",{get:function(){return this.y+this._radius},set:function(t){t<this.y?(this._radius=0,this._diameter=0):this.radius=t-this.y}}),Object.defineProperty(Tiny.Circle.prototype,"area",{get:function(){return this._radius>0?Math.PI*this._radius*this._radius:0}}),Object.defineProperty(Tiny.Circle.prototype,"empty",{get:function(){return 0===this._diameter},set:function(t){!0===t&&this.setTo(0,0,0)}}),Tiny.Circle.contains=function(t,i,e){return t.radius>0&&i>=t.left&&i<=t.right&&e>=t.top&&e<=t.bottom&&(t.x-i)*(t.x-i)+(t.y-e)*(t.y-e)<=t.radius*t.radius},Tiny.Circle.equals=function(t,i){return t.x==i.x&&t.y==i.y&&t.diameter==i.diameter},Tiny.Circle.intersects=function(t,i){return Tiny.Math.distance(t.x,t.y,i.x,i.y)<=t.radius+i.radius},Tiny.Circle.intersectsRectangle=function(t,i){var e=Math.abs(t.x-i.x-i.halfWidth);if(e>i.halfWidth+t.radius)return!1;var n=Math.abs(t.y-i.y-i.halfHeight);if(n>i.halfHeight+t.radius)return!1;if(e<=i.halfWidth||n<=i.halfHeight)return!0;var s=e-i.halfWidth,r=n-i.halfHeight;return s*s+r*r<=t.radius*t.radius}},100:function(){Tiny.Math={distance:function(t,i,e,n){var s=t-e,r=i-n;return Math.sqrt(s*s+r*r)}};var t=Math.PI/180,i=180/Math.PI;Tiny.Math.degToRad=function(i){return i*t},Tiny.Math.radToDeg=function(t){return t*i}},68:function(){Tiny.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.type=Tiny.MATRIX},Tiny.Matrix.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},Tiny.Matrix.prototype.toArray=function(t){this.array||(this.array=new Float32Array(9));var i=this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i},Tiny.Matrix.prototype.apply=function(t,i){i=i||new Tiny.Point;var e=t.x,n=t.y;return i.x=this.a*e+this.c*n+this.tx,i.y=this.b*e+this.d*n+this.ty,i},Tiny.Matrix.prototype.applyInverse=function(t,i){i=i||new Tiny.Point;var e=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return i.x=this.d*e*n+-this.c*e*s+(this.ty*this.c-this.tx*this.d)*e,i.y=this.a*e*s+-this.b*e*n+(-this.ty*this.a+this.tx*this.b)*e,i},Tiny.Matrix.prototype.translate=function(t,i){return this.tx+=t,this.ty+=i,this},Tiny.Matrix.prototype.scale=function(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this},Tiny.Matrix.prototype.rotate=function(t){var i=Math.cos(t),e=Math.sin(t),n=this.a,s=this.c,r=this.tx;return this.a=n*i-this.b*e,this.b=n*e+this.b*i,this.c=s*i-this.d*e,this.d=s*e+this.d*i,this.tx=r*i-this.ty*e,this.ty=r*e+this.ty*i,this},Tiny.Matrix.prototype.append=function(t){var i=this.a,e=this.b,n=this.c,s=this.d;return this.a=t.a*i+t.b*n,this.b=t.a*e+t.b*s,this.c=t.c*i+t.d*n,this.d=t.c*e+t.d*s,this.tx=t.tx*i+t.ty*n+this.tx,this.ty=t.tx*e+t.ty*s+this.ty,this},Tiny.Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Tiny.identityMatrix=new Tiny.Matrix},606:function(){Tiny.Point=function(t,i){this.x=t||0,this.y=i||0},Tiny.Point.prototype={set:function(t,i){return this.x=t||0,this.y=i||(0!==i?this.x:0),this}}},224:function(){Tiny.Polygon=function(){this.area=0,this._points=[],arguments.length>0&&this.setTo.apply(this,arguments),this.closed=!0,this.type=Tiny.Primitives.POLY},Tiny.Polygon.prototype={toNumberArray:function(t){void 0===t&&(t=[]);for(var i=0;i<this._points.length;i++)"number"==typeof this._points[i]?(t.push(this._points[i]),t.push(this._points[i+1]),i++):(t.push(this._points[i].x),t.push(this._points[i].y));return t},flatten:function(){return this._points=this.toNumberArray(),this},clone:function(t){var i=this._points.slice();return null==t?t=new Tiny.Polygon(i):t.setTo(i),t},contains:function(t,i){for(var e=this._points.length,n=!1,s=-1,r=e-1;++s<e;r=s){var h=this._points[s].x,o=this._points[s].y,a=this._points[r].x,c=this._points[r].y;(o<=i&&i<c||c<=i&&i<o)&&t<(a-h)*(i-o)/(c-o)+h&&(n=!n)}return n},setTo:function(t){if(this.area=0,this._points=[],arguments.length>0){Array.isArray(t)||(t=Array.prototype.slice.call(arguments));for(var i=Number.MAX_VALUE,e=0,n=t.length;e<n;e++){if("number"==typeof t[e]){var s=new Tiny.Point(t[e],t[e+1]);e++}else s=new Tiny.Point(t[e].x,t[e].y);this._points.push(s),s.y<i&&(i=s.y)}this.calculateArea(i)}return this},calculateArea:function(t){for(var i,e,n,s,r=0,h=this._points.length;r<h;r++)i=this._points[r],e=r===h-1?this._points[0]:this._points[r+1],n=(i.y-t+(e.y-t))/2,s=i.x-e.x,this.area+=n*s;return this.area}},Tiny.Polygon.prototype.constructor=Tiny.Polygon,Object.defineProperty(Tiny.Polygon.prototype,"points",{get:function(){return this._points},set:function(t){null!=t?this.setTo(t):this.setTo()}})},378:function(){Tiny.Rectangle=function(t,i,e,n){t=t||0,i=i||0,e=e||0,n=n||0,this.x=t,this.y=i,this.width=e,this.height=n,this.type=Tiny.Primitives.RECT},Tiny.Rectangle.prototype={setTo:function(t,i,e,n){return this.x=t,this.y=i,this.width=e,this.height=n,this},contains:function(t,i){return Tiny.Rectangle.contains(this,t,i)},intersects:function(t){return Tiny.Rectangle.intersects(this,t)}},Object.defineProperty(Tiny.Rectangle.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}}),Object.defineProperty(Tiny.Rectangle.prototype,"right",{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}}),Object.defineProperty(Tiny.Rectangle.prototype,"volume",{get:function(){return this.width*this.height}}),Tiny.Rectangle.prototype.constructor=Tiny.Rectangle,Tiny.Rectangle.contains=function(t,i,e){return!(t.width<=0||t.height<=0)&&(i>=t.x&&i<t.right&&e>=t.y&&e<t.bottom)},Tiny.Rectangle.containsPoint=function(t,i){return Tiny.Rectangle.contains(t,i.x,i.y)},Tiny.Rectangle.containsRect=function(t,i){return!(t.volume>i.volume)&&(t.x>=i.x&&t.y>=i.y&&t.right<i.right&&t.bottom<i.bottom)},Tiny.Rectangle.intersects=function(t,i){return!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)&&!(t.right<i.x||t.bottom<i.y||t.x>i.right||t.y>i.bottom)},Tiny.EmptyRectangle=new Tiny.Rectangle(0,0,0,0)},672:function(){Tiny.RoundedRectangle=function(t,i,e,n,s){this.x=t||0,this.y=i||0,this.width=e||0,this.height=n||0,this.radius=s||0,this.type=Tiny.Primitives.RREC},Tiny.RoundedRectangle.prototype.clone=function(){return new Tiny.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},Tiny.RoundedRectangle.prototype.contains=function(t,i){if(this.width<=0||this.height<=0)return!1;var e=this.x;if(t>=e&&t<=e+this.width){var n=this.y;if(i>=n&&i<=n+this.height)return!0}return!1},Tiny.RoundedRectangle.prototype.constructor=Tiny.RoundedRectangle},632:function(t,i,e){e(132),e(533),e(893),e(731),e(810),e(501),e(673),e(668),e(583)},717:function(){var t=2*Math.PI;Tiny.BaseObject2D=function(){this.position=new Tiny.Point(0,0),this.scale=new Tiny.Point(1,1),this.pivot=new Tiny.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.renderable=!1,this.parent=null,this.worldAlpha=1,this.worldTransform=new Tiny.Matrix,this._sr=0,this._cr=1,this._cacheAsBitmap=!1},Tiny.BaseObject2D.prototype.constructor=Tiny.BaseObject2D,Tiny.BaseObject2D.prototype.destroy=function(){this.parent&&this.parent.remove(this),this.parent=null,this.worldTransform=null,this.visible=!1,this.renderable=!1,this._destroyCachedSprite()},Object.defineProperty(Tiny.BaseObject2D.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}}),Object.defineProperty(Tiny.BaseObject2D.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(t?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=t)}}),Tiny.BaseObject2D.prototype.updateTransform=function(){if(this.parent){var i,e,n,s,r,h,o=this.parent.worldTransform,a=this.worldTransform;this.rotation%t?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),i=this._cr*this.scale.x,e=this._sr*this.scale.x,n=-this._sr*this.scale.y,s=this._cr*this.scale.y,r=this.position.x,h=this.position.y,(this.pivot.x||this.pivot.y)&&(r-=this.pivot.x*i+this.pivot.y*n,h-=this.pivot.x*e+this.pivot.y*s),a.a=i*o.a+e*o.c,a.b=i*o.b+e*o.d,a.c=n*o.a+s*o.c,a.d=n*o.b+s*o.d,a.tx=r*o.a+h*o.c+o.tx,a.ty=r*o.b+h*o.d+o.ty):(i=this.scale.x,s=this.scale.y,r=this.position.x-this.pivot.x*i,h=this.position.y-this.pivot.y*s,a.a=i*o.a,a.b=i*o.b,a.c=s*o.c,a.d=s*o.d,a.tx=r*o.a+h*o.c+o.tx,a.ty=r*o.b+h*o.d+o.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha}},Tiny.BaseObject2D.prototype.displayObjectUpdateTransform=Tiny.BaseObject2D.prototype.updateTransform,Tiny.BaseObject2D.prototype.getBounds=function(t){return Tiny.EmptyRectangle},Tiny.BaseObject2D.prototype.getLocalBounds=function(){return this.getBounds(Tiny.identityMatrix)},Tiny.BaseObject2D.prototype.generateTexture=function(t,i){var e=this.getLocalBounds(),n=new Tiny.RenderTexture(0|e.width,0|e.height,i,t);return Tiny.BaseObject2D._tempMatrix.tx=-e.x,Tiny.BaseObject2D._tempMatrix.ty=-e.y,n.render(this,Tiny.BaseObject2D._tempMatrix),n},Tiny.BaseObject2D.prototype.updateCache=function(){this._generateCachedSprite()},Tiny.BaseObject2D.prototype.toGlobal=function(t){return this.displayObjectUpdateTransform(),this.worldTransform.apply(t)},Tiny.BaseObject2D.prototype.toLocal=function(t,i){return i&&(t=i.toGlobal(t)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(t)},Tiny.BaseObject2D.prototype._renderCachedSprite=function(t){this._cachedSprite.worldAlpha=this.worldAlpha,Tiny.Sprite.prototype.render.call(this._cachedSprite,t)},Tiny.BaseObject2D.prototype._generateCachedSprite=function(){this._cachedSprite=null,this._cacheAsBitmap=!1;var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|t.width,0|t.height);else{var i=new Tiny.RenderTexture(0|t.width,0|t.height);this._cachedSprite=new Tiny.Sprite(i),this._cachedSprite.worldTransform=this.worldTransform}Tiny.BaseObject2D._tempMatrix.tx=-t.x,Tiny.BaseObject2D._tempMatrix.ty=-t.y,this._cachedSprite.texture.render(this,Tiny.BaseObject2D._tempMatrix,!0),this._cachedSprite.anchor.x=-t.x/t.width,this._cachedSprite.anchor.y=-t.y/t.height,this._cacheAsBitmap=!0},Tiny.BaseObject2D.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},Tiny.BaseObject2D.prototype.render=function(t){},Object.defineProperty(Tiny.BaseObject2D.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(Tiny.BaseObject2D.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}}),Tiny.BaseObject2D._tempMatrix=new Tiny.Matrix},357:function(){Tiny.GraphicsData=function(t,i,e,n,s,r,h){this.lineWidth=t,this.lineColor=i,this.lineAlpha=e,this._lineTint=i,this.fillColor=n,this.fillAlpha=s,this._fillTint=n,this.fill=r,this.shape=h,this.type=h.type},Tiny.GraphicsData.prototype.constructor=Tiny.GraphicsData,Tiny.GraphicsData.prototype.clone=function(){return new GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},Tiny.Graphics=function(){Tiny.Object2D.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint="#FFFFFF",this.blendMode="source-over",this.currentPath=null,this.isMask=!1,this.boundsPadding=0,this._localBounds=new Tiny.Rectangle(0,0,1,1),this._boundsDirty=!0,this.cachedSpriteDirty=!1},Tiny.Graphics.prototype=Object.create(Tiny.Object2D.prototype),Tiny.Graphics.prototype.constructor=Tiny.Graphics,Tiny.Graphics.prototype.lineStyle=function(t,i,e){return this.lineWidth=t||0,this.lineColor=i||"#000000",this.lineAlpha=void 0===e?1:e,this.currentPath&&(this.currentPath.shape.points.length?this.drawShape(new Tiny.Polygon(this.currentPath.shape.points.slice(-2))):(this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha)),this},Tiny.Graphics.prototype.moveTo=function(t,i){return this.drawShape(new Tiny.Polygon([t,i])),this},Tiny.Graphics.prototype.lineTo=function(t,i){return this.currentPath||this.moveTo(0,0),this.currentPath.shape.points.push(t,i),this._boundsDirty=!0,this.cachedSpriteDirty=!0,this},Tiny.Graphics.prototype.quadraticCurveTo=function(t,i,e,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var s,r,h=this.currentPath.shape.points;0===h.length&&this.moveTo(0,0);for(var o=h[h.length-2],a=h[h.length-1],c=0,l=1;l<=20;++l)s=o+(t-o)*(c=l/20),r=a+(i-a)*c,h.push(s+(t+(e-t)*c-s)*c,r+(i+(n-i)*c-r)*c);return this._boundsDirty=!0,this.cachedSpriteDirty=!0,this},Tiny.Graphics.prototype.bezierCurveTo=function(t,i,e,n,s,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var h,o,a,c,l,u=this.currentPath.shape.points,d=u[u.length-2],p=u[u.length-1],y=0,f=1;f<=20;++f)a=(o=(h=1-(y=f/20))*h)*h,l=(c=y*y)*y,u.push(a*d+3*o*y*t+3*h*c*e+l*s,a*p+3*o*y*i+3*h*c*n+l*r);return this._boundsDirty=!0,this.cachedSpriteDirty=!0,this},Tiny.Graphics.prototype.arcTo=function(t,i,e,n,s){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,i):this.moveTo(t,i);var r=this.currentPath.shape.points,h=r[r.length-2],o=r[r.length-1]-i,a=h-t,c=n-i,l=e-t,u=Math.abs(o*l-a*c);if(u<1e-8||0===s)r[r.length-2]===t&&r[r.length-1]===i||r.push(t,i);else{var d=o*o+a*a,p=c*c+l*l,y=o*c+a*l,f=s*Math.sqrt(d)/u,T=s*Math.sqrt(p)/u,g=f*y/d,m=T*y/p,v=f*l+T*a,x=f*c+T*o,w=a*(T+g),_=o*(T+g),b=l*(f+m),C=c*(f+m),S=Math.atan2(_-x,w-v),M=Math.atan2(C-x,b-v);this.arc(v+t,x+i,s,S,M,a*c>l*o)}return this._boundsDirty=!0,this.cachedSpriteDirty=!0,this},Tiny.Graphics.prototype.arc=function(t,i,e,n,s,r){if(n===s)return this;void 0===r&&(r=!1),!r&&s<=n?s+=2*Math.PI:r&&n<=s&&(n+=2*Math.PI);var h=r?-1*(n-s):s-n,o=40*Math.ceil(Math.abs(h)/(2*Math.PI));if(0===h)return this;var a=t+Math.cos(n)*e,c=i+Math.sin(n)*e;r&&this.filling?this.moveTo(t,i):this.moveTo(a,c);for(var l=this.currentPath.shape.points,u=h/(2*o),d=2*u,p=Math.cos(u),y=Math.sin(u),f=o-1,T=f%1/f,g=0;g<=f;g++){var m=u+n+d*(g+T*g),v=Math.cos(m),x=-Math.sin(m);l.push((p*v+y*x)*e+t,(p*-x+y*v)*e+i)}return this._boundsDirty=!0,this.cachedSpriteDirty=!0,this},Tiny.Graphics.prototype.beginFill=function(t,i){return this.filling=!0,this.fillColor=t||"#000000",this.fillAlpha=void 0===i?1:i,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},Tiny.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},Tiny.Graphics.prototype.drawRect=function(t,i,e,n){return this.drawShape(new Tiny.Rectangle(t,i,e,n)),this},Tiny.Graphics.prototype.drawRoundedRect=function(t,i,e,n,s){return s>0?this.drawShape(new Tiny.RoundedRectangle(t,i,e,n,s)):this.drawRect(t,i,e,n),this},Tiny.Graphics.prototype.drawCircle=function(t,i,e){return this.drawShape(new Tiny.Circle(t,i,e)),this},Tiny.Graphics.prototype.drawPolygon=function(t){var i=t;if(!Array.isArray(i)){i=new Array(arguments.length);for(var e=0;e<i.length;++e)i[e]=arguments[e]}return this.drawShape(new Tiny.Polygon(i)),this},Tiny.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this._boundsDirty=!0,this.cachedSpriteDirty=!0,this.graphicsData=[],this.updateLocalBounds(),this},Tiny.Graphics.prototype.destroy=function(t){Tiny.Object2D.prototype.destroy.call(this),this.clear()},Tiny.Graphics.prototype.generateTexture=function(t){t=t||1;var i=this.getBounds(),e=new Tiny.CanvasBuffer(i.width*t,i.height*t),n=Tiny.Texture.fromCanvas(e.canvas);return n.resolution=t,e.context.scale(t,t),e.context.translate(-i.x,-i.y),Tiny.CanvasGraphics.renderGraphics(this,e.context),n},Tiny.Graphics.prototype.render=function(t){if(!0!==this.isMask){if(this._prevTint!==this.tint&&(this._boundsDirty=!0,this._prevTint=this.tint),this._cacheAsBitmap)return this.cachedSpriteDirty&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this._boundsDirty=!1),this._cachedSprite.alpha=this.alpha,void Tiny.Sprite.prototype.render.call(this._cachedSprite,t);var i=t.context,e=this.worldTransform;this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,i.globalCompositeOperation=t.currentBlendMode),this._mask&&t.maskManager.pushMask(this._mask,t);var n=t.resolution;i.setTransform(e.a*n,e.b*n,e.c*n,e.d*n,e.tx*n,e.ty*n),Tiny.CanvasGraphics.renderGraphics(this,i);for(var s=0;s<this.children.length;s++)this.children[s].render(t);this._mask&&t.maskManager.popMask(t)}},Tiny.Graphics.prototype.getBounds=function(t){if(!this._currentBounds||this._boundsDirty){if(!this.renderable)return Tiny.EmptyRectangle;this._boundsDirty&&(this.updateLocalBounds(),this.cachedSpriteDirty=!0,this._boundsDirty=!1);var i=this._localBounds,e=i.x,n=i.width+i.x,s=i.y,r=i.height+i.y,h=t||this.worldTransform,o=h.a,a=h.b,c=h.c,l=h.d,u=h.tx,d=h.ty,p=o*n+c*r+u,y=l*r+a*n+d,f=o*e+c*r+u,T=l*r+a*e+d,g=o*e+c*s+u,m=l*s+a*e+d,v=o*n+c*s+u,x=l*s+a*n+d,w=p,_=y,b=p,C=y;b=v<(b=g<(b=f<b?f:b)?g:b)?v:b,C=x<(C=m<(C=T<C?T:C)?m:C)?x:C,w=v>(w=g>(w=f>w?f:w)?g:w)?v:w,_=x>(_=m>(_=T>_?T:_)?m:_)?x:_,this._bounds.x=b,this._bounds.width=w-b,this._bounds.y=C,this._bounds.height=_-C,this._currentBounds=this._bounds}return this._currentBounds},Tiny.Graphics.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,tempPoint);for(var i=this.graphicsData,e=0;e<i.length;e++){var n=i[e];if(n.fill&&(n.shape&&n.shape.contains(tempPoint.x,tempPoint.y)))return!0}return!1},Tiny.Graphics.prototype.updateLocalBounds=function(){var t=1/0,i=-1/0,e=1/0,n=-1/0;if(this.graphicsData.length)for(var s,r,h,o,a,c,l=0;l<this.graphicsData.length;l++){var u=this.graphicsData[l],d=u.type,p=u.lineWidth;if(s=u.shape,d===Tiny.Primitives.RECT||d===Tiny.Primitives.RREC||d===Tiny.Primitives.RREC_LJOIN)h=s.x-p/2,o=s.y-p/2,t=h<t?h:t,i=h+(a=s.width+p)>i?h+a:i,e=o<e?o:e,n=o+(c=s.height+p)>n?o+c:n;else if(d===Tiny.Primitives.CIRC)h=s.x,o=s.y,t=h-(a=s.radius+p/2)<t?h-a:t,i=h+a>i?h+a:i,e=o-(c=s.radius+p/2)<e?o-c:e,n=o+c>n?o+c:n;else if(d===Tiny.Primitives.ELIP)h=s.x,o=s.y,t=h-(a=s.width+p/2)<t?h-a:t,i=h+a>i?h+a:i,e=o-(c=s.height+p/2)<e?o-c:e,n=o+c>n?o+c:n;else{r=s.points;for(var y=0;y<r.length;y++)r[y]instanceof Tiny.Point?(h=r[y].x,o=r[y].y):(h=r[y],o=r[y+1],y<r.length-1&&y++),t=h-p<t?h-p:t,i=h+p>i?h+p:i,e=o-p<e?o-p:e,n=o+p>n?o+p:n}}else t=0,i=0,e=0,n=0;var f=this.boundsPadding;this._localBounds.x=t-f,this._localBounds.width=i-t+2*f,this._localBounds.y=e-f,this._localBounds.height=n-e+2*f},Tiny.Graphics.prototype._generateCachedSprite=function(){var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.buffer.resize(t.width,t.height);else{var i=new Tiny.CanvasBuffer(t.width,t.height),e=Tiny.Texture.fromCanvas(i.canvas);this._cachedSprite=new Tiny.Sprite(e),this._cachedSprite.buffer=i,this._cachedSprite.worldTransform=this.worldTransform}this._cachedSprite.anchor.x=-t.x/t.width,this._cachedSprite.anchor.y=-t.y/t.height,this._cachedSprite.buffer.context.translate(-t.x,-t.y),this.worldAlpha=1,Tiny.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},Tiny.Graphics.prototype.updateCachedSpriteTexture=function(){var t=this._cachedSprite,i=t.texture,e=t.buffer.canvas;i.width=e.width,i.height=e.height,i.crop.width=i.frame.width=e.width,i.crop.height=i.frame.height=e.height,t._width=e.width,t._height=e.height},Tiny.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},Tiny.Graphics.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null,t instanceof Tiny.Polygon&&t.flatten();var i=new Tiny.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(i),i.type===Tiny.Primitives.POLY&&(i.shape.closed=this.filling,this.currentPath=i),this._boundsDirty=!0,this.cachedSpriteDirty=!0,i},Object.defineProperty(Tiny.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap=t,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this._boundsDirty=!0)}})},758:function(){Tiny.Object2D=function(){Tiny.BaseObject2D.call(this),this.children=[],this._bounds=new Tiny.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null},Tiny.Object2D.prototype=Object.create(Tiny.BaseObject2D.prototype),Tiny.Object2D.prototype.constructor=Tiny.Object2D,Object.defineProperty(Tiny.Object2D.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var i=this.getLocalBounds().width;this.scale.x=0!==i?t/i:1,this._width=t}}),Object.defineProperty(Tiny.Object2D.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var i=this.getLocalBounds().height;this.scale.y=0!==i?t/i:1,this._height=t}}),Object.defineProperty(Tiny.Object2D.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.isMask=!0)}}),Tiny.Object2D.prototype.destroy=function(){for(var t=this.children.length;t--;)this.children[t].destroy();this.children=[],Tiny.BaseObject2D.prototype.destroy.call(this),this._bounds=null,this._currentBounds=null,this._mask=null,this.input&&this.input.system.remove(this)},Tiny.Object2D.prototype.add=function(t){return this.addChildAt(t,this.children.length)},Tiny.Object2D.prototype.addChildAt=function(t,i){if(i>=0&&i<=this.children.length)return t.parent&&t.parent.remove(t),t.parent=this,this.game&&(t.game=this.game),this.children.splice(i,0,t),t;throw new Error(t+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length)},Tiny.Object2D.prototype.swapChildren=function(t,i){if(t!==i){var e=this.getChildIndex(t),n=this.getChildIndex(i);if(e<0||n<0)throw new Error("swapChildren: Both the supplied Objects must be a child of the caller.");this.children[e]=i,this.children[n]=t}},Tiny.Object2D.prototype.getChildIndex=function(t){var i=this.children.indexOf(t);if(-1===i)throw new Error("The supplied Object must be a child of the caller");return i},Tiny.Object2D.prototype.setChildIndex=function(t,i){if(i<0||i>=this.children.length)throw new Error("The supplied index is out of bounds");var e=this.getChildIndex(t);this.children.splice(e,1),this.children.splice(i,0,t)},Tiny.Object2D.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied Object must be a child of the caller");return this.children[t]},Tiny.Object2D.prototype.remove=function(t){var i=this.children.indexOf(t);if(-1!==i)return this.removeChildAt(i)},Tiny.Object2D.prototype.removeChildAt=function(t){var i=this.getChildAt(t);return i.parent=void 0,this.children.splice(t,1),i},Tiny.Object2D.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var t=0,i=this.children.length;t<i;t++)this.children[t].updateTransform()},Tiny.Object2D.prototype.displayObjectContainerUpdateTransform=Tiny.Object2D.prototype.updateTransform,Tiny.Object2D.prototype.getBounds=function(){if(0===this.children.length)return Tiny.EmptyRectangle;if(this._cachedSprite)return this._cachedSprite.getBounds();for(var t,i,e,n=1/0,s=1/0,r=-1/0,h=-1/0,o=!1,a=0,c=this.children.length;a<c;a++){this.children[a].visible&&(o=!0,n=n<(t=this.children[a].getBounds()).x?n:t.x,s=s<t.y?s:t.y,r=r>(i=t.width+t.x)?r:i,h=h>(e=t.height+t.y)?h:e)}if(!o)return Tiny.EmptyRectangle;var l=this._bounds;return l.x=n,l.y=s,l.width=r-n,l.height=h-s,l},Tiny.Object2D.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=Tiny.identityMatrix;for(var i=0,e=this.children.length;i<e;i++)this.children[i].updateTransform();var n=this.getBounds();return this.worldTransform=t,n},Tiny.Object2D.prototype.render=function(t){if(!1!==this.visible&&0!==this.alpha)if(this._cacheAsBitmap)this._renderCachedSprite(t);else{this._mask&&t.maskManager.pushMask(this._mask,t);for(var i=0;i<this.children.length;i++)this.children[i].render(t);this._mask&&t.maskManager.popMask(t)}}},746:function(){Tiny.Scene=function(t){Tiny.Object2D.call(this),this.worldTransform=new Tiny.Matrix,this.game=t},Tiny.Scene.prototype=Object.create(Tiny.Object2D.prototype),Tiny.Scene.prototype.constructor=Tiny.Scene,Tiny.Scene.prototype.updateTransform=function(){this.worldAlpha=1;for(var t=0;t<this.children.length;t++)this.children[t].updateTransform()}},668:function(){Tiny.Sprite=function(t,i){Tiny.Object2D.call(this),this.anchor=new Tiny.Point,this.setTexture(t,i,!1),this._width=0,this._height=0,this._frame=0,this.tint="#FFFFFF",this.blendMode="source-over",this.texture.hasLoaded&&this.onTextureUpdate(),this.renderable=!0},Tiny.Sprite.prototype=Object.create(Tiny.Object2D.prototype),Tiny.Sprite.prototype.constructor=Tiny.Sprite,Object.defineProperty(Tiny.Sprite.prototype,"frameName",{get:function(){return this.texture.frame.name},set:function(t){this.texture.frame.name&&this.setTexture(Tiny.Cache.texture[this.texture.key+"."+t])}}),Object.defineProperty(Tiny.Sprite.prototype,"frame",{get:function(){return this._frame},set:function(t){this.texture.lastFrame&&(this._frame=t,this._frame>this.texture.lastFrame&&(this._frame=0),this.setTexture(Tiny.Cache.texture[this.texture.key+"."+this._frame]))}}),Object.defineProperty(Tiny.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(Tiny.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),Tiny.Sprite.prototype.setTexture=function(t,i,e){if("string"==typeof t){var n=t;null!=i&&(n=n+"."+i),(t=Tiny.Cache.texture[n])||(t=new Tiny.Texture(n))}return this.texture!==t&&(this.texture=t,this.cachedTint="#FFFFFF",!0===e&&this.onTextureUpdate(),!0)},Tiny.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},Tiny.Sprite.prototype.animate=function(t,i){this.texture.lastFrame&&null!=this.texture.frame.index&&(i=i||this.texture.frame.duration||100,this.animation?(this.animation.delay=i,this.animation.start()):(this.animation=t.loop(i,function(){this.frame+=1,this.animation.delay=i||this.texture.frame.duration||100}.bind(this)),this.animation.start()))},Tiny.Sprite.prototype.getBounds=function(t){var i=this.texture.frame.width/this.texture.resolution,e=this.texture.frame.height/this.texture.resolution,n=i*(1-this.anchor.x),s=i*-this.anchor.x,r=e*(1-this.anchor.y),h=e*-this.anchor.y,o=t||this.worldTransform,a=o.a,c=o.b,l=o.c,u=o.d,d=o.tx,p=o.ty,y=-1/0,f=-1/0,T=1/0,g=1/0;if(0===c&&0===l)a<0?(T=a*n+d,y=a*s+d):(T=a*s+d,y=a*n+d),u<0?(g=u*r+p,f=u*h+p):(g=u*h+p,f=u*r+p);else{var m=a*s+l*h+d,v=u*h+c*s+p,x=a*n+l*h+d,w=u*h+c*n+p,_=a*n+l*r+d,b=u*r+c*n+p,C=a*s+l*r+d,S=u*r+c*s+p;T=C<(T=_<(T=x<(T=m<T?m:T)?x:T)?_:T)?C:T,g=S<(g=b<(g=w<(g=v<g?v:g)?w:g)?b:g)?S:g,y=C>(y=_>(y=x>(y=m>y?m:y)?x:y)?_:y)?C:y,f=S>(f=b>(f=w>(f=v>f?v:f)?w:f)?b:f)?S:f}var M=this._bounds;return M.x=T,M.width=y-T,M.y=g,M.height=f-g,this._currentBounds=M,M},Tiny.Sprite.prototype.render=function(t){if(!(!1===this.visible||0===this.alpha||!1===this.renderable||this.texture.crop.width<=0||this.texture.crop.height<=0)){if(this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,t.context.globalCompositeOperation=t.currentBlendMode),this._mask&&t.maskManager.pushMask(this._mask,t),this.texture.valid){var i=this.texture.resolution/t.resolution;t.context.globalAlpha=this.worldAlpha;var e=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,n=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;t.roundPixels?(t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution|0,this.worldTransform.ty*t.resolution|0),e|=0,n|=0):t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution,this.worldTransform.ty*t.resolution),"#FFFFFF"!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=Tiny.CanvasTinter.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,e/i,n/i,this.texture.crop.width/i,this.texture.crop.height/i)):t.context.drawImage(this.texture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,e/i,n/i,this.texture.crop.width/i,this.texture.crop.height/i)}for(var s=0;s<this.children.length;s++)this.children[s].render(t);this._mask&&t.maskManager.popMask(t)}}},583:function(){Tiny.Text=function(t,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=1,Tiny.Sprite.call(this,Tiny.Texture.fromCanvas(this.canvas)),this.setText(t),this.setStyle(i)},Tiny.Text.prototype=Object.create(Tiny.Sprite.prototype),Tiny.Text.prototype.constructor=Tiny.Text,Object.defineProperty(Tiny.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(Tiny.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),Tiny.Text.prototype.setStyle=function(t){(t=t||{}).font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.lineSpacing=t.lineSpacing||0,t.wordWrapWidth=void 0!==t.wordWrapWidth?t.wordWrapWidth:100,t.dropShadow=t.dropShadow||!1,t.dropShadowAngle=void 0!==t.dropShadowAngle?t.dropShadowAngle:Math.PI/6,t.dropShadowDistance=void 0!==t.dropShadowDistance?t.dropShadowDistance:4,t.dropShadowColor=t.dropShadowColor||"black",this.style=t,this.dirty=!0},Tiny.Text.prototype.setText=function(t){this.text=t.toString()||" ",this.dirty=!0},Tiny.Text.prototype.updateText=function(){this.texture.resolution=this.resolution,this.context.font=this.style.font;var t=this.text;this.style.wordWrap&&(t=this.wordWrap(this.text));for(var i=t.split(/(?:\r\n|\r|\n)/),e=[],n=0,s=this.determineFontProperties(this.style.font),r=0;r<i.length;r++){var h=this.context.measureText(i[r]).width;e[r]=h,n=Math.max(n,h)}var o=n+this.style.strokeThickness;this.style.dropShadow&&(o+=this.style.dropShadowDistance),this.canvas.width=(o+this.context.lineWidth)*this.resolution;var a,c,l=s.fontSize+this.style.strokeThickness+this.style.lineSpacing,u=l*i.length;if(this.style.dropShadow&&(u+=this.style.dropShadowDistance),this.canvas.height=(u-this.style.lineSpacing)*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="alphabetic",this.context.miterLimit=2,this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var d=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,p=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(r=0;r<i.length;r++)a=this.style.strokeThickness/2,c=this.style.strokeThickness/2+r*l+s.ascent,"right"===this.style.align?a+=n-e[r]:"center"===this.style.align&&(a+=(n-e[r])/2),this.style.fill&&this.context.fillText(i[r],a+d,c+p)}for(this.context.fillStyle=this.style.fill,r=0;r<i.length;r++)a=this.style.strokeThickness/2,c=this.style.strokeThickness/2+r*l+s.ascent,"right"===this.style.align?a+=n-e[r]:"center"===this.style.align&&(a+=(n-e[r])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(i[r],a,c),this.style.fill&&this.context.fillText(i[r],a,c);this.updateTexture()},Tiny.Text.prototype.updateTexture=function(){this.texture.width=this.canvas.width,this.texture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height},Tiny.Text.prototype.render=function(t){(this.dirty||this.resolution!==t.resolution)&&(this.resolution=t.resolution,this.updateText(),this.dirty=!1),Tiny.Sprite.prototype.render.call(this,t)},Tiny.Text.prototype.determineFontProperties=function(t){var i=Tiny.Text.fontPropertiesCache[t];if(!i){i={};var e=Tiny.Text.fontPropertiesCanvas,n=Tiny.Text.fontPropertiesContext;n.font=t;var s=Math.ceil(n.measureText("|MÉq").width),r=Math.ceil(n.measureText("|MÉq").width),h=2*r;r=1.4*r|0,e.width=s,e.height=h,n.fillStyle="#f00",n.fillRect(0,0,s,h),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText("|MÉq",0,r);var o,a,c=n.getImageData(0,0,s,h).data,l=c.length,u=4*s,d=0,p=!1;for(o=0;o<r;o++){for(a=0;a<u;a+=4)if(255!==c[d+a]){p=!0;break}if(p)break;d+=u}for(i.ascent=r-o,d=l-u,p=!1,o=h;o>r;o--){for(a=0;a<u;a+=4)if(255!==c[d+a]){p=!0;break}if(p)break;d-=u}i.descent=o-r,i.descent+=6,i.fontSize=i.ascent+i.descent,Tiny.Text.fontPropertiesCache[t]=i}return i},Tiny.Text.prototype.wordWrap=function(t){for(var i="",e=t.split("\n"),n=0;n<e.length;n++){for(var s=this.style.wordWrapWidth,r=e[n].split(" "),h=0;h<r.length;h++){var o=this.context.measureText(r[h]).width,a=o+this.context.measureText(" ").width;0===h||a>s?(h>0&&(i+="\n"),i+=r[h],s=this.style.wordWrapWidth-o):(s-=a,i+=" "+r[h])}n<e.length-1&&(i+="\n")}return i},Tiny.Text.prototype.getBounds=function(t){return this.dirty&&(this.updateText(),this.dirty=!1),Tiny.Sprite.prototype.getBounds.call(this,t)},Tiny.Text.prototype.destroy=function(){this.context=null,this.canvas=null,this.texture.destroy(),Tiny.Sprite.prototype.destroy.call(this)},Tiny.Text.fontPropertiesCache={},Tiny.Text.fontPropertiesCanvas=document.createElement("canvas"),Tiny.Text.fontPropertiesContext=Tiny.Text.fontPropertiesCanvas.getContext("2d")},45:function(){Tiny.CanvasMaskManager=function(){},Tiny.CanvasMaskManager.prototype.constructor=Tiny.CanvasMaskManager,Tiny.CanvasMaskManager.prototype.pushMask=function(t,i){var e=i.context;e.save();var n=t.alpha,s=t.worldTransform,r=i.resolution;e.setTransform(s.a*r,s.b*r,s.c*r,s.d*r,s.tx*r,s.ty*r),Tiny.CanvasGraphics.renderGraphicsMask(t,e),e.clip(),t.worldAlpha=n},Tiny.CanvasMaskManager.prototype.popMask=function(t){t.context.restore()}},162:function(){Tiny.CanvasRenderer=function(t,i,e){e=e||{},this.resolution=null!=e.resolution?e.resolution:1,this.clearBeforeRender=null==e.clearBeforeRender||e.clearBeforeRender,this.transparent=null!=e.transparent&&e.transparent,this.autoResize=e.autoResize||!1,Tiny.defaultRenderer||(Tiny.defaultRenderer=this);var n=this.domElement=e.domElement||document.createElement("canvas");this.context=n.getContext("2d",{alpha:this.transparent}),this.resize(t||800,i||600),this.setClearColor("#ffffff"),Tiny.CanvasMaskManager&&(this.maskManager=new Tiny.CanvasMaskManager),this.renderSession={context:this.context,maskManager:this.maskManager,smoothProperty:null,roundPixels:!1},"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="oImageSmoothingEnabled":"msImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="msImageSmoothingEnabled")},Tiny.CanvasRenderer.prototype.constructor=Tiny.CanvasRenderer,Tiny.CanvasRenderer.prototype.setClearColor=function(t){this.clearColor=t},Tiny.CanvasRenderer.prototype.render=function(t){t.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode="source-over",this.context.globalCompositeOperation="source-over",navigator.isCocoonJS&&this.domElement.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width*this.resolution,this.height*this.resolution):(this.context.fillStyle=this.clearColor,this.context.fillRect(0,0,this.width*this.resolution,this.height*this.resolution))),this.renderObject(t)},Tiny.CanvasRenderer.prototype.destroy=function(t){void 0===t&&(t=!0),t&&this.domElement.parentNode&&this.domElement.parentNode.removeChild(this.domElement),this.domElement=null,this.context=null,this.maskManager=null,this.renderSession=null,Tiny.defaultRenderer===this&&(Tiny.defaultRenderer=null)},Tiny.CanvasRenderer.prototype.resize=function(t,i){this.width=t,this.height=i;var e=this.domElement;e.width=Math.floor(this.width*this.resolution),e.height=Math.floor(this.height*this.resolution),this.autoResize&&(e.style.width=t+"px",e.style.height=i+"px")},Tiny.CanvasRenderer.prototype.setPixelRatio=function(t){this.resolution=t;var i=this.domElement;i.width=Math.floor(this.width*this.resolution),i.height=Math.floor(this.height*this.resolution)},Tiny.CanvasRenderer.prototype.renderObject=function(t,i){this.renderSession.context=i||this.context,this.renderSession.resolution=this.resolution,t.render(this.renderSession)}},959:function(){var t,i,e;Tiny.CanvasTinter=function(){},Tiny.CanvasTinter.getTintedTexture=function(t,i){var e=t.texture;if(e._tintCache||(e._tintCache={}),e._tintCache[i])return e._tintCache[i];var n=Tiny.CanvasTinter.canvas||document.createElement("canvas");(Tiny.CanvasTinter.tintMethod(e,i,n),Tiny.CanvasTinter.convertTintToImage)?(new Image).src=n.toDataURL():Tiny.CanvasTinter.canvas=null;return Tiny.CanvasTinter.cacheTint&&(e._tintCache[i]=n),n},Tiny.CanvasTinter.tintWithMultiply=function(t,i,e){var n=e.getContext("2d"),s=t.crop;e.width=s.width,e.height=s.height,n.fillStyle=Tiny.color2style(i),n.fillRect(0,0,s.width,s.height),n.globalCompositeOperation="multiply",n.drawImage(t.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height)},Tiny.CanvasTinter.tintWithPerPixel=function(t,i,e){var n=e.getContext("2d"),s=t.crop;e.width=s.width,e.height=s.height,n.globalCompositeOperation="copy",n.drawImage(t.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height);for(var r=Tiny.color2rgb(i),h=r[0],o=r[1],a=r[2],c=n.getImageData(0,0,s.width,s.height),l=c.data,u=0;u<l.length;u+=4)if(l[u+0]*=h,l[u+1]*=o,l[u+2]*=a,!Tiny.canHandleAlpha){var d=l[u+3];l[u+0]/=255/d,l[u+1]/=255/d,l[u+2]/=255/d}n.putImageData(c,0,0)},Tiny.CanvasTinter.convertTintToImage=!1,Tiny.CanvasTinter.cacheTint=!1,Tiny.canHandleAlpha=function(){var t=new Tiny.CanvasBuffer(2,1,{willReadFrequently:!0});t.context.fillStyle="rgba(10, 20, 30, 0.5)",t.context.fillRect(0,0,1,1);var i=t.context.getImageData(0,0,1,1);t.context.putImageData(i,1,0);var e=t.context.getImageData(1,0,1,1);return e.data[0]===i.data[0]&&e.data[1]===i.data[1]&&e.data[2]===i.data[2]&&e.data[3]===i.data[3]}(),Tiny.supportNewBlendModes=(t="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",i="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(e=new Image).onload=function(){var n=new Image;n.onload=function(){var t=document.createElement("canvas");t.width=6,t.height=1;var i=t.getContext("2d",{willReadFrequently:!0});if(i.globalCompositeOperation="multiply",i.drawImage(e,0,0),i.drawImage(n,2,0),!i.getImageData(2,0,1,1))return!1;var s=i.getImageData(2,0,1,1).data;Tiny.supportNewBlendModes=255===s[0]&&0===s[1]&&0===s[2],Tiny.CanvasTinter.tintMethod=Tiny.CanvasTinter.tintWithMultiply},n.src=t+"/wCKxvRF"+i},e.src=t+"AP804Oa6"+i,!1),Tiny.CanvasTinter.tintMethod=Tiny.supportNewBlendModes?Tiny.CanvasTinter.tintWithMultiply:Tiny.CanvasTinter.tintWithPerPixel},935:function(){Tiny.CanvasGraphics=function(){},Tiny.CanvasGraphics.renderGraphics=function(t,i){var e=t.worldAlpha;t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1);for(var n=0;n<t.graphicsData.length;n++){var s=t.graphicsData[n],r=s.shape,h=s._fillTint,o=s._lineTint;if(i.lineWidth=s.lineWidth,s.type===Tiny.Primitives.POLY){i.beginPath();var a=r.points;i.moveTo(a[0],a[1]);for(var c=1;c<a.length/2;c++)i.lineTo(a[2*c],a[2*c+1]);r.closed&&i.lineTo(a[0],a[1]),a[0]===a[a.length-2]&&a[1]===a[a.length-1]&&i.closePath(),s.fill&&(i.globalAlpha=s.fillAlpha*e,i.fillStyle=Tiny.color2style(h),i.fill()),s.lineWidth&&(i.globalAlpha=s.lineAlpha*e,i.strokeStyle=Tiny.color2style(o),i.stroke())}else if(s.type===Tiny.Primitives.RECT)(s.fillColor||0===s.fillColor)&&(i.globalAlpha=s.fillAlpha*e,i.fillStyle=Tiny.color2style(h),i.fillRect(r.x,r.y,r.width,r.height)),s.lineWidth&&(i.globalAlpha=s.lineAlpha*e,i.strokeStyle=Tiny.color2style(o),i.strokeRect(r.x,r.y,r.width,r.height));else if(s.type===Tiny.Primitives.CIRC)i.beginPath(),i.arc(r.x,r.y,r.radius,0,2*Math.PI),i.closePath(),s.fill&&(i.globalAlpha=s.fillAlpha*e,i.fillStyle=Tiny.color2style(h),i.fill()),s.lineWidth&&(i.globalAlpha=s.lineAlpha*e,i.strokeStyle=Tiny.color2style(o),i.stroke());else if(s.type===Tiny.Primitives.ELIP){var l=2*r.width,u=2*r.height,d=r.x-l/2,p=r.y-u/2;i.beginPath();var y=.5522848,f=l/2*y,T=u/2*y,g=d+l,m=p+u,v=d+l/2,x=p+u/2;i.moveTo(d,x),i.bezierCurveTo(d,x-T,v-f,p,v,p),i.bezierCurveTo(v+f,p,g,x-T,g,x),i.bezierCurveTo(g,x+T,v+f,m,v,m),i.bezierCurveTo(v-f,m,d,x+T,d,x),i.closePath(),s.fill&&(i.globalAlpha=s.fillAlpha*e,i.fillStyle=Tiny.color2style(h),i.fill()),s.lineWidth&&(i.globalAlpha=s.lineAlpha*e,i.strokeStyle=Tiny.color2style(o),i.stroke())}else if(s.type===Tiny.Primitives.RREC){var w=r.x,_=r.y,b=r.width,C=r.height,S=r.radius,M=Math.min(b,C)/2|0;S=S>M?M:S,i.beginPath(),i.moveTo(w,_+S),i.lineTo(w,_+C-S),i.quadraticCurveTo(w,_+C,w+S,_+C),i.lineTo(w+b-S,_+C),i.quadraticCurveTo(w+b,_+C,w+b,_+C-S),i.lineTo(w+b,_+S),i.quadraticCurveTo(w+b,_,w+b-S,_),i.lineTo(w+S,_),i.quadraticCurveTo(w,_,w,_+S),i.closePath(),(s.fillColor||0===s.fillColor)&&(i.globalAlpha=s.fillAlpha*e,i.fillStyle=Tiny.color2style(h),i.fill()),s.lineWidth&&(i.globalAlpha=s.lineAlpha*e,i.strokeStyle=Tiny.color2style(o),i.stroke())}}},Tiny.CanvasGraphics.renderGraphicsMask=function(t,i){var e=t.graphicsData.length;if(0!==e){i.beginPath();for(var n=0;n<e;n++){var s=t.graphicsData[n],r=s.shape;if(s.type===Tiny.Primitives.POLY){var h=r.points;i.moveTo(h[0],h[1]);for(var o=1;o<h.length/2;o++)i.lineTo(h[2*o],h[2*o+1]);h[0]===h[h.length-2]&&h[1]===h[h.length-1]&&i.closePath()}else if(s.type===Tiny.Primitives.RECT)i.rect(r.x,r.y,r.width,r.height),i.closePath();else if(s.type===Tiny.Primitives.CIRC)i.arc(r.x,r.y,r.radius,0,2*Math.PI),i.closePath();else if(s.type===Tiny.Primitives.ELIP){var a=2*r.width,c=2*r.height,l=r.x-a/2,u=r.y-c/2,d=.5522848,p=a/2*d,y=c/2*d,f=l+a,T=u+c,g=l+a/2,m=u+c/2;i.moveTo(l,m),i.bezierCurveTo(l,m-y,g-p,u,g,u),i.bezierCurveTo(g+p,u,f,m-y,f,m),i.bezierCurveTo(f,m+y,g+p,T,g,T),i.bezierCurveTo(g-p,T,l,m+y,l,m),i.closePath()}else if(s.type===Tiny.Primitives.RREC||s.type===Tiny.Primitives.RREC_LJOIN){var v=r.x,x=r.y,w=r.width,_=r.height,b=r.radius,C=Math.min(w,_)/2|0;b=b>C?C:b,i.moveTo(v,x+b),i.lineTo(v,x+_-b),i.quadraticCurveTo(v,x+_,v+b,x+_),i.lineTo(v+w-b,x+_),i.quadraticCurveTo(v+w,x+_,v+w,x+_-b),i.lineTo(v+w,x+b),i.quadraticCurveTo(v+w,x,v+w-b,x),i.lineTo(v+b,x),i.quadraticCurveTo(v,x,v,x+b),i.closePath()}}}},Tiny.CanvasGraphics.updateGraphicsTint=function(t){if(16777215!==t.tint)for(var i=(t.tint>>16&255)/255,e=(t.tint>>8&255)/255,n=(255&t.tint)/255,s=0;s<t.graphicsData.length;s++){var r=t.graphicsData[s],h=0|r.fillColor,o=0|r.lineColor;r._fillTint=((h>>16&255)/255*i*255<<16)+((h>>8&255)/255*e*255<<8)+(255&h)/255*n*255,r._lineTint=((o>>16&255)/255*i*255<<16)+((o>>8&255)/255*e*255<<8)+(255&o)/255*n*255}}},731:function(){var t;Tiny.Input=function(t){this.game=t;var i=this.domElement=t.inputView;this.bounds={x:0,y:0,width:0,height:0},this.candidates=[],this.list=[],this.lastMove=null,this.isDown=!1,this.downHandler=this.downHandler.bind(this),this.moveHandler=this.moveHandler.bind(this),this.upHandler=this.upHandler.bind(this),i.addEventListener("touchstart",this.downHandler),i.addEventListener("touchmove",this.moveHandler),i.addEventListener("touchend",this.upHandler),i.addEventListener("touchcancel",this.upHandler),i.addEventListener("mousedown",this.downHandler),i.addEventListener("mousemove",this.moveHandler),i.addEventListener("mouseup",this.upHandler),Tiny.EventEmitter.mixin(this);for(var e=0;e<Tiny.Input.systems.length;e++)Tiny.Input.systems[e].init.call(this);this.updateBounds()},Tiny.Input.prototype={add:function(t,i){t.inputEnabled=!0,(i=i||{}).system=this,t.input=i,Tiny.EventEmitter.mixin(t.input),this.list.push(t)},remove:function(t){var i=this.list.indexOf(t);if(i>-1){var e=this.list[i];return e.input=null,e.inputEnabled=!1,this.list.splice(i,1),e}},inputHandler:function(t,i){var e=this.getCoords(i);if(null!==e){if("move"!=t){this.candidates.length=0;for(var n=0;n<Tiny.Input.systems.length;n++)Tiny.Input.systems[n].preHandle.call(this,e.x,e.y);for(var s,r=0;r<this.list.length;r++)(s=this.list[r]).inputEnabled&&s.parent&&(s.input.checkBounds?s.input.checkBounds.call(this,s,e.x,e.y):Tiny.Input.checkBounds.call(this,s,e.x,e.y))&&this.candidates.push(s);for(n=this.candidates.length-1;n>=0;n--){if((s=this.candidates[n]).input["last_"+t]={x:e.x,y:e.y},s.input.emit(t,{x:e.x,y:e.y}),"up"==t){var h=s.input.last_down;h&&Tiny.Math.distance(h.x,h.y,e.x,e.y)<30&&s.input.emit("click",{x:e.x,y:e.y})}if(!s.input.transparent)break}}this.emit(t,{x:e.x,y:e.y})}},moveHandler:function(t){this.lastMove=t,this.inputHandler("move",t)},upHandler:function(t){this.isDown=!1,this.inputHandler("up",this.lastMove)},downHandler:function(t){this.isDown=!0,this.lastMove=t,this.inputHandler("down",t)},clickHandler:function(t){this.inputHandler("click",t)},getCoords:function(i){var e=null;return"undefined"!=typeof TouchEvent&&i instanceof TouchEvent?(t=!0,i.touches.length>0?e={x:i.touches[0].clientX,y:i.touches[0].clientY}:i.clientX&&i.clientY&&(e={x:i.clientX,y:i.clientY})):e={x:i.clientX,y:i.clientY},t&&i instanceof MouseEvent||null===e?null:e={x:e.x-this.bounds.x,y:e.y-this.bounds.y}},updateBounds:function(){bounds=this.bounds;var t=this.domElement.getBoundingClientRect();bounds.x=t.left,bounds.y=t.top,bounds.width=t.width,bounds.height=t.height},destroy:function(){var t=this.domElement;t.removeEventListener("touchstart",this.downHandler),t.removeEventListener("touchmove",this.moveHandler),t.removeEventListener("touchend",this.upHandler),t.removeEventListener("touchcancel",this.upHandler),t.removeEventListener("mousedown",this.downHandler),t.removeEventListener("mousemove",this.moveHandler),t.removeEventListener("mouseup",this.upHandler)}},Tiny.Input.checkBounds=function(t,i,e){if(t.worldVisible&&t.getBounds().contains(i,e))return!0},Tiny.Input.systems=[],Tiny.registerSystem("input",Tiny.Input)},893:function(){Tiny.Cache={image:{},texture:{}},Tiny.Loader=function(t){t.cache=Tiny.Cache,this.game=t,this.list=[]},Tiny.Loader.prototype={clearCache:function(){for(var t in Tiny.Cache.texture)Tiny.Cache.texture[t].destroy();for(var t in Tiny.Cache)Tiny.Cache[t]={}},all:function(t){this.list=this.list.concat(t)},image:function(t,i){this.list.push({src:i,key:t,type:"image"})},spritesheet:function(t,i,e,n,s,r){var h={src:i,key:t,type:"spritesheet"};"number"==typeof e?(h.width=e,h.height=n,h.total=s,h.duration=r):e.length>0&&(h.data=e),this.list.push(h)},atlas:function(t,i,e){this.list.push({src:i,key:t,data:e,type:"atlas"})},start:function(t){var i=this.game,e=this.list;function n(){var t=e.shift(),i=Tiny.Loader[t.type];i?i(t,s):(console.warn("Cannot find loader for "+t.type),s())}function s(s,r){0!=e.length?n():t.call(i)}0!=e.length?n():t.call(i)}},Tiny.Loader.atlas=function(t,i){var e=t.key;Tiny.Loader.image(t,(function(t,n){for(var s=0;s<t.data.length;s++){var r=e+"."+t.data[s].name,h=new Tiny.Texture(n,t.data[s]);h.key=e,Tiny.Cache.texture[r]=h}i()}))},Tiny.Loader.spritesheet=function(t,i){var e=t.key;Tiny.Loader.image(t,(function(t,n){var s,r,h;if(t.data){var o=t.data;s=o.length-1;for(var a=0;a<=s;a++)r=e+"."+a,(h=new Tiny.Texture(n,{index:a,x:Math.floor(o[a].x),y:Math.floor(o[a].y),width:Math.floor(o[a].width),height:Math.floor(o[a].height),duration:o[a].duration})).key=e,h.lastFrame=s,Tiny.Cache.texture[r]=h}else{var c=n.naturalWidth||n.width,l=n.naturalHeight||n.height,u=t.width,d=t.height;u||(u=Math.floor(c/(t.cols||1))),d||(d=Math.floor(l/(t.rows||1)));var p=Math.floor(c/u)*Math.floor(l/d);if(0===p)return i();t.total&&(p=Math.min(p,t.total));var y=0,f=0;s=p-1;for(a=0;a<p;a++)r=e+"."+a,(h=new Tiny.Texture(n,{index:a,x:y,y:f,width:u,height:d,duration:t.duration})).key=e,h.lastFrame=s,Tiny.Cache.texture[r]=h,(y+=u)+u>c&&(y=0,f+=d)}i()}))},Tiny.Loader.image=function(t,i){const e=new Image;e.addEventListener("load",(function(){Tiny.Cache.image[t.key]=e,i(t,e)})),e.src=t.src},Tiny.registerSystem("load",Tiny.Loader)},533:function(){var t,i,e,n,s,r=function(){return(new Date).getTime()};void 0!==self.performance&&void 0!==self.performance.now?r=self.performance.now.bind(self.performance):void 0!==Date.now&&(r=Date.now),Tiny.RAF=function(r,h){void 0===h&&(h=!1),this.game=r,this.isRunning=!1,this.forceSetTimeOut=h;for(var o=["ms","moz","webkit","o"],a=0;a<o.length&&!window.requestAnimationFrame;a++)window.requestAnimationFrame=window[o[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[o[a]+"CancelAnimationFrame"]||window[o[a]+"CancelRequestAnimationFrame"];t=!1,i=null,e=null,n=0,s=0},Tiny.RAF.prototype={start:function(){n=r(),this.isRunning=!0;var s=this;!window.requestAnimationFrame||this.forceSetTimeOut?(t=!0,i=function(){return s.updateSetTimeout()},e=window.setTimeout(i,0)):(t=!1,i=function(){return s.updateRAF()},e=window.requestAnimationFrame(i))},updateRAF:function(){s=r(),this.isRunning&&(this.game._update(Math.floor(s),s-n),e=window.requestAnimationFrame(i)),n=s},updateSetTimeout:function(){s=r(),this.isRunning&&(this.game._update(Math.floor(s),s-n),e=window.setTimeout(i,Tiny.RAF.timeToCall)),n=s},reset:function(){n=r()},stop:function(){t?clearTimeout(e):window.cancelAnimationFrame(e),this.isRunning=!1}},Tiny.RAF.timeToCall=15},810:function(){var t=function(){},i=function(i,e,n,s,r,h,o,a,c){this.game=n,this.cb=s||t,this.ctx=r||this,this.delay=null==h?1e3:h,this.loop=o,this.count=a||0,this.repeat=this.count>0,this.running=!!i,this._lastFrame=0,this.autoRemove=e,this.onComplete=c||t};i.prototype={start:function(){this.running=!0},pause:function(){this.running=!1},stop:function(){this.running=!1,this._lastFrame=0},update:function(t){this.running&&(this._lastFrame+=t,this._lastFrame>=this.delay&&(this.cb.call(this.ctx),this._lastFrame=0,this.repeat?(this.count--,0===this.count&&(this.running=!1,this.autoRemove&&this.game.timer.remove(this),this.onComplete())):this.loop||(this.running=!1,this.autoRemove&&this.game.timer.remove(this))))}},Tiny.Timer=i,Tiny.TimerCreator=function(t){this.game=t,this.list=[],this.autoStart=!0,this.autoRemove=!0},Tiny.TimerCreator.prototype={update:function(t){for(var i=0;i<this.list.length;i++)this.list[i].update(t)},removeAll:function(){for(var t=0;t<this.list.length;t++)this.list[t].stop();this.list=[]},remove:function(t){var i=this.list.indexOf(t);i>-1&&(t.stop(),this.list.splice(i,1))},add:function(t,e,n,s,r){s=null!=s?s:this.autoStart,r=null!=r?r:this.autoRemove;var h=new i(s,r,this.game,e,n,t);return this.list.push(h),h},loop:function(t,e,n,s,r){s=null!=s?s:this.autoStart,r=null!=r?r:this.autoRemove;var h=new i(s,r,this.game,e,n,t,!0);return this.list.push(h),h},repeat:function(t,e,n,s,r,h,o){r=null!=r?r:this.autoStart,h=null!=h?h:this.autoRemove;var a=new i(r,h,this.game,n,s,t,!1,e,o);return this.list.push(a),a},destroy:function(){this.removeAll()}},Tiny.registerSystem("timer",Tiny.TimerCreator)},855:function(){var t=function(){this._tweens={},this._tweensAddedDuringUpdate={}};t.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){var i=t.getId();this._tweens[i]=t,this._tweensAddedDuringUpdate[i]=t},remove:function(t){var i=t.getId();delete this._tweens[i],delete this._tweensAddedDuringUpdate[i]},update:function(t,i){var e=Object.keys(this._tweens);if(0===e.length)return!1;for(;e.length>0;){this._tweensAddedDuringUpdate={};for(var n=0;n<e.length;n++){var s=this._tweens[e[n]];s&&!1===s.update(t)&&(s._isPlaying=!1,i||delete this._tweens[e[n]])}e=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var i,e=new t;e.Group=t,e._nextId=0,e.nextId=function(){return e._nextId++},Tiny.Tween=function(t,i){this._isPaused=!1,this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._time=0,this._easingFunction=Tiny.Easing.Linear.None,this._interpolationFunction=Tiny.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onRepeatCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=i||e,this._id=e.nextId()},Tiny.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},isPaused:function(){return this._isPaused},to:function(t,i){return this._valuesEnd=Object.create(t),void 0!==i&&(this._duration=i),this},duration:function(t){return this._duration=t,this},start:function(t){for(var i in this._group.add(this),this._isPlaying=!0,this._isPaused=!1,this._time=0,this._onStartCallbackFired=!1,this._startTime=this._delayTime,this._valuesEnd){if(this._valuesEnd[i]instanceof Array){if(0===this._valuesEnd[i].length)continue;this._valuesEnd[i]=[this._object[i]].concat(this._valuesEnd[i])}void 0!==this._object[i]&&(1!=t&&void 0!==this._valuesStart[i]||(this._valuesStart[i]=this._object[i]),this._valuesStart[i]instanceof Array==!1&&(this._valuesStart[i]*=1),this._valuesStartRepeat[i]=this._valuesStart[i]||0)}return this},stop:function(){return this._isPlaying?(this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens(),this):this},end:function(){return this.update(1/0,1/0),this},pause:function(){return this._isPaused||!this._isPlaying||(this._isPaused=!0,this._group.remove(this)),this},resume:function(){return this._isPaused&&this._isPlaying?(this._isPaused=!1,this._group.add(this),this):this},stopChainedTweens:function(){for(var t=0,i=this._chainedTweens.length;t<i;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onRepeat:function(t){return this._onRepeatCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var i,e,n;if(this._time+=t,this._time<this._startTime)return!0;for(i in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),e=(this._time-this._startTime)/this._duration,e=0===this._duration||e>1?1:e,n=this._easingFunction(e),this._valuesEnd)if(void 0!==this._valuesStart[i]){var s=this._valuesStart[i]||0,r=this._valuesEnd[i];r instanceof Array?this._object[i]=this._interpolationFunction(r,n):("string"==typeof r&&(r="+"===r.charAt(0)||"-"===r.charAt(0)?s+parseFloat(r):parseFloat(r)),"number"==typeof r&&(this._object[i]=s+(r-s)*n))}if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,e),1===e){if(this._time=0,this._repeat>0){for(i in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat){if("string"==typeof this._valuesEnd[i]&&(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo){var h=this._valuesStartRepeat[i];this._valuesStartRepeat[i]=this._valuesEnd[i],this._valuesEnd[i]=h}this._valuesStart[i]=this._valuesStartRepeat[i]}return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=this._repeatDelayTime:this._startTime=this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var o=0,a=this._chainedTweens.length;o<a;o++)this._chainedTweens[o].start();return!1}return!0}},Tiny.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){var i=1.70158;return t*t*((i+1)*t-i)},Out:function(t){var i=1.70158;return--t*t*((i+1)*t+i)+1},InOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((i+1)*t-i)*.5:.5*((t-=2)*t*((i+1)*t+i)+2)}},Bounce:{In:function(t){return 1-Tiny.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*Tiny.Easing.Bounce.In(2*t):.5*Tiny.Easing.Bounce.Out(2*t-1)+.5}}},Tiny.Interpolation={Linear:function(t,i){var e=t.length-1,n=e*i,s=Math.floor(n),r=Tiny.Interpolation.Utils.Linear;return i<0?r(t[0],t[1],n):i>1?r(t[e],t[e-1],e-n):r(t[s],t[s+1>e?e:s+1],n-s)},Bezier:function(t,i){for(var e=0,n=t.length-1,s=Math.pow,r=Tiny.Interpolation.Utils.Bernstein,h=0;h<=n;h++)e+=s(1-i,n-h)*s(i,h)*t[h]*r(n,h);return e},CatmullRom:function(t,i){var e=t.length-1,n=e*i,s=Math.floor(n),r=Tiny.Interpolation.Utils.CatmullRom;return t[0]===t[e]?(i<0&&(s=Math.floor(n=e*(1+i))),r(t[(s-1+e)%e],t[s],t[(s+1)%e],t[(s+2)%e],n-s)):i<0?t[0]-(r(t[0],t[0],t[1],t[1],-n)-t[0]):i>1?t[e]-(r(t[e],t[e],t[e-1],t[e-1],n-e)-t[e]):r(t[s?s-1:0],t[s],t[e<s+1?e:s+1],t[e<s+2?e:s+2],n-s)},Utils:{Linear:function(t,i,e){return(i-t)*e+t},Bernstein:function(t,i){var e=Tiny.Interpolation.Utils.Factorial;return e(t)/e(i)/e(t-i)},Factorial:(i=[1],function(t){var e=1;if(i[t])return i[t];for(var n=t;n>1;n--)e*=n;return i[t]=e,e}),CatmullRom:function(t,i,e,n,s){var r=.5*(e-t),h=.5*(n-i),o=s*s;return(2*i-2*e+r+h)*(s*o)+(-3*i+3*e-2*r-h)*o+r*s+i}}},Tiny.TweenManager=function(i){this.game=i,this.bufferList=[],this.group=new t},Tiny.TweenManager.prototype={remove:function(t){this.group.remove(t)},add:function(t){return new Tiny.Tween(t,this.group)},pause:function(){for(var t in this.bufferList.length=0,this.group._tweens)this.bufferList.push(this.group._tweens[t]),this.group._tweens[t].pause()},resume(){for(var t=0;t<this.bufferList.length;t++)this.bufferList[t].resume();this.bufferList.length=0},update:function(t){this.group.update(t)},destroy:function(){this.bufferList.length=0,this.group.removeAll(),this.group=null}},Tiny.registerSystem("tweens",Tiny.TweenManager)},111:function(){Tiny.RenderTexture=function(t,i,e,n){this.width=t||100,this.height=i||100,n=n||1,this.textureBuffer=new Tiny.CanvasBuffer(this.width*n,this.height*n),Tiny.Texture.call(this,this.textureBuffer.canvas,new Tiny.Rectangle(0,0,Math.floor(this.width*n),Math.floor(this.height*n))),this.resolution=n,this.renderer=e||Tiny.defaultRenderer,this.valid=!0},Tiny.RenderTexture.prototype=Object.create(Tiny.Texture.prototype),Tiny.RenderTexture.prototype.constructor=Tiny.RenderTexture,Tiny.RenderTexture.prototype.resize=function(t,i,e){t===this.width&&i===this.height||(this.valid=t>0&&i>0,this.width=t,this.height=i,this.frame.width=this.crop.width=t*this.resolution,this.frame.height=this.crop.height=i*this.resolution,this.valid&&this.textureBuffer.resize(this.width*this.resolution,this.height*this.resolution))},Tiny.RenderTexture.prototype.clear=function(){this.valid&&this.textureBuffer.clear()},Tiny.RenderTexture.prototype.render=function(t,i,e){if(this.valid){var n=t.worldTransform;n.identity(),i&&n.append(i),t.worldAlpha=1;for(var s=t.children,r=0,h=s.length;r<h;r++)s[r].updateTransform();e&&this.textureBuffer.clear();var o=this.textureBuffer.context,a=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderObject(t,o),this.renderer.resolution=a}},Tiny.RenderTexture.prototype.getImage=function(){var t=new Image;return t.src=this.getBase64(),t},Tiny.RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()},Tiny.RenderTexture.prototype.getCanvas=function(){return this.textureBuffer.canvas}},673:function(){Tiny.TextureCacheIdGenerator=0,Tiny.TextureSilentFail=!1,Tiny.Texture=function(t,i,e,n){if(this.noFrame=!1,this.resolution=1,this.hasLoaded=!1,i||(this.noFrame=!0,i=new Tiny.Rectangle(0,0,1,1)),"string"==typeof t){var s=t;if(!(t=Tiny.Cache.image[s]))throw new Error("Cache Error: image "+s+" does`t found in cache");Tiny.Cache.texture[s]=this,this.key=s}if(this.source=t,this.frame=i,this.trim=n,this.valid=!1,this.width=0,this.height=0,this.crop=e||new Tiny.Rectangle(0,0,1,1),(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.onSourceLoaded();else{var r=this;this.source.onload=function(){r.onSourceLoaded()}}},Tiny.Texture.prototype.constructor=Tiny.Texture,Tiny.Texture.prototype.onSourceLoaded=function(){this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.noFrame&&(this.frame=new Tiny.Rectangle(0,0,this.width,this.height)),this.setFrame(this.frame)},Tiny.Texture.prototype.addToCache=function(t){Tiny.Cache.texture[t]=this,this.key=t},Tiny.Texture.prototype.destroy=function(){this.key&&delete Tiny.Cache.texture[this.key],this.source=null,this.valid=!1},Tiny.Texture.prototype.setFrame=function(t){if(this.noFrame=!1,this.frame=t,this.valid=t&&t.width&&t.height&&this.source&&this.hasLoaded,this.valid)if(this.crop.x=t.x,this.crop.y=t.y,this.crop.width=t.width,this.crop.height=t.height,this.trim||!(t.x+t.width>this.width||t.y+t.height>this.height))this.trim&&(this.frame.width=this.trim.width,this.frame.height=this.trim.height);else{if(!Tiny.TextureSilentFail)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=!1}},Tiny.Texture.fromCanvas=function(t){return new Tiny.Texture(t)}},701:function(){Tiny.CanvasBuffer=function(t,i,e){this.width=t,this.height=i,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",e),this.canvas.width=t,this.canvas.height=i},Tiny.CanvasBuffer.prototype.constructor=Tiny.CanvasBuffer,Tiny.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height)},Tiny.CanvasBuffer.prototype.resize=function(t,i){this.width=this.canvas.width=t,this.height=this.canvas.height=i}},501:function(){function t(){this.a=[],this.n=0}Tiny.EventEmitter={call:function(t){t&&(t=t.prototype||t,Tiny.EventEmitter.mixin(t))},mixin:function(i){const e={};function n(i,n,s,r){var h=e[i];h||(h=e[i]=new t),h.a.push(n,s||null,r||!1),h.n+=3}i.once=function(t,i,e){n(t,i,e,!0)},i.on=n,i.off=function(t,i,n){if(e[t]){var s=e[t].a;if(i)if(n)for(r=0;r<s.length;r+=3)s[r]==i&&s[r+1]==n&&(s.splice(r,3),r-=3);else for(var r=0;r<s.length;r+=3)s[r]==i&&(s.splice(r,3),r-=3);else s.length=0;0==s.length&&delete e[t]}},i.emit=function(t,i,n,s){var r=e[t];if(r){var h=r.a;r.n=0;for(var o,a,c=arguments.length,l=0;l<h.length-r.n;l+=3)o=h[l],a=h[l+1],h[l+2]&&(h.splice(l,3),l-=3),c<=1?o.call(a):2==c?o.call(a,i):3==c?o.call(a,i,n):o.call(a,i,n,s);0==h.length&&delete e[t]}}}}},623:function(){Date.now||(Date.now=function(){return(new Date).getTime()}),"undefined"==typeof Float32Array&&(window.Float32Array=Array)}},i={};function e(n){var s=i[n];if(void 0!==s)return s.exports;var r=i[n]={exports:{}};return t[n](r,r.exports,e),r.exports}e(632),e(855),e(672),e(224),e(465),e(935),e(357),e(111),e(701),e(45),e(959)}();