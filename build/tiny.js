!function(e){var n={};function s(t){if(n[t])return n[t].exports;var i=n[t]={i:t,l:!1,exports:{}};return e[t].call(i.exports,i,i.exports,s),i.l=!0,i.exports}s.m=e,s.c=n,s.d=function(t,i,e){s.o(t,i)||Object.defineProperty(t,i,{enumerable:!0,get:e})},s.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(i,t){if(1&t&&(i=s(i)),8&t)return i;if(4&t&&"object"==typeof i&&i&&i.__esModule)return i;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:i}),2&t&&"string"!=typeof i)for(var n in i)s.d(e,n,function(t){return i[t]}.bind(null,n));return e},s.n=function(t){var i=t&&t.__esModule?function(){return t.default}:function(){return t};return s.d(i,"a",i),i},s.o=function(t,i){return Object.prototype.hasOwnProperty.call(t,i)},s.p="",s(s.s=21)}([function(t,i,e){e(1),window.Tiny={},e(2),e(3),e(4),e(5),e(6),e(7),e(8),e(9),e(10),e(11)},function(t,i){Date.now||(Date.now=function(){return(new Date).getTime()}),"undefined"==typeof Float32Array&&(window.Float32Array=Array)},function(t,i){function e(){}Tiny.App=function(t){(this.callbackContext=this).state=0,this.timeScale=1,this.width=0,this.height=0,this.systems=[],this.updatable=[],this.paused=!1,this.pauseDuration=0,this.inputView=document.body,this.boot=(t=t||{}).boot||this.boot||e,this.preload=t.preload||this.preload||e,this.create=t.create||this.create||e,this.update=t.update||this.update||e,this.render=t.render||this.render||e,this._resize_cb=t.resize||e,this._destroy_cb=t.destroy||e;var i=this;setTimeout(function(){i._boot()},0)},Tiny.App.prototype._boot=function(){for(var t=0;t<Tiny.systems.length;t++){var i=Tiny.systems[t],e=new i._class_(this);this.systems.push(e),e.update&&this.updatable.push(e),i.name&&(this[i.name]=e)}Tiny.RAF&&(this.raf=new Tiny.RAF(this)),this.boot.call(this.callbackContext);var n=this;setTimeout(function(){n.load?n._preload():n._create()},0)},Tiny.App.prototype._preload=function(){this.preload.call(this.callbackContext),this.state=1,this.load.start(this._create)},Tiny.App.prototype._create=function(){this.create.call(this.callbackContext),this.raf&&this.raf.start(),this.state=2},Tiny.App.prototype.pause=function(){if(this.raf&&this.raf.reset(),!this.paused){for(var t=0;t<this.systems.length;t++)this.systems[t].pause&&this.systems[t].pause();this.paused=!0}},Tiny.App.prototype.resume=function(){if(this.raf&&this.raf.reset(),this.paused){for(var t=0;t<this.systems.length;t++)this.systems[t].resume&&this.systems[t].resume();this.paused=!1}},Tiny.App.prototype._update=function(t,i){if(this.paused)this.pauseDuration+=i;else{i*=this.timeScale,this.update.call(this.callbackContext,t,i);for(var e=0;e<this.updatable.length;e++)this.updatable[e].update(i)}this.render()},Tiny.App.prototype.resize=function(t,i){this.width=t||this.width,this.height=i||this.height,0<this.state&&this._resize_cb.call(this.callbackContext,this.width,this.height);var e=this;setTimeout(function(){e.input&&e.input.updateBounds()},0)},Tiny.App.prototype.destroy=function(t){for(var i=0;i<this.systems.length;i++)this.systems[i].destroy&&this.systems[i].destroy(t);this.paused=!0,t&&this.load.clearCache(),this.raf&&this.raf.stop(),this._destroy_cb.call(this.callbackContext)}},function(t,i){Tiny.VERSION="2.0.9",Tiny.systems=[],Tiny.registerSystem=function(t,i){Tiny.systems.push({name:t,_class_:i})},Tiny.Primitives={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4,RREC_LJOIN:5},Tiny.rnd=function(t,i){return t+Math.floor(Math.random()*(i-t+1))},Tiny.color2rgb=function(t){return Tiny.hex2rgb(Tiny.style2hex(t))},Tiny.color2style=function(t){return t},Tiny.style2hex=function(t){return+t.replace("#","0x")},Tiny.hex2style=function(t){return"#"+("00000"+(0|t).toString(16)).substr(-6)},Tiny.hex2rgb=function(t){return[(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]},Tiny.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]}},function(t,i){Tiny.Math={distance:function(t,i,e,n){t-=e,e=i-n;return Math.sqrt(t*t+e*e)}};var e=Math.PI/180,n=180/Math.PI;Tiny.Math.degToRad=function(t){return t*e},Tiny.Math.radToDeg=function(t){return t*n}},function(t,i){Tiny.Point=function(t,i){this.x=t||0,this.y=i||0},Tiny.Point.prototype={set:function(t,i){return this.x=t||0,this.y=i||(0!==i?this.x:0),this}}},function(t,i){Tiny.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.type=Tiny.MATRIX},Tiny.Matrix.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},Tiny.Matrix.prototype.toArray=function(t){this.array||(this.array=new Float32Array(9));var i=this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0),i[8]=1,i},Tiny.Matrix.prototype.apply=function(t,i){i=i||new Tiny.Point;var e=t.x,t=t.y;return i.x=this.a*e+this.c*t+this.tx,i.y=this.b*e+this.d*t+this.ty,i},Tiny.Matrix.prototype.applyInverse=function(t,i){i=i||new Tiny.Point;var e=1/(this.a*this.d+this.c*-this.b),n=t.x,t=t.y;return i.x=this.d*e*n+-this.c*e*t+(this.ty*this.c-this.tx*this.d)*e,i.y=this.a*e*t+-this.b*e*n+(-this.ty*this.a+this.tx*this.b)*e,i},Tiny.Matrix.prototype.translate=function(t,i){return this.tx+=t,this.ty+=i,this},Tiny.Matrix.prototype.scale=function(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this},Tiny.Matrix.prototype.rotate=function(t){var i=Math.cos(t),t=Math.sin(t),e=this.a,n=this.c,s=this.tx;return this.a=e*i-this.b*t,this.b=e*t+this.b*i,this.c=n*i-this.d*t,this.d=n*t+this.d*i,this.tx=s*i-this.ty*t,this.ty=s*t+this.ty*i,this},Tiny.Matrix.prototype.append=function(t){var i=this.a,e=this.b,n=this.c,s=this.d;return this.a=t.a*i+t.b*n,this.b=t.a*e+t.b*s,this.c=t.c*i+t.d*n,this.d=t.c*e+t.d*s,this.tx=t.tx*i+t.ty*n+this.tx,this.ty=t.tx*e+t.ty*s+this.ty,this},Tiny.Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Tiny.identityMatrix=new Tiny.Matrix},function(t,i){Tiny.Rectangle=function(t,i,e,n){i=i||0,e=e||0,n=n||0,this.x=t=t||0,this.y=i,this.width=e,this.height=n,this.type=Tiny.Primitives.RECT},Tiny.Rectangle.prototype={setTo:function(t,i,e,n){return this.x=t,this.y=i,this.width=e,this.height=n,this},contains:function(t,i){return Tiny.Rectangle.contains(this,t,i)},intersects:function(t){return Tiny.Rectangle.intersects(this,t)}},Object.defineProperty(Tiny.Rectangle.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}}),Object.defineProperty(Tiny.Rectangle.prototype,"right",{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}}),Object.defineProperty(Tiny.Rectangle.prototype,"volume",{get:function(){return this.width*this.height}}),Tiny.Rectangle.prototype.constructor=Tiny.Rectangle,Tiny.Rectangle.contains=function(t,i,e){return!(t.width<=0||t.height<=0)&&(i>=t.x&&i<t.right&&e>=t.y&&e<t.bottom)},Tiny.Rectangle.containsPoint=function(t,i){return Tiny.Rectangle.contains(t,i.x,i.y)},Tiny.Rectangle.containsRect=function(t,i){return!(t.volume>i.volume)&&(t.x>=i.x&&t.y>=i.y&&t.right<i.right&&t.bottom<i.bottom)},Tiny.Rectangle.intersects=function(t,i){return!(t.width<=0||t.height<=0||i.width<=0||i.height<=0)&&!(t.right<i.x||t.bottom<i.y||t.x>i.right||t.y>i.bottom)},Tiny.EmptyRectangle=new Tiny.Rectangle(0,0,0,0)},function(t,i){var a=2*Math.PI;Tiny.BaseObject2D=function(){this.position=new Tiny.Point(0,0),this.scale=new Tiny.Point(1,1),this.pivot=new Tiny.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.renderable=!1,this.parent=null,this.worldAlpha=1,this.worldTransform=new Tiny.Matrix,this._sr=0,this._cr=1,this._cacheAsBitmap=!1},Tiny.BaseObject2D.prototype.constructor=Tiny.BaseObject2D,Tiny.BaseObject2D.prototype.destroy=function(){this.parent&&this.parent.remove(this),this.parent=null,this.worldTransform=null,this.visible=!1,this.renderable=!1,this._destroyCachedSprite()},Object.defineProperty(Tiny.BaseObject2D.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1}while(t=t.parent);return!0}}),Object.defineProperty(Tiny.BaseObject2D.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(t?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=t)}}),Tiny.BaseObject2D.prototype.updateTransform=function(){var t,i,e,n,s,r,h,o;this.parent&&(t=this.parent.worldTransform,i=this.worldTransform,this.rotation%a?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),e=this._cr*this.scale.x,n=this._sr*this.scale.x,s=-this._sr*this.scale.y,r=this._cr*this.scale.y,h=this.position.x,o=this.position.y,(this.pivot.x||this.pivot.y)&&(h-=this.pivot.x*e+this.pivot.y*s,o-=this.pivot.x*n+this.pivot.y*r),i.a=e*t.a+n*t.c,i.b=e*t.b+n*t.d,i.c=s*t.a+r*t.c,i.d=s*t.b+r*t.d):(e=this.scale.x,r=this.scale.y,h=this.position.x-this.pivot.x*e,o=this.position.y-this.pivot.y*r,i.a=e*t.a,i.b=e*t.b,i.c=r*t.c,i.d=r*t.d),i.tx=h*t.a+o*t.c+t.tx,i.ty=h*t.b+o*t.d+t.ty,this.worldAlpha=this.alpha*this.parent.worldAlpha)},Tiny.BaseObject2D.prototype.displayObjectUpdateTransform=Tiny.BaseObject2D.prototype.updateTransform,Tiny.BaseObject2D.prototype.getBounds=function(t){return Tiny.EmptyRectangle},Tiny.BaseObject2D.prototype.getLocalBounds=function(){return this.getBounds(Tiny.identityMatrix)},Tiny.BaseObject2D.prototype.generateTexture=function(t,i){var e=this.getLocalBounds(),i=new Tiny.RenderTexture(0|e.width,0|e.height,i,t);return Tiny.BaseObject2D._tempMatrix.tx=-e.x,Tiny.BaseObject2D._tempMatrix.ty=-e.y,i.render(this,Tiny.BaseObject2D._tempMatrix),i},Tiny.BaseObject2D.prototype.updateCache=function(){this._generateCachedSprite()},Tiny.BaseObject2D.prototype.toGlobal=function(t){return this.displayObjectUpdateTransform(),this.worldTransform.apply(t)},Tiny.BaseObject2D.prototype.toLocal=function(t,i){return i&&(t=i.toGlobal(t)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(t)},Tiny.BaseObject2D.prototype._renderCachedSprite=function(t){this._cachedSprite.worldAlpha=this.worldAlpha,Tiny.Sprite.prototype.render.call(this._cachedSprite,t)},Tiny.BaseObject2D.prototype._generateCachedSprite=function(){this._cachedSprite=null,this._cacheAsBitmap=!1;var t,i=this.getLocalBounds();this._cachedSprite?this._cachedSprite.texture.resize(0|i.width,0|i.height):(t=new Tiny.RenderTexture(0|i.width,0|i.height),this._cachedSprite=new Tiny.Sprite(t),this._cachedSprite.worldTransform=this.worldTransform),Tiny.BaseObject2D._tempMatrix.tx=-i.x,Tiny.BaseObject2D._tempMatrix.ty=-i.y,this._cachedSprite.texture.render(this,Tiny.BaseObject2D._tempMatrix,!0),this._cachedSprite.anchor.x=-(i.x/i.width),this._cachedSprite.anchor.y=-(i.y/i.height),this._cacheAsBitmap=!0},Tiny.BaseObject2D.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},Tiny.BaseObject2D.prototype.render=function(t){},Object.defineProperty(Tiny.BaseObject2D.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(Tiny.BaseObject2D.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}}),Tiny.BaseObject2D._tempMatrix=new Tiny.Matrix},function(t,i){Tiny.Object2D=function(){Tiny.BaseObject2D.call(this),this.children=[],this._bounds=new Tiny.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null},Tiny.Object2D.prototype=Object.create(Tiny.BaseObject2D.prototype),Tiny.Object2D.prototype.constructor=Tiny.Object2D,Object.defineProperty(Tiny.Object2D.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var i=this.getLocalBounds().width;this.scale.x=0!==i?t/i:1,this._width=t}}),Object.defineProperty(Tiny.Object2D.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var i=this.getLocalBounds().height;this.scale.y=0!==i?t/i:1,this._height=t}}),Object.defineProperty(Tiny.Object2D.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.isMask=!0)}}),Tiny.Object2D.prototype.destroy=function(){for(var t=this.children.length;t--;)this.children[t].destroy();this.children=[],Tiny.BaseObject2D.prototype.destroy.call(this),this._bounds=null,this._currentBounds=null,this._mask=null,this.input&&this.input.system.remove(this)},Tiny.Object2D.prototype.add=function(t){return this.addChildAt(t,this.children.length)},Tiny.Object2D.prototype.addChildAt=function(t,i){if(0<=i&&i<=this.children.length)return t.parent&&t.parent.remove(t),(t.parent=this).game&&(t.game=this.game),this.children.splice(i,0,t),t;throw new Error(t+"addChildAt: The index "+i+" supplied is out of bounds "+this.children.length)},Tiny.Object2D.prototype.swapChildren=function(t,i){if(t!==i){var e=this.getChildIndex(t),n=this.getChildIndex(i);if(e<0||n<0)throw new Error("swapChildren: Both the supplied Objects must be a child of the caller.");this.children[e]=i,this.children[n]=t}},Tiny.Object2D.prototype.getChildIndex=function(t){t=this.children.indexOf(t);if(-1===t)throw new Error("The supplied Object must be a child of the caller");return t},Tiny.Object2D.prototype.setChildIndex=function(t,i){if(i<0||i>=this.children.length)throw new Error("The supplied index is out of bounds");var e=this.getChildIndex(t);this.children.splice(e,1),this.children.splice(i,0,t)},Tiny.Object2D.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied Object must be a child of the caller");return this.children[t]},Tiny.Object2D.prototype.remove=function(t){t=this.children.indexOf(t);if(-1!==t)return this.removeChildAt(t)},Tiny.Object2D.prototype.removeChildAt=function(t){var i=this.getChildAt(t);return i.parent=void 0,this.children.splice(t,1),i},Tiny.Object2D.prototype.removeChildren=function(t,i){var t=t||0,i="number"==typeof i?i:this.children.length,e=i-t;if(0<e&&e<=i){for(var n=this.children.splice(t,e),s=0;s<n.length;s++)n[s].parent=void 0;return n}if(0==e&&0===this.children.length)return[];throw new Error("removeChildren: Range Error, numeric values are outside the acceptable range")},Tiny.Object2D.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var t=0,i=this.children.length;t<i;t++)this.children[t].updateTransform()},Tiny.Object2D.prototype.displayObjectContainerUpdateTransform=Tiny.Object2D.prototype.updateTransform,Tiny.Object2D.prototype.getBounds=function(){if(0===this.children.length)return Tiny.EmptyRectangle;if(this._cachedSprite)return this._cachedSprite.getBounds();for(var t,i,e=1/0,n=1/0,s=-1/0,r=-1/0,h=!1,o=0,a=this.children.length;o<a;o++)this.children[o].visible&&(h=!0,e=e<(t=this.children[o].getBounds()).x?e:t.x,n=n<t.y?n:t.y,s=(i=t.width+t.x)<s?s:i,r=(i=t.height+t.y)<r?r:i);if(!h)return Tiny.EmptyRectangle;var c=this._bounds;return c.x=e,c.y=n,c.width=s-e,c.height=r-n,c},Tiny.Object2D.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=Tiny.identityMatrix;for(var i=0,e=this.children.length;i<e;i++)this.children[i].updateTransform();var n=this.getBounds();return this.worldTransform=t,n},Tiny.Object2D.prototype.render=function(t){if(!1!==this.visible&&0!==this.alpha)if(this._cacheAsBitmap)this._renderCachedSprite(t);else{this._mask&&t.maskManager.pushMask(this._mask,t);for(var i=0;i<this.children.length;i++)this.children[i].render(t);this._mask&&t.maskManager.popMask(t)}}},function(t,i){Tiny.Scene=function(t){Tiny.Object2D.call(this),this.worldTransform=new Tiny.Matrix,this.game=t},Tiny.Scene.prototype=Object.create(Tiny.Object2D.prototype),Tiny.Scene.prototype.constructor=Tiny.Scene,Tiny.Scene.prototype.updateTransform=function(){this.worldAlpha=1;for(var t=0;t<this.children.length;t++)this.children[t].updateTransform()}},function(t,i){Tiny.CanvasRenderer=function(t,i,e){this.resolution=null!=(e=e||{}).resolution?e.resolution:1,this.clearBeforeRender=null==e.clearBeforeRender||e.clearBeforeRender,this.transparent=null!=e.transparent&&e.transparent,this.autoResize=e.autoResize||!1,Tiny.defaultRenderer||(Tiny.defaultRenderer=this);e=this.domElement=e.domElement||document.createElement("canvas");this.context=e.getContext("2d",{alpha:this.transparent}),this.resize(t||800,i||600),this.setClearColor("#ffffff"),Tiny.CanvasMaskManager&&(this.maskManager=new Tiny.CanvasMaskManager),this.renderSession={context:this.context,maskManager:this.maskManager,smoothProperty:null,roundPixels:!1},"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="oImageSmoothingEnabled":"msImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="msImageSmoothingEnabled")},Tiny.CanvasRenderer.prototype.constructor=Tiny.CanvasRenderer,Tiny.CanvasRenderer.prototype.setClearColor=function(t){this.clearColor=t},Tiny.CanvasRenderer.prototype.render=function(t){t.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode="source-over",this.context.globalCompositeOperation="source-over",navigator.isCocoonJS&&this.domElement.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width*this.resolution,this.height*this.resolution):(this.context.fillStyle=this.clearColor,this.context.fillRect(0,0,this.width*this.resolution,this.height*this.resolution))),this.renderObject(t)},Tiny.CanvasRenderer.prototype.destroy=function(t){(t=void 0===t?!0:t)&&this.domElement.parentNode&&this.domElement.parentNode.removeChild(this.domElement),this.domElement=null,this.context=null,this.maskManager=null,this.renderSession=null,Tiny.defaultRenderer===this&&(Tiny.defaultRenderer=null)},Tiny.CanvasRenderer.prototype.resize=function(t,i){this.width=t,this.height=i;var e=this.domElement;e.width=Math.floor(this.width*this.resolution),e.height=Math.floor(this.height*this.resolution),this.autoResize&&(e.style.width=t+"px",e.style.height=i+"px")},Tiny.CanvasRenderer.prototype.setPixelRatio=function(t){this.resolution=t;t=this.domElement;t.width=Math.floor(this.width*this.resolution),t.height=Math.floor(this.height*this.resolution)},Tiny.CanvasRenderer.prototype.renderObject=function(t,i){this.renderSession.context=i||this.context,this.renderSession.resolution=this.resolution,t.render(this.renderSession)}},function(t,i,e){e(0),e(13),e(14),e(15),e(16),e(17),e(18),e(19),e(20)},function(t,i){var s,r,h,o,a,e=function(){return(new Date).getTime()};void 0!==self.performance&&void 0!==self.performance.now?e=self.performance.now.bind(self.performance):void 0!==Date.now&&(e=Date.now),Tiny.RAF=function(t,i){void 0===i&&(i=!1),this.game=t,this.isRunning=!1,this.forceSetTimeOut=i;for(var e=["ms","moz","webkit","o"],n=0;n<e.length&&!window.requestAnimationFrame;n++)window.requestAnimationFrame=window[e[n]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[e[n]+"CancelAnimationFrame"]||window[e[n]+"CancelRequestAnimationFrame"];s=!1,h=r=null,a=o=0},Tiny.RAF.prototype={start:function(){o=e(),this.isRunning=!0;var t=this;h=!window.requestAnimationFrame||this.forceSetTimeOut?(s=!0,r=function(){return t.updateSetTimeout()},window.setTimeout(r,0)):(s=!1,r=function(){return t.updateRAF()},window.requestAnimationFrame(r))},updateRAF:function(){a=e(),this.isRunning&&(this.game._update(Math.floor(a),a-o),h=window.requestAnimationFrame(r)),o=a},updateSetTimeout:function(){a=e(),this.isRunning&&(this.game._update(Math.floor(a),a-o),h=window.setTimeout(r,Tiny.RAF.timeToCall)),o=a},reset:function(){o=e()},stop:function(){s?clearTimeout(h):window.cancelAnimationFrame(h),this.isRunning=!1}},Tiny.RAF.timeToCall=15},function(t,i){Tiny.Cache={image:{},texture:{}},Tiny.Loader=function(t){t.cache=Tiny.Cache,this.game=t,this.list=[]},Tiny.Loader.prototype={clearCache:function(){for(var t in Tiny.Cache.texture)Tiny.Cache.texture[t].destroy();for(var t in Tiny.Cache)Tiny.Cache[t]={}},all:function(t){this.list=this.list.concat(t)},image:function(t,i){this.list.push({src:i,key:t,type:"image"})},spritesheet:function(t,i,e,n,s,r){i={src:i,key:t,type:"spritesheet"};"number"==typeof e?(i.width=e,i.height=n,i.total=s,i.duration=r):0<e.length&&(i.data=e),this.list.push(i)},atlas:function(t,i,e){this.list.push({src:i,key:t,data:e,type:"atlas"})},start:function(e){var n=this.game,s=this.list;function r(){var t=s.shift(),i=Tiny.Loader[t.type];i?i(t,h):(console.warn("Cannot find loader for "+t.type),h())}function h(t,i){0!=s.length?r():e.call(n)}0==s.length?e.call(n):r()}},Tiny.Loader.atlas=function(t,r){var h=t.key;Tiny.Loader.image(t,function(t,i){for(var e=0;e<t.data.length;e++){var n=h+"."+t.data[e].name,s=new Tiny.Texture(i,t.data[e]);s.key=h,Tiny.Cache.texture[n]=s}r()})},Tiny.Loader.spritesheet=function(t,y){var f=t.key;Tiny.Loader.image(t,function(t,i){var e,n;if(t.data)for(var s=t.data,r=s.length-1,h=0;h<=r;h++)e=f+"."+h,(n=new Tiny.Texture(i,{index:h,x:Math.floor(s[h].x),y:Math.floor(s[h].y),width:Math.floor(s[h].width),height:Math.floor(s[h].height),duration:s[h].duration})).key=f,n.lastFrame=r,Tiny.Cache.texture[e]=n;else{var o=i.naturalWidth||i.width,a=i.naturalHeight||i.height,c=t.width,l=t.height,c=c||Math.floor(o/(t.cols||1)),l=l||Math.floor(a/(t.rows||1)),u=Math.floor(o/c)*Math.floor(a/l);if(0===u)return y();var d=0,p=0;r=(u=t.total?Math.min(u,t.total):u)-1;for(h=0;h<u;h++)e=f+"."+h,(n=new Tiny.Texture(i,{index:h,x:d,y:p,width:c,height:l,duration:t.duration})).key=f,n.lastFrame=r,Tiny.Cache.texture[e]=n,o<(d+=c)+c&&(d=0,p+=l)}y()})},Tiny.Loader.image=function(t,i){const e=new Image;e.addEventListener("load",function(){Tiny.Cache.image[t.key]=e,i(t,e)}),e.src=t.src},Tiny.registerSystem("load",Tiny.Loader)},function(t,i){var e;Tiny.Input=function(t){this.game=t;t=this.domElement=t.inputView;this.bounds={x:0,y:0,width:0,height:0},this.candidates=[],this.list=[],this.lastMove=null,this.isDown=!1,this.downHandler=this.downHandler.bind(this),this.moveHandler=this.moveHandler.bind(this),this.upHandler=this.upHandler.bind(this),t.addEventListener("touchstart",this.downHandler),t.addEventListener("touchmove",this.moveHandler),t.addEventListener("touchend",this.upHandler),t.addEventListener("touchcancel",this.upHandler),t.addEventListener("mousedown",this.downHandler),t.addEventListener("mousemove",this.moveHandler),t.addEventListener("mouseup",this.upHandler),Tiny.EventEmitter.mixin(this);for(var i=0;i<Tiny.Input.systems.length;i++)Tiny.Input.systems[i].init.call(this);this.updateBounds()},Tiny.Input.prototype={add:function(t,i){t.inputEnabled=!0,(i=i||{}).system=this,t.input=i,Tiny.EventEmitter.mixin(t.input),this.list.push(t)},remove:function(t){var i,t=this.list.indexOf(t);if(-1<t)return(i=this.list[t]).input=null,i.inputEnabled=!1,this.list.splice(t,1),i},inputHandler:function(t,i){var e=this.getCoords(i);if(null!==e){if("move"!=t){for(var n=this.candidates.length=0;n<Tiny.Input.systems.length;n++)Tiny.Input.systems[n].preHandle.call(this,e.x,e.y);for(var s=0;s<this.list.length;s++)(h=this.list[s]).inputEnabled&&h.parent&&(h.input.checkBounds?h.input:Tiny.Input).checkBounds.call(this,h,e.x,e.y)&&this.candidates.push(h);for(var r,h,n=this.candidates.length-1;0<=n;n--)if((h=this.candidates[n]).input["last_"+t]={x:e.x,y:e.y},h.input.emit(t,{x:e.x,y:e.y}),"up"!=t||(r=h.input.last_down)&&Tiny.Math.distance(r.x,r.y,e.x,e.y)<30&&h.input.emit("click",{x:e.x,y:e.y}),!h.input.transparent)break}this.emit(t,{x:e.x,y:e.y})}},moveHandler:function(t){this.lastMove=t,this.inputHandler("move",t)},upHandler:function(t){this.isDown=!1,this.inputHandler("up",this.lastMove)},downHandler:function(t){this.isDown=!0,this.lastMove=t,this.inputHandler("down",t)},clickHandler:function(t){this.inputHandler("click",t)},getCoords:function(t){var i=null;return"undefined"!=typeof TouchEvent&&t instanceof TouchEvent?(e=!0,0<t.touches.length?i={x:t.touches[0].clientX,y:t.touches[0].clientY}:t.clientX&&t.clientY&&(i={x:t.clientX,y:t.clientY})):i={x:t.clientX,y:t.clientY},e&&t instanceof MouseEvent||null===i?null:{x:i.x-this.bounds.x,y:i.y-this.bounds.y}},updateBounds:function(){bounds=this.bounds;var t=this.domElement.getBoundingClientRect();bounds.x=t.left,bounds.y=t.top,bounds.width=t.width,bounds.height=t.height},destroy:function(){var t=this.domElement;t.removeEventListener("touchstart",this.downHandler),t.removeEventListener("touchmove",this.moveHandler),t.removeEventListener("touchend",this.upHandler),t.removeEventListener("touchcancel",this.upHandler),t.removeEventListener("mousedown",this.downHandler),t.removeEventListener("mousemove",this.moveHandler),t.removeEventListener("mouseup",this.upHandler)}},Tiny.Input.checkBounds=function(t,i,e){if(t.worldVisible&&t.getBounds().contains(i,e))return!0},Tiny.Input.systems=[],Tiny.registerSystem("input",Tiny.Input)},function(t,i){function a(){}function s(t,i,e,n,s,r,h,o){this.game=e,this._cb_=n||a,this.delay=null==s?1e3:s,this.loop=r,this._count=h||0,this._repeat=0<this._count,this.status=t,this._lastFrame=0,this.autoRemove=i,this._oncomplete=o||a}s.prototype={start:function(){this.status=1},pause:function(){this.status=0},stop:function(){this.status=0,this._lastFrame=0},update:function(t){this.status&&(this._lastFrame+=t,this._lastFrame>=this.delay&&(this._cb_(),this._lastFrame=0,this._repeat?(this._count--,0===this._count&&(this.status=0,this.autoRemove&&this.game.timer.remove(this),this._oncomplete())):this.loop||(this.status=0,this.autoRemove&&this.game.timer.remove(this))))}},Tiny.Timer=s,Tiny.TimerCreator=function(t){this.game=t,this.list=[],this.autoStart=!0,this.autoRemove=!0},Tiny.TimerCreator.prototype={update:function(i){this.list.forEach(function(t){t.update(i)})},removeAll:function(){this.list.forEach(function(t){t.stop()}),this.list=[]},remove:function(t){var i=this.list.indexOf(t);-1<i&&(t.stop(),this.list.splice(i,1))},add:function(t,i,e,n){null==e&&(e=this.autoStart);e=new s(e?1:0,null!=n?n:this.autoRemove,this.game,i,t);return this.list.push(e),e},loop:function(t,i,e,n){null==e&&(e=this.autoStart);e=new s(e?1:0,null!=n?n:this.autoRemove,this.game,i,t,!0);return this.list.push(e),e},repeat:function(t,i,e,n){e=new s(this.autoStart?1:0,this.autoRemove,this.game,e,t,!1,i,n);return this.list.push(e),e},destroy:function(){this.removeAll()}},Tiny.registerSystem("timer",Tiny.TimerCreator)},function(t,i){function r(){this.a=[],this.n=0}Tiny.EventEmitter={call:function(t){t&&(t=t.prototype||t,Tiny.EventEmitter.mixin(t))},mixin:function(t){const l={};function n(t,i,e,n){var s=l[t];(s=s||(l[t]=new r)).a.push(i,e||null,n||!1),s.n+=3}t.once=function(t,i,e){n(t,i,e,!0)},t.on=n,t.off=function(t,i,e){if(l[t]){var n=l[t].a;if(i)if(e)for(s=0;s<n.length;s+=3)n[s]==i&&n[s+1]==e&&(n.splice(s,3),s-=3);else for(var s=0;s<n.length;s+=3)n[s]==i&&(n.splice(s,3),s-=3);else n.length=0;0==n.length&&delete l[t]}},t.emit=function(t,i,e,n){var s=l[t];if(s){for(var r,h,o=s.a,a=(s.n=0,arguments.length),c=0;c<o.length-s.n;c+=3)r=o[c],h=o[c+1],o[c+2]&&(o.splice(c,3),c-=3),a<=1?r.call(h):2==a?r.call(h,i):3==a?r.call(h,i,e):r.call(h,i,e,n);0==o.length&&delete l[t]}}}}},function(t,i){Tiny.TextureCacheIdGenerator=0,Tiny.TextureSilentFail=!1,Tiny.Texture=function(t,i,e,n){if(this.noFrame=!1,this.resolution=1,this.hasLoaded=!1,i||(this.noFrame=!0,i=new Tiny.Rectangle(0,0,1,1)),"string"==typeof t){var s=t;if(!(t=Tiny.Cache.image[s]))throw new Error("Cache Error: image "+s+" does`t found in cache");(Tiny.Cache.texture[s]=this).key=s}var r;this.source=t,this.frame=i,this.trim=n,this.valid=!1,this.width=0,this.height=0,this.crop=e||new Tiny.Rectangle(0,0,1,1),(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height?this.onSourceLoaded():(r=this).source.onload=function(){r.onSourceLoaded()}},Tiny.Texture.prototype.constructor=Tiny.Texture,Tiny.Texture.prototype.onSourceLoaded=function(){this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.noFrame&&(this.frame=new Tiny.Rectangle(0,0,this.width,this.height)),this.setFrame(this.frame)},Tiny.Texture.prototype.addToCache=function(t){(Tiny.Cache.texture[t]=this).key=t},Tiny.Texture.prototype.destroy=function(){this.key&&delete Tiny.Cache.texture[this.key],this.source=null,this.valid=!1},Tiny.Texture.prototype.setFrame=function(t){if(this.noFrame=!1,this.frame=t,this.valid=t&&t.width&&t.height&&this.source&&this.hasLoaded,this.valid){if(this.crop.x=t.x,this.crop.y=t.y,this.crop.width=t.width,this.crop.height=t.height,!this.trim&&(t.x+t.width>this.width||t.y+t.height>this.height)){if(Tiny.TextureSilentFail)return void(this.valid=!1);throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this)}this.trim&&(this.frame.width=this.trim.width,this.frame.height=this.trim.height)}},Tiny.Texture.fromCanvas=function(t){return new Tiny.Texture(t)}},function(t,i){Tiny.Sprite=function(t,i){Tiny.Object2D.call(this),this.anchor=new Tiny.Point,this.setTexture(t,i,!1),this._width=0,this._height=0,this._frame=0,this.tint="#FFFFFF",this.blendMode="source-over",this.texture.hasLoaded&&this.onTextureUpdate(),this.renderable=!0},Tiny.Sprite.prototype=Object.create(Tiny.Object2D.prototype),Tiny.Sprite.prototype.constructor=Tiny.Sprite,Object.defineProperty(Tiny.Sprite.prototype,"frameName",{get:function(){return this.texture.frame.name},set:function(t){this.texture.frame.name&&this.setTexture(Tiny.Cache.texture[this.texture.key+"."+t])}}),Object.defineProperty(Tiny.Sprite.prototype,"frame",{get:function(){return this._frame},set:function(t){this.texture.lastFrame&&(this._frame=t,this._frame>this.texture.lastFrame&&(this._frame=0),this.setTexture(Tiny.Cache.texture[this.texture.key+"."+this._frame]))}}),Object.defineProperty(Tiny.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(Tiny.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),Tiny.Sprite.prototype.setTexture=function(t,i,e){var n;return"string"==typeof t&&(n=t,null!=i&&(n=n+"."+i),t=(t=Tiny.Cache.texture[n])||new Tiny.Texture(n)),this.texture!==t&&(this.texture=t,this.cachedTint="#FFFFFF",!0===e&&this.onTextureUpdate(),!0)},Tiny.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},Tiny.Sprite.prototype.animate=function(t,i){this.texture.lastFrame&&null!=this.texture.frame.index&&(i=i||this.texture.frame.duration||100,this.animation?this.animation.delay=i:this.animation=t.loop(i,function(){this.frame+=1,this.animation.delay=i||this.texture.frame.duration||100}.bind(this)),this.animation.start())},Tiny.Sprite.prototype.getBounds=function(t){var i,e,n,s=this.texture.frame.width/this.texture.resolution,r=this.texture.frame.height/this.texture.resolution,h=s*(1-this.anchor.x),s=s*-this.anchor.x,o=r*(1-this.anchor.y),r=r*-this.anchor.y,t=t||this.worldTransform,a=t.a,c=t.b,l=t.c,u=t.d,d=t.tx,t=t.ty,p=-1/0,y=-1/0,f=1/0,T=1/0,y=0===c&&0===l?(p=a<0?(f=a*h+d,a*s+d):(f=a*s+d,a*h+d),u<0?(T=u*o+t,u*r+t):(T=u*r+t,u*o+t)):(f=(n=a*s+l*o+d)<(f=(e=a*h+l*o+d)<(f=(i=a*h+l*r+d)<(f=(a=a*s+l*r+d)<f?a:f)?i:f)?e:f)?n:f,T=(l=u*o+c*s+t)<(T=(d=u*o+c*h+t)<(T=(o=u*r+c*h+t)<(T=(h=u*r+c*s+t)<T?h:T)?o:T)?d:T)?l:T,p=(p=(p=(p=p<a?a:p)<i?i:p)<e?e:p)<n?n:p,(y=(y=(y=y<h?h:y)<o?o:y)<d?d:y)<l?l:y),u=this._bounds;return u.x=f,u.width=p-f,u.y=T,u.height=y-T,this._currentBounds=u},Tiny.Sprite.prototype.render=function(t){if(!(!1===this.visible||0===this.alpha||!1===this.renderable||this.texture.crop.width<=0||this.texture.crop.height<=0)){var i,e,n;this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,t.context.globalCompositeOperation=t.currentBlendMode),this._mask&&t.maskManager.pushMask(this._mask,t),this.texture.valid&&(i=this.texture.resolution/t.resolution,t.context.globalAlpha=this.worldAlpha,e=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,n=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height,t.roundPixels?(t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution|0,this.worldTransform.ty*t.resolution|0),e|=0,n|=0):t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution,this.worldTransform.ty*t.resolution),"#FFFFFF"!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=Tiny.CanvasTinter.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,e/i,n/i,this.texture.crop.width/i,this.texture.crop.height/i)):t.context.drawImage(this.texture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,e/i,n/i,this.texture.crop.width/i,this.texture.crop.height/i));for(var s=0;s<this.children.length;s++)this.children[s].render(t);this._mask&&t.maskManager.popMask(t)}}},function(t,i){Tiny.Text=function(t,i){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=1,Tiny.Sprite.call(this,Tiny.Texture.fromCanvas(this.canvas)),this.setText(t),this.setStyle(i)},Tiny.Text.prototype=Object.create(Tiny.Sprite.prototype),Tiny.Text.prototype.constructor=Tiny.Text,Object.defineProperty(Tiny.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(Tiny.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),Tiny.Text.prototype.setStyle=function(t){(t=t||{}).font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.lineSpacing=t.lineSpacing||0,t.wordWrapWidth=void 0!==t.wordWrapWidth?t.wordWrapWidth:100,t.dropShadow=t.dropShadow||!1,t.dropShadowAngle=void 0!==t.dropShadowAngle?t.dropShadowAngle:Math.PI/6,t.dropShadowDistance=void 0!==t.dropShadowDistance?t.dropShadowDistance:4,t.dropShadowColor=t.dropShadowColor||"black",this.style=t,this.dirty=!0},Tiny.Text.prototype.setText=function(t){this.text=t.toString()||" ",this.dirty=!0},Tiny.Text.prototype.updateText=function(){this.texture.resolution=this.resolution,this.context.font=this.style.font;for(var t=this.text,i=(t=this.style.wordWrap?this.wordWrap(this.text):t).split(/(?:\r\n|\r|\n)/),e=[],n=0,s=this.determineFontProperties(this.style.font),r=0;r<i.length;r++){var h=this.context.measureText(i[r]).width;e[r]=h,n=Math.max(n,h)}var o,a,t=n+this.style.strokeThickness,c=(this.style.dropShadow&&(t+=this.style.dropShadowDistance),this.canvas.width=(t+this.context.lineWidth)*this.resolution,s.fontSize+this.style.strokeThickness+this.style.lineSpacing),t=c*i.length;if(this.style.dropShadow&&(t+=this.style.dropShadowDistance),this.canvas.height=(t-this.style.lineSpacing)*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="alphabetic",this.context.miterLimit=2,this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;for(var l=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,u=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance,r=0;r<i.length;r++)o=this.style.strokeThickness/2,a=this.style.strokeThickness/2+r*c+s.ascent,"right"===this.style.align?o+=n-e[r]:"center"===this.style.align&&(o+=(n-e[r])/2),this.style.fill&&this.context.fillText(i[r],o+l,a+u)}for(this.context.fillStyle=this.style.fill,r=0;r<i.length;r++)o=this.style.strokeThickness/2,a=this.style.strokeThickness/2+r*c+s.ascent,"right"===this.style.align?o+=n-e[r]:"center"===this.style.align&&(o+=(n-e[r])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(i[r],o,a),this.style.fill&&this.context.fillText(i[r],o,a);this.updateTexture()},Tiny.Text.prototype.updateTexture=function(){this.texture.width=this.canvas.width,this.texture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height},Tiny.Text.prototype.render=function(t){!this.dirty&&this.resolution===t.resolution||(this.resolution=t.resolution,this.updateText(),this.dirty=!1),Tiny.Sprite.prototype.render.call(this,t)},Tiny.Text.prototype.determineFontProperties=function(t){if(!(e=Tiny.Text.fontPropertiesCache[t])){for(var i,e={},n=Tiny.Text.fontPropertiesCanvas,s=Tiny.Text.fontPropertiesContext,r=(s.font=t,Math.ceil(s.measureText("|MÉq").width)),h=2*(o=Math.ceil(s.measureText("|MÉq").width)),o=1.4*o|0,a=(n.width=r,n.height=h,s.fillStyle="#f00",s.fillRect(0,0,r,h),s.font=t,s.textBaseline="alphabetic",s.fillStyle="#000",s.fillText("|MÉq",0,o),s.getImageData(0,0,r,h).data),n=a.length,c=4*r,l=0,u=!1,d=0;d<o;d++){for(i=0;i<c;i+=4)if(255!==a[l+i]){u=!0;break}if(u)break;l+=c}for(e.ascent=o-d,l=n-c,u=!1,d=h;o<d;d--){for(i=0;i<c;i+=4)if(255!==a[l+i]){u=!0;break}if(u)break;l-=c}e.descent=d-o,e.descent+=6,e.fontSize=e.ascent+e.descent,Tiny.Text.fontPropertiesCache[t]=e}return e},Tiny.Text.prototype.wordWrap=function(t){for(var i="",e=t.split("\n"),n=0;n<e.length;n++){for(var s=this.style.wordWrapWidth,r=e[n].split(" "),h=0;h<r.length;h++){var o=this.context.measureText(r[h]).width,a=o+this.context.measureText(" ").width;0===h||s<a?(0<h&&(i+="\n"),i+=r[h],s=this.style.wordWrapWidth-o):(s-=a,i+=" "+r[h])}n<e.length-1&&(i+="\n")}return i},Tiny.Text.prototype.getBounds=function(t){return this.dirty&&(this.updateText(),this.dirty=!1),Tiny.Sprite.prototype.getBounds.call(this,t)},Tiny.Text.prototype.destroy=function(){this.context=null,this.canvas=null,this.texture.destroy(),Tiny.Sprite.prototype.destroy.call(this)},Tiny.Text.fontPropertiesCache={},Tiny.Text.fontPropertiesCanvas=document.createElement("canvas"),Tiny.Text.fontPropertiesContext=Tiny.Text.fontPropertiesCanvas.getContext("2d")},function(t,i,e){e(12),e(22),e(23),e(24),e(25),e(26),e(27),e(28),e(29),e(30),e(31)},function(t,i){function e(){this._tweens={},this._tweensAddedDuringUpdate={}}e.prototype={getAll:function(){return Object.keys(this._tweens).map(function(t){return this._tweens[t]}.bind(this))},removeAll:function(){this._tweens={}},add:function(t){this._tweens[t.getId()]=t,this._tweensAddedDuringUpdate[t.getId()]=t},remove:function(t){delete this._tweens[t.getId()],delete this._tweensAddedDuringUpdate[t.getId()]},update:function(t,i){var e=Object.keys(this._tweens);if(0===e.length)return!1;for(;0<e.length;){this._tweensAddedDuringUpdate={};for(var n=0;n<e.length;n++){var s=this._tweens[e[n]];s&&!1===s.update(t)&&(s._isPlaying=!1,i||delete this._tweens[e[n]])}e=Object.keys(this._tweensAddedDuringUpdate)}return!0}};var n,o=new e;o.Group=e,o._nextId=0,o.nextId=function(){return o._nextId++},o.Tween=function(t,i){this._isPaused=!1,this._object=t,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._repeat=0,this._repeatDelayTime=void 0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=null,this._time=0,this._easingFunction=o.Easing.Linear.None,this._interpolationFunction=o.Interpolation.Linear,this._chainedTweens=[],this._onStartCallback=null,this._onStartCallbackFired=!1,this._onUpdateCallback=null,this._onRepeatCallback=null,this._onCompleteCallback=null,this._onStopCallback=null,this._group=i||o,this._id=o.nextId()},o.Tween.prototype={getId:function(){return this._id},isPlaying:function(){return this._isPlaying},isPaused:function(){return this._isPaused},to:function(t,i){return this._valuesEnd=Object.create(t),void 0!==i&&(this._duration=i),this},duration:function(t){return this._duration=t,this},start:function(t){for(var i in this._group.add(this),this._isPlaying=!0,this._isPaused=!1,this._time=0,this._onStartCallbackFired=!1,this._startTime=this._delayTime,this._valuesEnd){if(this._valuesEnd[i]instanceof Array){if(0===this._valuesEnd[i].length)continue;this._valuesEnd[i]=[this._object[i]].concat(this._valuesEnd[i])}void 0!==this._object[i]&&(void 0===this._valuesStart[i]&&(this._valuesStart[i]=this._object[i]),this._valuesStart[i]instanceof Array==!1&&(this._valuesStart[i]*=1),this._valuesStartRepeat[i]=this._valuesStart[i]||0)}return this},stop:function(){return this._isPlaying&&(this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,null!==this._onStopCallback&&this._onStopCallback(this._object),this.stopChainedTweens()),this},end:function(){return this.update(1/0,1/0),this},pause:function(){return this._isPaused||!this._isPlaying||(this._isPaused=!0,this._group.remove(this)),this},resume:function(){return this._isPaused&&this._isPlaying&&(this._isPaused=!1,this._group.add(this)),this},stopChainedTweens:function(){for(var t=0,i=this._chainedTweens.length;t<i;t++)this._chainedTweens[t].stop()},group:function(t){return this._group=t,this},delay:function(t){return this._delayTime=t,this},repeat:function(t){return this._repeat=t,this},repeatDelay:function(t){return this._repeatDelayTime=t,this},yoyo:function(t){return this._yoyo=t,this},easing:function(t){return this._easingFunction=t,this},interpolation:function(t){return this._interpolationFunction=t,this},chain:function(){return this._chainedTweens=arguments,this},onStart:function(t){return this._onStartCallback=t,this},onUpdate:function(t){return this._onUpdateCallback=t,this},onRepeat:function(t){return this._onRepeatCallback=t,this},onComplete:function(t){return this._onCompleteCallback=t,this},onStop:function(t){return this._onStopCallback=t,this},update:function(t){var i,e,n,s,r;if(this._time+=t,this._time<this._startTime)return!0;for(i in!1===this._onStartCallbackFired&&(null!==this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),t=(this._time-this._startTime)/this._duration,t=0===this._duration||1<t?1:t,e=this._easingFunction(t),this._valuesEnd)void 0!==this._valuesStart[i]&&(n=this._valuesStart[i]||0,(s=this._valuesEnd[i])instanceof Array?this._object[i]=this._interpolationFunction(s,e):"number"==typeof(s="string"==typeof s?"+"===s.charAt(0)||"-"===s.charAt(0)?n+parseFloat(s):parseFloat(s):s)&&(this._object[i]=n+(s-n)*e));if(null!==this._onUpdateCallback&&this._onUpdateCallback(this._object,t),1!==t)return!0;if((this._time=0)<this._repeat){for(i in isFinite(this._repeat)&&this._repeat--,this._valuesStartRepeat)"string"==typeof this._valuesEnd[i]&&(this._valuesStartRepeat[i]=this._valuesStartRepeat[i]+parseFloat(this._valuesEnd[i])),this._yoyo&&(r=this._valuesStartRepeat[i],this._valuesStartRepeat[i]=this._valuesEnd[i],this._valuesEnd[i]=r),this._valuesStart[i]=this._valuesStartRepeat[i];return this._yoyo&&(this._reversed=!this._reversed),void 0!==this._repeatDelayTime?this._startTime=this._repeatDelayTime:this._startTime=this._delayTime,null!==this._onRepeatCallback&&this._onRepeatCallback(this._object),!0}null!==this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var h=0,o=this._chainedTweens.length;h<o;h++)this._chainedTweens[h].start();return!1}},o.Easing={Linear:{None:function(t){return t}},Quadratic:{In:function(t){return t*t},Out:function(t){return t*(2-t)},InOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)}},Cubic:{In:function(t){return t*t*t},Out:function(t){return--t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)}},Quartic:{In:function(t){return t*t*t*t},Out:function(t){return 1- --t*t*t*t},InOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)}},Quintic:{In:function(t){return t*t*t*t*t},Out:function(t){return--t*t*t*t*t+1},InOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)}},Sinusoidal:{In:function(t){return 1-Math.cos(t*Math.PI/2)},Out:function(t){return Math.sin(t*Math.PI/2)},InOut:function(t){return.5*(1-Math.cos(Math.PI*t))}},Exponential:{In:function(t){return 0===t?0:Math.pow(1024,t-1)},Out:function(t){return 1===t?1:1-Math.pow(2,-10*t)},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))}},Circular:{In:function(t){return 1-Math.sqrt(1-t*t)},Out:function(t){return Math.sqrt(1- --t*t)},InOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)}},Elastic:{In:function(t){return 0===t?0:1===t?1:-Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)},Out:function(t){return 0===t?0:1===t?1:Math.pow(2,-10*t)*Math.sin(5*(t-.1)*Math.PI)+1},InOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?-.5*Math.pow(2,10*(t-1))*Math.sin(5*(t-1.1)*Math.PI):.5*Math.pow(2,-10*(t-1))*Math.sin(5*(t-1.1)*Math.PI)+1}},Back:{In:function(t){return t*t*(2.70158*t-1.70158)},Out:function(t){return--t*t*(2.70158*t+1.70158)+1},InOut:function(t){var i=2.5949095;return(t*=2)<1?t*t*((1+i)*t-i)*.5:.5*((t-=2)*t*((1+i)*t+i)+2)}},Bounce:{In:function(t){return 1-o.Easing.Bounce.Out(1-t)},Out:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},InOut:function(t){return t<.5?.5*o.Easing.Bounce.In(2*t):.5*o.Easing.Bounce.Out(2*t-1)+.5}}},o.Interpolation={Linear:function(t,i){var e=t.length-1,n=e*i,s=Math.floor(n),r=o.Interpolation.Utils.Linear;return i<0?r(t[0],t[1],n):1<i?r(t[e],t[e-1],e-n):r(t[s],t[e<s+1?e:s+1],n-s)},Bezier:function(t,i){for(var e=0,n=t.length-1,s=Math.pow,r=o.Interpolation.Utils.Bernstein,h=0;h<=n;h++)e+=s(1-i,n-h)*s(i,h)*t[h]*r(n,h);return e},CatmullRom:function(t,i){var e=t.length-1,n=e*i,s=Math.floor(n),r=o.Interpolation.Utils.CatmullRom;return t[0]===t[e]?r(t[((s=i<0?Math.floor(n=e*(1+i)):s)-1+e)%e],t[s],t[(s+1)%e],t[(s+2)%e],n-s):i<0?t[0]-(r(t[0],t[0],t[1],t[1],-n)-t[0]):1<i?t[e]-(r(t[e],t[e],t[e-1],t[e-1],n-e)-t[e]):r(t[s?s-1:0],t[s],t[e<s+1?e:s+1],t[e<s+2?e:s+2],n-s)},Utils:{Linear:function(t,i,e){return(i-t)*e+t},Bernstein:function(t,i){var e=o.Interpolation.Utils.Factorial;return e(t)/e(i)/e(t-i)},Factorial:(n=[1],function(t){var i=1;if(n[t])return n[t];for(var e=t;1<e;e--)i*=e;return n[t]=i}),CatmullRom:function(t,i,e,n,s){var t=.5*(e-t),n=.5*(n-i),r=s*s;return(2*i-2*e+t+n)*(s*r)+(-3*i+3*e-2*t-n)*r+t*s+i}}},window.TWEEN=o,Tiny.TweenManager=function(t){this.game=t,this.bufferList=[],this.group=new e},Tiny.TweenManager.prototype={add:function(t){return new o.Tween(t,this.group)},pause:function(){for(var t in this.bufferList.length=0,this.group._tweens)this.bufferList.push(this.group._tweens[t]),this.group._tweens[t].pause()},resume(){this.bufferList.forEach(function(t){t.resume()}),this.bufferList.length=0},update:function(t){this.group.update(t)},destroy:function(){this.bufferList.length=0,this.group.removeAll(),this.group=null}},Tiny.registerSystem("tweens",Tiny.TweenManager)},function(t,i){Tiny.RoundedRectangle=function(t,i,e,n,s){this.x=t||0,this.y=i||0,this.width=e||0,this.height=n||0,this.radius=s||20,this.type=Tiny.Primitives.RREC},Tiny.RoundedRectangle.prototype.clone=function(){return new Tiny.RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)},Tiny.RoundedRectangle.prototype.contains=function(t,i){if(this.width<=0||this.height<=0)return!1;var e=this.x;if(e<=t&&t<=e+this.width){t=this.y;if(t<=i&&i<=t+this.height)return!0}return!1},Tiny.RoundedRectangle.prototype.constructor=Tiny.RoundedRectangle},function(t,i){Tiny.Polygon=function(){this.area=0,this._points=[],0<arguments.length&&this.setTo.apply(this,arguments),this.closed=!0,this.type=Tiny.Primitives.POLY},Tiny.Polygon.prototype={toNumberArray:function(t){void 0===t&&(t=[]);for(var i=0;i<this._points.length;i++)"number"==typeof this._points[i]?(t.push(this._points[i]),t.push(this._points[i+1]),i++):(t.push(this._points[i].x),t.push(this._points[i].y));return t},flatten:function(){return this._points=this.toNumberArray(),this},clone:function(t){var i=this._points.slice();return null==t?t=new Tiny.Polygon(i):t.setTo(i),t},contains:function(t,i){for(var e=this._points.length,n=!1,s=-1,r=e-1;++s<e;r=s){var h=this._points[s].x,o=this._points[s].y,a=this._points[r].x,c=this._points[r].y;(o<=i&&i<c||c<=i&&i<o)&&t<(a-h)*(i-o)/(c-o)+h&&(n=!n)}return n},setTo:function(t){if(this.area=0,this._points=[],0<arguments.length){Array.isArray(t)||(t=Array.prototype.slice.call(arguments));for(var i,e=Number.MAX_VALUE,n=0,s=t.length;n<s;n++)"number"==typeof t[n]?(i=new Tiny.Point(t[n],t[n+1]),n++):i=new Tiny.Point(t[n].x,t[n].y),this._points.push(i),i.y<e&&(e=i.y);this.calculateArea(e)}return this},calculateArea:function(t){for(var i,e,n,s=0,r=this._points.length;s<r;s++)n=this._points[s],i=s===r-1?this._points[0]:this._points[s+1],e=(n.y-t+(i.y-t))/2,n=n.x-i.x,this.area+=e*n;return this.area}},Tiny.Polygon.prototype.constructor=Tiny.Polygon,Object.defineProperty(Tiny.Polygon.prototype,"points",{get:function(){return this._points},set:function(t){null!=t?this.setTo(t):this.setTo()}})},function(t,i){Tiny.Circle=function(t,i,e){i=i||0,e=e||0,this.x=t=t||0,this.y=i,this._diameter=e,(this._radius=0)<e&&(this._radius=.5*e),this.type=Tiny.Primitives.CIRC},Tiny.Circle.prototype={getBounds:function(){return new Tiny.Rectangle(this.x-this.radius,this.y-this.radius,this.diameter,this.diameter)},setTo:function(t,i,e){return this.x=t,this.y=i,this._diameter=e,this._radius=.5*e,this},copyFrom:function(t){return this.setTo(t.x,t.y,t.diameter)},copyTo:function(t){return t.x=this.x,t.y=this.y,t.diameter=this._diameter,t},distance:function(t,i){t=Tiny.Math.distance(this.x,this.y,t.x,t.y);return i?Math.round(t):t},clone:function(t){return null==t?t=new Tiny.Circle(this.x,this.y,this.diameter):t.setTo(this.x,this.y,this.diameter),t},contains:function(t,i){return Tiny.Circle.contains(this,t,i)},offset:function(t,i){return this.x+=t,this.y+=i,this},offsetPoint:function(t){return this.offset(t.x,t.y)}},Tiny.Circle.prototype.constructor=Tiny.Circle,Object.defineProperty(Tiny.Circle.prototype,"diameter",{get:function(){return this._diameter},set:function(t){0<t&&(this._diameter=t,this._radius=.5*t)}}),Object.defineProperty(Tiny.Circle.prototype,"radius",{get:function(){return this._radius},set:function(t){0<t&&(this._radius=t,this._diameter=2*t)}}),Object.defineProperty(Tiny.Circle.prototype,"left",{get:function(){return this.x-this._radius},set:function(t){t>this.x?(this._radius=0,this._diameter=0):this.radius=this.x-t}}),Object.defineProperty(Tiny.Circle.prototype,"right",{get:function(){return this.x+this._radius},set:function(t){t<this.x?(this._radius=0,this._diameter=0):this.radius=t-this.x}}),Object.defineProperty(Tiny.Circle.prototype,"top",{get:function(){return this.y-this._radius},set:function(t){t>this.y?(this._radius=0,this._diameter=0):this.radius=this.y-t}}),Object.defineProperty(Tiny.Circle.prototype,"bottom",{get:function(){return this.y+this._radius},set:function(t){t<this.y?(this._radius=0,this._diameter=0):this.radius=t-this.y}}),Object.defineProperty(Tiny.Circle.prototype,"area",{get:function(){return 0<this._radius?Math.PI*this._radius*this._radius:0}}),Object.defineProperty(Tiny.Circle.prototype,"empty",{get:function(){return 0===this._diameter},set:function(t){!0===t&&this.setTo(0,0,0)}}),Tiny.Circle.contains=function(t,i,e){return 0<t.radius&&i>=t.left&&i<=t.right&&e>=t.top&&e<=t.bottom&&(t.x-i)*(t.x-i)+(t.y-e)*(t.y-e)<=t.radius*t.radius},Tiny.Circle.equals=function(t,i){return t.x==i.x&&t.y==i.y&&t.diameter==i.diameter},Tiny.Circle.intersects=function(t,i){return Tiny.Math.distance(t.x,t.y,i.x,i.y)<=t.radius+i.radius},Tiny.Circle.intersectsRectangle=function(t,i){var e=Math.abs(t.x-i.x-i.halfWidth);if(i.halfWidth+t.radius<e)return!1;var n=Math.abs(t.y-i.y-i.halfHeight);if(i.halfHeight+t.radius<n)return!1;if(e<=i.halfWidth||n<=i.halfHeight)return!0;e-=i.halfWidth,n-=i.halfHeight;return e*e+n*n<=t.radius*t.radius}},function(t,i){Tiny.CanvasGraphics=function(){},Tiny.CanvasGraphics.renderGraphics=function(t,i){var e=t.worldAlpha;t.dirty&&(this.updateGraphicsTint(t),t.dirty=!1);for(var n=0;n<t.graphicsData.length;n++){var s,r,h,o,a,c,l,u,d=t.graphicsData[n],p=d.shape,y=d._fillTint,f=d._lineTint;if(i.lineWidth=d.lineWidth,d.type===Tiny.Primitives.POLY){i.beginPath();var T=p.points;i.moveTo(T[0],T[1]);for(var g=1;g<T.length/2;g++)i.lineTo(T[2*g],T[2*g+1]);p.closed&&i.lineTo(T[0],T[1]),T[0]===T[T.length-2]&&T[1]===T[T.length-1]&&i.closePath(),d.fill&&(i.globalAlpha=d.fillAlpha*e,i.fillStyle=Tiny.color2style(y),i.fill()),d.lineWidth&&(i.globalAlpha=d.lineAlpha*e,i.strokeStyle=Tiny.color2style(f),i.stroke())}else d.type===Tiny.Primitives.RECT?(!d.fillColor&&0!==d.fillColor||(i.globalAlpha=d.fillAlpha*e,i.fillStyle=Tiny.color2style(y),i.fillRect(p.x,p.y,p.width,p.height)),d.lineWidth&&(i.globalAlpha=d.lineAlpha*e,i.strokeStyle=Tiny.color2style(f),i.strokeRect(p.x,p.y,p.width,p.height))):d.type===Tiny.Primitives.CIRC?(i.beginPath(),i.arc(p.x,p.y,p.radius,0,2*Math.PI),i.closePath(),d.fill&&(i.globalAlpha=d.fillAlpha*e,i.fillStyle=Tiny.color2style(y),i.fill()),d.lineWidth&&(i.globalAlpha=d.lineAlpha*e,i.strokeStyle=Tiny.color2style(f),i.stroke())):d.type===Tiny.Primitives.ELIP?(a=2*p.width,r=2*p.height,s=p.x-a/2,h=p.y-r/2,i.beginPath(),c=a/2*.5522848,l=r/2*.5522848,o=s+a,u=h+r,a=s+a/2,i.moveTo(s,r=h+r/2),i.bezierCurveTo(s,r-l,a-c,h,a,h),i.bezierCurveTo(a+c,h,o,r-l,o,r),i.bezierCurveTo(o,r+l,a+c,u,a,u),i.bezierCurveTo(a-c,u,s,r+l,s,r),i.closePath(),d.fill&&(i.globalAlpha=d.fillAlpha*e,i.fillStyle=Tiny.color2style(y),i.fill()),d.lineWidth&&(i.globalAlpha=d.lineAlpha*e,i.strokeStyle=Tiny.color2style(f),i.stroke())):d.type===Tiny.Primitives.RREC&&(h=p.x,o=p.y,a=p.width,c=p.height,u=p.radius,u=(l=Math.min(a,c)/2|0)<u?l:u,i.beginPath(),i.moveTo(h,o+u),i.lineTo(h,o+c-u),i.quadraticCurveTo(h,o+c,h+u,o+c),i.lineTo(h+a-u,o+c),i.quadraticCurveTo(h+a,o+c,h+a,o+c-u),i.lineTo(h+a,o+u),i.quadraticCurveTo(h+a,o,h+a-u,o),i.lineTo(h+u,o),i.quadraticCurveTo(h,o,h,o+u),i.closePath(),!d.fillColor&&0!==d.fillColor||(i.globalAlpha=d.fillAlpha*e,i.fillStyle=Tiny.color2style(y),i.fill()),d.lineWidth&&(i.globalAlpha=d.lineAlpha*e,i.strokeStyle=Tiny.color2style(f),i.stroke()))}},Tiny.CanvasGraphics.renderGraphicsMask=function(t,i){var e=t.graphicsData.length;if(0!==e){i.beginPath();for(var n=0;n<e;n++){var s,r,h,o,a,c,l,u,d=t.graphicsData[n],p=d.shape;if(d.type===Tiny.Primitives.POLY){var y=p.points;i.moveTo(y[0],y[1]);for(var f=1;f<y.length/2;f++)i.lineTo(y[2*f],y[2*f+1]);y[0]===y[y.length-2]&&y[1]===y[y.length-1]&&i.closePath()}else d.type===Tiny.Primitives.RECT?(i.rect(p.x,p.y,p.width,p.height),i.closePath()):d.type===Tiny.Primitives.CIRC?(i.arc(p.x,p.y,p.radius,0,2*Math.PI),i.closePath()):d.type===Tiny.Primitives.ELIP?(c=(a=2*p.width)/2*.5522848,l=(r=2*p.height)/2*.5522848,o=(s=p.x-a/2)+a,u=(h=p.y-r/2)+r,a=s+a/2,i.moveTo(s,r=h+r/2),i.bezierCurveTo(s,r-l,a-c,h,a,h),i.bezierCurveTo(a+c,h,o,r-l,o,r),i.bezierCurveTo(o,r+l,a+c,u,a,u),i.bezierCurveTo(a-c,u,s,r+l,s,r),i.closePath()):d.type!==Tiny.Primitives.RREC&&d.type!==Tiny.Primitives.RREC_LJOIN||(h=p.x,o=p.y,a=p.width,c=p.height,u=p.radius,l=Math.min(a,c)/2|0,i.moveTo(h,o+(u=l<u?l:u)),i.lineTo(h,o+c-u),i.quadraticCurveTo(h,o+c,h+u,o+c),i.lineTo(h+a-u,o+c),i.quadraticCurveTo(h+a,o+c,h+a,o+c-u),i.lineTo(h+a,o+u),i.quadraticCurveTo(h+a,o,h+a-u,o),i.lineTo(h+u,o),i.quadraticCurveTo(h,o,h,o+u),i.closePath())}}},Tiny.CanvasGraphics.updateGraphicsTint=function(t){if(16777215!==t.tint)for(var i=(t.tint>>16&255)/255,e=(t.tint>>8&255)/255,n=(255&t.tint)/255,s=0;s<t.graphicsData.length;s++){var r=t.graphicsData[s],h=0|r.fillColor,o=0|r.lineColor;r._fillTint=((h>>16&255)/255*i*255<<16)+((h>>8&255)/255*e*255<<8)+(255&h)/255*n*255,r._lineTint=((o>>16&255)/255*i*255<<16)+((o>>8&255)/255*e*255<<8)+(255&o)/255*n*255}}},function(t,i){Tiny.GraphicsData=function(t,i,e,n,s,r,h){this.lineWidth=t,this.lineColor=i,this.lineAlpha=e,this._lineTint=i,this.fillColor=n,this.fillAlpha=s,this._fillTint=n,this.fill=r,this.shape=h,this.type=h.type},Tiny.GraphicsData.prototype.constructor=Tiny.GraphicsData,Tiny.GraphicsData.prototype.clone=function(){return new GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.shape)},Tiny.Graphics=function(){Tiny.Object2D.call(this),this.renderable=!0,this.fillAlpha=1,this.lineWidth=0,this.lineColor=0,this.graphicsData=[],this.tint="#FFFFFF",this.blendMode="source-over",this.currentPath=null,this.isMask=!1,this.boundsPadding=0,this._localBounds=new Tiny.Rectangle(0,0,1,1),this._boundsDirty=!0,this.cachedSpriteDirty=!1},Tiny.Graphics.prototype=Object.create(Tiny.Object2D.prototype),Tiny.Graphics.prototype.constructor=Tiny.Graphics,Tiny.Graphics.prototype.lineStyle=function(t,i,e){return this.lineWidth=t||0,this.lineColor=i||"#000000",this.lineAlpha=void 0===e?1:e,this.currentPath&&(this.currentPath.shape.points.length?this.drawShape(new Tiny.Polygon(this.currentPath.shape.points.slice(-2))):(this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha)),this},Tiny.Graphics.prototype.moveTo=function(t,i){return this.drawShape(new Tiny.Polygon([t,i])),this},Tiny.Graphics.prototype.lineTo=function(t,i){return this.currentPath||this.moveTo(0,0),this.currentPath.shape.points.push(t,i),this._boundsDirty=!0,this.cachedSpriteDirty=!0,this},Tiny.Graphics.prototype.quadraticCurveTo=function(t,i,e,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var s,r,h=this.currentPath.shape.points,o=(0===h.length&&this.moveTo(0,0),h[h.length-2]),a=h[h.length-1],c=1;c<=20;++c)h.push((s=o+(t-o)*(r=c/20))+(t+(e-t)*r-s)*r,(s=a+(i-a)*r)+(i+(n-i)*r-s)*r);return this._boundsDirty=!0,this.cachedSpriteDirty=!0,this},Tiny.Graphics.prototype.bezierCurveTo=function(t,i,e,n,s,r){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);for(var h,o,a,c,l,u,d=this.currentPath.shape.points,p=d[d.length-2],y=d[d.length-1],f=1;f<=20;++f)d.push((a=(o=(h=1-(u=f/20))*h)*h)*p+3*o*u*t+3*h*(c=u*u)*e+(l=c*u)*s,a*y+3*o*u*i+3*h*c*n+l*r);return this._boundsDirty=!0,this.cachedSpriteDirty=!0,this},Tiny.Graphics.prototype.arcTo=function(t,i,e,n,s){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(t,i):this.moveTo(t,i);var r,h,o,a,c,l=this.currentPath.shape.points,u=l[l.length-2],d=l[l.length-1]-i,u=u-t,n=n-i,e=e-t,p=Math.abs(d*e-u*n);return p<1e-8||0===s?l[l.length-2]===t&&l[l.length-1]===i||l.push(t,i):(l=d*d+u*u,o=n*n+e*e,c=d*n+u*e,l=(a=s*Math.sqrt(l)/p)*c/l,r=a*e+(p=s*Math.sqrt(o)/p)*u,h=a*n+p*d,o=e*(a+(c=p*c/o)),a=n*(a+c),c=Math.atan2(d*(p+l)-h,u*(p+l)-r),p=Math.atan2(a-h,o-r),this.arc(r+t,h+i,s,c,p,e*d<u*n)),this._boundsDirty=!0,this.cachedSpriteDirty=!0,this},Tiny.Graphics.prototype.arc=function(t,i,e,n,s,r){if(n===s)return this;!(r=void 0===r?!1:r)&&s<=n?s+=2*Math.PI:r&&n<=s&&(n+=2*Math.PI);var s=r?-1*(n-s):s-n,h=40*Math.ceil(Math.abs(s)/(2*Math.PI));if(0==s)return this;for(var o=t+Math.cos(n)*e,a=i+Math.sin(n)*e,c=(r&&this.filling?this.moveTo(t,i):this.moveTo(o,a),this.currentPath.shape.points),l=s/(2*h),u=2*l,d=Math.cos(l),p=Math.sin(l),y=h-1,f=y%1/y,T=0;T<=y;T++){var g=l+n+u*(T+f*T),m=Math.cos(g),g=-Math.sin(g);c.push((d*m+p*g)*e+t,(d*-g+p*m)*e+i)}return this._boundsDirty=!0,this.cachedSpriteDirty=!0,this},Tiny.Graphics.prototype.beginFill=function(t,i){return this.filling=!0,this.fillColor=t||"#000000",this.fillAlpha=void 0===i?1:i,this.currentPath&&this.currentPath.shape.points.length<=2&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},Tiny.Graphics.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},Tiny.Graphics.prototype.drawRect=function(t,i,e,n){return this.drawShape(new Tiny.Rectangle(t,i,e,n)),this},Tiny.Graphics.prototype.drawRoundedRect=function(t,i,e,n,s){return this.drawShape(new Tiny.RoundedRectangle(t,i,e,n,s)),this},Tiny.Graphics.prototype.drawCircle=function(t,i,e){return this.drawShape(new Tiny.Circle(t,i,e)),this},Tiny.Graphics.prototype.drawPolygon=function(t){var i=t;if(!Array.isArray(i))for(var i=new Array(arguments.length),e=0;e<i.length;++e)i[e]=arguments[e];return this.drawShape(new Tiny.Polygon(i)),this},Tiny.Graphics.prototype.clear=function(){return this.lineWidth=0,this.filling=!1,this._boundsDirty=!0,this.cachedSpriteDirty=!0,this.graphicsData=[],this.updateLocalBounds(),this},Tiny.Graphics.prototype.destroy=function(t){Tiny.Object2D.prototype.destroy.call(this),this.clear()},Tiny.Graphics.prototype.generateTexture=function(t){t=t||1;var i=this.getBounds(),e=new Tiny.CanvasBuffer(i.width*t,i.height*t),n=Tiny.Texture.fromCanvas(e.canvas);return n.resolution=t,e.context.scale(t,t),e.context.translate(-i.x,-i.y),Tiny.CanvasGraphics.renderGraphics(this,e.context),n},Tiny.Graphics.prototype.render=function(t){if(!0!==this.isMask)if(this._prevTint!==this.tint&&(this._boundsDirty=!0,this._prevTint=this.tint),this._cacheAsBitmap)this.cachedSpriteDirty&&(this._generateCachedSprite(),this.updateCachedSpriteTexture(),this.cachedSpriteDirty=!1,this._boundsDirty=!1),this._cachedSprite.alpha=this.alpha,Tiny.Sprite.prototype.render.call(this._cachedSprite,t);else{var i=t.context,e=this.worldTransform,n=(this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,i.globalCompositeOperation=t.currentBlendMode),this._mask&&t.maskManager.pushMask(this._mask,t),t.resolution);i.setTransform(e.a*n,e.b*n,e.c*n,e.d*n,e.tx*n,e.ty*n),Tiny.CanvasGraphics.renderGraphics(this,i);for(var s=0;s<this.children.length;s++)this.children[s].render(t);this._mask&&t.maskManager.popMask(t)}},Tiny.Graphics.prototype.getBounds=function(t){if(!this._currentBounds||this._boundsDirty){if(!this.renderable)return Tiny.EmptyRectangle;this._boundsDirty&&(this.updateLocalBounds(),this.cachedSpriteDirty=!0,this._boundsDirty=!1);var i=this._localBounds,e=i.x,n=i.width+i.x,s=i.y,i=i.height+i.y,t=t||this.worldTransform,r=t.a,h=t.b,o=t.c,a=t.d,c=t.tx,t=t.ty,l=r*n+o*i+c,u=a*i+h*n+t,d=r*e+o*i+c,i=a*i+h*e+t,p=r*e+o*s+c,e=a*s+h*e+t,r=r*n+o*s+c,o=a*s+h*n+t,c=d<(c=l)?d:c,a=o<(a=e<(a=i<(a=u)?i:a)?e:a)?o:a,s=(s=(s=(s=l)<d?d:s)<p?p:s)<r?r:s,h=(h=(h=(h=u)<i?i:h)<e?e:h)<o?o:h;this._bounds.x=c=r<(c=p<c?p:c)?r:c,this._bounds.width=s-c,this._bounds.y=a,this._bounds.height=h-a,this._currentBounds=this._bounds}return this._currentBounds},Tiny.Graphics.prototype.containsPoint=function(t){this.worldTransform.applyInverse(t,tempPoint);for(var i=this.graphicsData,e=0;e<i.length;e++){var n=i[e];if(n.fill&&(n.shape&&n.shape.contains(tempPoint.x,tempPoint.y)))return!0}return!1},Tiny.Graphics.prototype.updateLocalBounds=function(){var t=1/0,i=-1/0,e=1/0,n=-1/0;if(this.graphicsData.length)for(var s,r,h,o,a=0;a<this.graphicsData.length;a++){var c=this.graphicsData[a],l=c.type,u=c.lineWidth,c=c.shape;if(l===Tiny.Primitives.RECT||l===Tiny.Primitives.RREC||l===Tiny.Primitives.RREC_LJOIN)s=c.x-u/2,r=c.y-u/2,t=s<t?s:t,i=i<s+(h=c.width+u)?s+h:i,e=r<e?r:e,n=n<r+(o=c.height+u)?r+o:n;else if(l===Tiny.Primitives.CIRC)s=c.x,r=c.y,t=s-(h=c.radius+u/2)<t?s-h:t,i=i<s+h?s+h:i,e=r-(o=c.radius+u/2)<e?r-o:e,n=n<r+o?r+o:n;else if(l===Tiny.Primitives.ELIP)s=c.x,r=c.y,t=s-(h=c.width+u/2)<t?s-h:t,i=i<s+h?s+h:i,e=r-(o=c.height+u/2)<e?r-o:e,n=n<r+o?r+o:n;else for(var d=c.points,p=0;p<d.length;p++)d[p]instanceof Tiny.Point?(s=d[p].x,r=d[p].y):(s=d[p],r=d[p+1],p<d.length-1&&p++),t=s-u<t?s-u:t,i=i<s+u?s+u:i,e=r-u<e?r-u:e,n=n<r+u?r+u:n}else n=e=i=t=0;var y=this.boundsPadding;this._localBounds.x=t-y,this._localBounds.width=i-t+2*y,this._localBounds.y=e-y,this._localBounds.height=n-e+2*y},Tiny.Graphics.prototype._generateCachedSprite=function(){var t,i,e=this.getLocalBounds();this._cachedSprite?this._cachedSprite.buffer.resize(e.width,e.height):(t=new Tiny.CanvasBuffer(e.width,e.height),i=Tiny.Texture.fromCanvas(t.canvas),this._cachedSprite=new Tiny.Sprite(i),this._cachedSprite.buffer=t,this._cachedSprite.worldTransform=this.worldTransform),this._cachedSprite.anchor.x=-(e.x/e.width),this._cachedSprite.anchor.y=-(e.y/e.height),this._cachedSprite.buffer.context.translate(-e.x,-e.y),this.worldAlpha=1,Tiny.CanvasGraphics.renderGraphics(this,this._cachedSprite.buffer.context),this._cachedSprite.alpha=this.alpha},Tiny.Graphics.prototype.updateCachedSpriteTexture=function(){var t=this._cachedSprite,i=t.texture,e=t.buffer.canvas;i.width=e.width,i.height=e.height,i.crop.width=i.frame.width=e.width,i.crop.height=i.frame.height=e.height,t._width=e.width,t._height=e.height},Tiny.Graphics.prototype.destroyCachedSprite=function(){this._cachedSprite.texture.destroy(!0),this._cachedSprite=null},Tiny.Graphics.prototype.drawShape=function(t){this.currentPath&&this.currentPath.shape.points.length<=2&&this.graphicsData.pop(),this.currentPath=null,t instanceof Tiny.Polygon&&t.flatten();t=new Tiny.GraphicsData(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,t);return this.graphicsData.push(t),t.type===Tiny.Primitives.POLY&&(t.shape.closed=this.filling,this.currentPath=t),this._boundsDirty=!0,this.cachedSpriteDirty=!0,t},Object.defineProperty(Tiny.Graphics.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap=t,this._cacheAsBitmap?this._generateCachedSprite():(this.destroyCachedSprite(),this._boundsDirty=!0)}})},function(t,i){Tiny.RenderTexture=function(t,i,e,n){this.width=t||100,this.height=i||100,n=n||1,this.textureBuffer=new Tiny.CanvasBuffer(this.width*n,this.height*n),Tiny.Texture.call(this,this.textureBuffer.canvas,new Tiny.Rectangle(0,0,Math.floor(this.width*n),Math.floor(this.height*n))),this.resolution=n,this.renderer=e||Tiny.defaultRenderer,this.valid=!0},Tiny.RenderTexture.prototype=Object.create(Tiny.Texture.prototype),Tiny.RenderTexture.prototype.constructor=Tiny.RenderTexture,Tiny.RenderTexture.prototype.resize=function(t,i,e){t===this.width&&i===this.height||(this.valid=0<t&&0<i,this.width=t,this.height=i,this.frame.width=this.crop.width=t*this.resolution,this.frame.height=this.crop.height=i*this.resolution,this.valid&&this.textureBuffer.resize(this.width*this.resolution,this.height*this.resolution))},Tiny.RenderTexture.prototype.clear=function(){this.valid&&this.textureBuffer.clear()},Tiny.RenderTexture.prototype.render=function(t,i,e){if(this.valid){for(var n=t.worldTransform,s=(n.identity(),i&&n.append(i),t.worldAlpha=1,t.children),r=0,h=s.length;r<h;r++)s[r].updateTransform();e&&this.textureBuffer.clear();n=this.textureBuffer.context,i=this.renderer.resolution;this.renderer.resolution=this.resolution,this.renderer.renderObject(t,n),this.renderer.resolution=i}},Tiny.RenderTexture.prototype.getImage=function(){var t=new Image;return t.src=this.getBase64(),t},Tiny.RenderTexture.prototype.getBase64=function(){return this.getCanvas().toDataURL()},Tiny.RenderTexture.prototype.getCanvas=function(){return this.textureBuffer.canvas}},function(t,i){Tiny.CanvasBuffer=function(t,i,e){this.width=t,this.height=i,this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d",e),this.canvas.width=t,this.canvas.height=i},Tiny.CanvasBuffer.prototype.constructor=Tiny.CanvasBuffer,Tiny.CanvasBuffer.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.width,this.height)},Tiny.CanvasBuffer.prototype.resize=function(t,i){this.width=this.canvas.width=t,this.height=this.canvas.height=i}},function(t,i){Tiny.CanvasMaskManager=function(){},Tiny.CanvasMaskManager.prototype.constructor=Tiny.CanvasMaskManager,Tiny.CanvasMaskManager.prototype.pushMask=function(t,i){var e=i.context,n=(e.save(),t.alpha),s=t.worldTransform,i=i.resolution;e.setTransform(s.a*i,s.b*i,s.c*i,s.d*i,s.tx*i,s.ty*i),Tiny.CanvasGraphics.renderGraphicsMask(t,e),e.clip(),t.worldAlpha=n},Tiny.CanvasMaskManager.prototype.popMask=function(t){t.context.restore()}},function(t,i){var e,n,s,r,h;Tiny.CanvasTinter=function(){},Tiny.CanvasTinter.getTintedTexture=function(t,i){t=t.texture;if(t._tintCache||(t._tintCache={}),t._tintCache[i])return t._tintCache[i];var e=Tiny.CanvasTinter.canvas||document.createElement("canvas");return Tiny.CanvasTinter.tintMethod(t,i,e),Tiny.CanvasTinter.convertTintToImage?(new Image).src=e.toDataURL():Tiny.CanvasTinter.canvas=null,Tiny.CanvasTinter.cacheTint&&(t._tintCache[i]=e),e},Tiny.CanvasTinter.tintWithMultiply=function(t,i,e){var n=e.getContext("2d"),s=t.crop;e.width=s.width,e.height=s.height,n.fillStyle=Tiny.color2style(i),n.fillRect(0,0,s.width,s.height),n.globalCompositeOperation="multiply",n.drawImage(t.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height),n.globalCompositeOperation="destination-atop",n.drawImage(t.source,s.x,s.y,s.width,s.height,0,0,s.width,s.height)},Tiny.CanvasTinter.tintWithPerPixel=function(t,i,e){for(var n,s=e.getContext("2d"),r=t.crop,e=(e.width=r.width,e.height=r.height,s.globalCompositeOperation="copy",s.drawImage(t.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),Tiny.color2rgb(i)),h=e[0],o=e[1],a=e[2],t=s.getImageData(0,0,r.width,r.height),c=t.data,l=0;l<c.length;l+=4)c[l+0]*=h,c[l+1]*=o,c[l+2]*=a,Tiny.canHandleAlpha||(n=c[l+3],c[l+0]/=255/n,c[l+1]/=255/n,c[l+2]/=255/n);s.putImageData(t,0,0)},Tiny.CanvasTinter.convertTintToImage=!1,Tiny.CanvasTinter.cacheTint=!1,Tiny.canHandleAlpha=((e=new Tiny.CanvasBuffer(2,1,{willReadFrequently:!0})).context.fillStyle="rgba(10, 20, 30, 0.5)",e.context.fillRect(0,0,1,1),n=e.context.getImageData(0,0,1,1),e.context.putImageData(n,1,0),(e=e.context.getImageData(1,0,1,1)).data[0]===n.data[0]&&e.data[1]===n.data[1]&&e.data[2]===n.data[2]&&e.data[3]===n.data[3]),Tiny.supportNewBlendModes=(s="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAQAAAABAQMAAADD8p2OAAAAA1BMVEX/",r="AAAACklEQVQI12NgAAAAAgAB4iG8MwAAAABJRU5ErkJggg==",(h=new Image).onload=function(){var i=new Image;i.onload=function(){var t=document.createElement("canvas"),t=(t.width=6,t.height=1,t.getContext("2d",{willReadFrequently:!0}));if(t.globalCompositeOperation="multiply",t.drawImage(h,0,0),t.drawImage(i,2,0),!t.getImageData(2,0,1,1))return!1;t=t.getImageData(2,0,1,1).data;Tiny.supportNewBlendModes=255===t[0]&&0===t[1]&&0===t[2],Tiny.CanvasTinter.tintMethod=Tiny.CanvasTinter.tintWithMultiply},i.src=s+"/wCKxvRF"+r},h.src=s+"AP804Oa6"+r,!1),Tiny.CanvasTinter.tintMethod=Tiny.supportNewBlendModes?Tiny.CanvasTinter.tintWithMultiply:Tiny.CanvasTinter.tintWithPerPixel}]);