!function(){var t={4436:function(){var t=function(){};Tiny.App=function(e){this.callbackContext=this,this.state=0,this.timeScale=1,this.width=0,this.height=0,this.systems=[],this.updatable=[],this.paused=!1,this.pauseDuration=0,this.inputView=document.body,Tiny.app||(Tiny.app=this),Tiny.EventEmitter&&Tiny.EventEmitter.mixin(this),e=e||{},this.boot=e.boot||this.boot||t,this.preload=e.preload||this.preload||t,this.create=e.create||this.create||t,this.update=e.update||this.update||t,this.render=e.render||this.render||t,this._resize_cb=e.resize||t,this._destroy_cb=e.destroy||t;var i=this;setTimeout((function(){i._boot()}),0)},Tiny.App.prototype._boot=function(){for(var t=0;t<Tiny.systems.length;t++){var e=Tiny.systems[t],i=new e._class_(this);this.systems.push(i),i.update&&this.updatable.push(i),e.name&&(this[e.name]=i)}Tiny.RAF&&(this.raf=new Tiny.RAF(this)),this.boot.call(this.callbackContext);var n=this;setTimeout((function(){n.load?n._preload():n._create()}),0)},Tiny.App.prototype._preload=function(){this.preload.call(this.callbackContext),this.state=1,this.load.start(this._create)},Tiny.App.prototype._create=function(){this.emit("load"),this.create.call(this.callbackContext),this.raf&&this.raf.start(),this.state=2},Tiny.App.prototype.pause=function(){if(this.raf&&this.raf.reset(),!this.paused){for(var t=0;t<this.systems.length;t++)this.systems[t].pause&&this.systems[t].pause();this.paused=!0}},Tiny.App.prototype.resume=function(){if(this.raf&&this.raf.reset(),this.paused){for(var t=0;t<this.systems.length;t++)this.systems[t].resume&&this.systems[t].resume();this.paused=!1}},Tiny.App.prototype._update=function(t,e){if(this.paused)this.pauseDuration+=e;else{e*=this.timeScale,this.update.call(this.callbackContext,t,e),this.emit("update",e);for(var i=0;i<this.updatable.length;i++)this.updatable[i].update(e)}this.render(),this.emit("postrender")},Tiny.App.prototype.resize=function(t,e){this.width=t||this.width,this.height=e||this.height,this.state>0&&(this._resize_cb.call(this.callbackContext,this.width,this.height),this.emit("resize",t,e));var i=this;setTimeout((function(){i.input&&i.input.updateBounds()}),0)},Tiny.App.prototype.destroy=function(t){for(var e=0;e<this.systems.length;e++)this.systems[e].destroy&&this.systems[e].destroy(t);this.paused=!0,t&&this.load.clearCache(),this.raf&&this.raf.stop(),this._destroy_cb.call(this.callbackContext),Tiny.app===this&&(Tiny.app=null)}},5996:function(t,e,i){i(8518),window.Tiny={},i(4436),i(4498),i(9504),i(6892),i(4017),i(514),i(3227),i(9552),i(9053),i(3129)},4498:function(){Tiny.VERSION="2.1.12",Tiny.systems=[],Tiny.registerSystem=function(t,e){Tiny.systems.push({name:t,_class_:e})},Tiny.Primitives={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4,RREC_LJOIN:5},Tiny.rnd=function(t,e){return t+Math.floor(Math.random()*(e-t+1))},Tiny.style2hex=function(t){return+t.replace("#","0x")},Tiny.hex2style=function(t){return"#"+("00000"+(0|t).toString(16)).substr(-6)},Tiny.hex2rgb=function(t){return[(t>>16&255)/255,(t>>8&255)/255,(255&t)/255]},Tiny.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+255*t[2]}},9504:function(){Tiny.Math={distance:function(t,e,i,n){var s=t-i,r=e-n;return Math.sqrt(s*s+r*r)}};var t=Math.PI/180,e=180/Math.PI;Tiny.Math.degToRad=function(e){return e*t},Tiny.Math.radToDeg=function(t){return t*e}},4017:function(){Tiny.Matrix=function(){this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this.type=Tiny.MATRIX},Tiny.Matrix.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},Tiny.Matrix.prototype.toArray=function(t){this.array||(this.array=new Float32Array(9));var e=this.array;return t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.tx,e[7]=this.ty,e[8]=1):(e[0]=this.a,e[1]=this.c,e[2]=this.tx,e[3]=this.b,e[4]=this.d,e[5]=this.ty,e[6]=0,e[7]=0,e[8]=1),e},Tiny.Matrix.prototype.apply=function(t,e){e=e||new Tiny.Point;var i=t.x,n=t.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},Tiny.Matrix.prototype.applyInverse=function(t,e){e=e||new Tiny.Point;var i=1/(this.a*this.d+this.c*-this.b),n=t.x,s=t.y;return e.x=this.d*i*n+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*s+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},Tiny.Matrix.prototype.translate=function(t,e){return this.tx+=t,this.ty+=e,this},Tiny.Matrix.prototype.scale=function(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this},Tiny.Matrix.prototype.rotate=function(t){var e=Math.cos(t),i=Math.sin(t),n=this.a,s=this.c,r=this.tx;return this.a=n*e-this.b*i,this.b=n*i+this.b*e,this.c=s*e-this.d*i,this.d=s*i+this.d*e,this.tx=r*e-this.ty*i,this.ty=r*i+this.ty*e,this},Tiny.Matrix.prototype.append=function(t){var e=this.a,i=this.b,n=this.c,s=this.d;return this.a=t.a*e+t.b*n,this.b=t.a*i+t.b*s,this.c=t.c*e+t.d*n,this.d=t.c*i+t.d*s,this.tx=t.tx*e+t.ty*n+this.tx,this.ty=t.tx*i+t.ty*s+this.ty,this},Tiny.Matrix.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Tiny.identityMatrix=new Tiny.Matrix},6892:function(){Tiny.Point=function(t,e){this.x=t||0,this.y=e||0},Tiny.Point.prototype={set:function(t,e){return this.x=t||0,this.y=e||(0!==e?this.x:0),this}}},514:function(){Tiny.Rectangle=function(t,e,i,n){t=t||0,e=e||0,i=i||0,n=n||0,this.x=t,this.y=e,this.width=i,this.height=n,this.type=Tiny.Primitives.RECT},Tiny.Rectangle.prototype={setTo:function(t,e,i,n){return this.x=t,this.y=e,this.width=i,this.height=n,this},contains:function(t,e){return Tiny.Rectangle.contains(this,t,e)},intersects:function(t){return Tiny.Rectangle.intersects(this,t)}},Object.defineProperty(Tiny.Rectangle.prototype,"bottom",{get:function(){return this.y+this.height},set:function(t){t<=this.y?this.height=0:this.height=t-this.y}}),Object.defineProperty(Tiny.Rectangle.prototype,"right",{get:function(){return this.x+this.width},set:function(t){t<=this.x?this.width=0:this.width=t-this.x}}),Object.defineProperty(Tiny.Rectangle.prototype,"volume",{get:function(){return this.width*this.height}}),Tiny.Rectangle.prototype.constructor=Tiny.Rectangle,Tiny.Rectangle.contains=function(t,e,i){return!(t.width<=0||t.height<=0)&&(e>=t.x&&e<t.right&&i>=t.y&&i<t.bottom)},Tiny.Rectangle.containsPoint=function(t,e){return Tiny.Rectangle.contains(t,e.x,e.y)},Tiny.Rectangle.containsRect=function(t,e){return!(t.volume>e.volume)&&(t.x>=e.x&&t.y>=e.y&&t.right<e.right&&t.bottom<e.bottom)},Tiny.Rectangle.intersects=function(t,e){return!(t.width<=0||t.height<=0||e.width<=0||e.height<=0)&&!(t.right<e.x||t.bottom<e.y||t.x>e.right||t.y>e.bottom)},Tiny.EmptyRectangle=new Tiny.Rectangle(0,0,0,0)},3227:function(){var t=2*Math.PI;Tiny.BaseObject2D=function(){this.position=new Tiny.Point(0,0),this.scale=new Tiny.Point(1,1),this.pivot=new Tiny.Point(0,0),this.rotation=0,this.alpha=1,this.visible=!0,this.renderable=!1,this.parent=null,this.worldAlpha=1,this.worldTransform=new Tiny.Matrix,this._sr=0,this._cr=1,this._cacheAsBitmap=!1},Tiny.BaseObject2D.prototype.constructor=Tiny.BaseObject2D,Tiny.BaseObject2D.prototype.destroy=function(){this.parent&&this.parent.remove(this),this.parent=null,this.worldTransform=null,this.visible=!1,this.renderable=!1,this._destroyCachedSprite()},Object.defineProperty(Tiny.BaseObject2D.prototype,"worldVisible",{get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}}),Object.defineProperty(Tiny.BaseObject2D.prototype,"cacheAsBitmap",{get:function(){return this._cacheAsBitmap},set:function(t){this._cacheAsBitmap!==t&&(t?this._generateCachedSprite():this._destroyCachedSprite(),this._cacheAsBitmap=t)}}),Tiny.BaseObject2D.prototype.updateTransform=function(){if(this.parent){var e,i,n,s,r,h,o=this.parent.worldTransform,a=this.worldTransform;this.rotation%t?(this.rotation!==this.rotationCache&&(this.rotationCache=this.rotation,this._sr=Math.sin(this.rotation),this._cr=Math.cos(this.rotation)),e=this._cr*this.scale.x,i=this._sr*this.scale.x,n=-this._sr*this.scale.y,s=this._cr*this.scale.y,r=this.position.x,h=this.position.y,(this.pivot.x||this.pivot.y)&&(r-=this.pivot.x*e+this.pivot.y*n,h-=this.pivot.x*i+this.pivot.y*s),a.a=e*o.a+i*o.c,a.b=e*o.b+i*o.d,a.c=n*o.a+s*o.c,a.d=n*o.b+s*o.d,a.tx=r*o.a+h*o.c+o.tx,a.ty=r*o.b+h*o.d+o.ty):(e=this.scale.x,s=this.scale.y,r=this.position.x-this.pivot.x*e,h=this.position.y-this.pivot.y*s,a.a=e*o.a,a.b=e*o.b,a.c=s*o.c,a.d=s*o.d,a.tx=r*o.a+h*o.c+o.tx,a.ty=r*o.b+h*o.d+o.ty),this.worldAlpha=this.alpha*this.parent.worldAlpha}},Tiny.BaseObject2D.prototype.displayObjectUpdateTransform=Tiny.BaseObject2D.prototype.updateTransform,Tiny.BaseObject2D.prototype.getBounds=function(t){return Tiny.EmptyRectangle},Tiny.BaseObject2D.prototype.getLocalBounds=function(){return this.getBounds(Tiny.identityMatrix)},Tiny.BaseObject2D.prototype.generateTexture=function(t,e){var i=this.getLocalBounds(),n=new Tiny.RenderTexture(0|i.width,0|i.height,e,t);return Tiny.BaseObject2D._tempMatrix.tx=-i.x,Tiny.BaseObject2D._tempMatrix.ty=-i.y,n.render(this,Tiny.BaseObject2D._tempMatrix),n},Tiny.BaseObject2D.prototype.updateCache=function(){this._generateCachedSprite()},Tiny.BaseObject2D.prototype.toGlobal=function(t){return this.displayObjectUpdateTransform(),this.worldTransform.apply(t)},Tiny.BaseObject2D.prototype.toLocal=function(t,e){return e&&(t=e.toGlobal(t)),this.displayObjectUpdateTransform(),this.worldTransform.applyInverse(t)},Tiny.BaseObject2D.prototype._renderCachedSprite=function(t){this._cachedSprite.worldAlpha=this.worldAlpha,Tiny.Sprite.prototype.render.call(this._cachedSprite,t)},Tiny.BaseObject2D.prototype._generateCachedSprite=function(){this._cachedSprite=null,this._cacheAsBitmap=!1;var t=this.getLocalBounds();if(this._cachedSprite)this._cachedSprite.texture.resize(0|t.width,0|t.height);else{var e=new Tiny.RenderTexture(0|t.width,0|t.height);this._cachedSprite=new Tiny.Sprite(e),this._cachedSprite.worldTransform=this.worldTransform}Tiny.BaseObject2D._tempMatrix.tx=-t.x,Tiny.BaseObject2D._tempMatrix.ty=-t.y,this._cachedSprite.texture.render(this,Tiny.BaseObject2D._tempMatrix,!0),this._cachedSprite.anchor.x=-t.x/t.width,this._cachedSprite.anchor.y=-t.y/t.height,this._cacheAsBitmap=!0},Tiny.BaseObject2D.prototype._destroyCachedSprite=function(){this._cachedSprite&&(this._cachedSprite.texture.destroy(!0),this._cachedSprite=null)},Tiny.BaseObject2D.prototype.render=function(t){},Object.defineProperty(Tiny.BaseObject2D.prototype,"x",{get:function(){return this.position.x},set:function(t){this.position.x=t}}),Object.defineProperty(Tiny.BaseObject2D.prototype,"y",{get:function(){return this.position.y},set:function(t){this.position.y=t}}),Tiny.BaseObject2D._tempMatrix=new Tiny.Matrix},9552:function(){Tiny.Object2D=function(){Tiny.BaseObject2D.call(this),this.children=[],this._bounds=new Tiny.Rectangle(0,0,1,1),this._currentBounds=null,this._mask=null},Tiny.Object2D.prototype=Object.create(Tiny.BaseObject2D.prototype),Tiny.Object2D.prototype.constructor=Tiny.Object2D,Object.defineProperty(Tiny.Object2D.prototype,"width",{get:function(){return this.scale.x*this.getLocalBounds().width},set:function(t){var e=this.getLocalBounds().width;this.scale.x=0!==e?t/e:1,this._width=t}}),Object.defineProperty(Tiny.Object2D.prototype,"height",{get:function(){return this.scale.y*this.getLocalBounds().height},set:function(t){var e=this.getLocalBounds().height;this.scale.y=0!==e?t/e:1,this._height=t}}),Object.defineProperty(Tiny.Object2D.prototype,"mask",{get:function(){return this._mask},set:function(t){this._mask&&(this._mask.isMask=!1),this._mask=t,this._mask&&(this._mask.isMask=!0)}}),Tiny.Object2D.prototype.destroy=function(){for(var t=this.children.length;t--;)this.children[t].destroy();this.children=[],Tiny.BaseObject2D.prototype.destroy.call(this),this._bounds=null,this._currentBounds=null,this._mask=null,this.input&&this.input.system.remove(this)},Tiny.Object2D.prototype.add=function(t){return this.addChildAt(t,this.children.length)},Tiny.Object2D.prototype.addChildAt=function(t,e){if(e>=0&&e<=this.children.length)return t.parent&&t.parent.remove(t),t.parent=this,this.game&&(t.game=this.game),this.children.splice(e,0,t),t;throw new Error(t+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length)},Tiny.Object2D.prototype.swapChildren=function(t,e){if(t!==e){var i=this.getChildIndex(t),n=this.getChildIndex(e);if(i<0||n<0)throw new Error("swapChildren: Both the supplied Objects must be a child of the caller.");this.children[i]=e,this.children[n]=t}},Tiny.Object2D.prototype.getChildIndex=function(t){var e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied Object must be a child of the caller");return e},Tiny.Object2D.prototype.setChildIndex=function(t,e){if(e<0||e>=this.children.length)throw new Error("The supplied index is out of bounds");var i=this.getChildIndex(t);this.children.splice(i,1),this.children.splice(e,0,t)},Tiny.Object2D.prototype.getChildAt=function(t){if(t<0||t>=this.children.length)throw new Error("getChildAt: Supplied index "+t+" does not exist in the child list, or the supplied Object must be a child of the caller");return this.children[t]},Tiny.Object2D.prototype.remove=function(t){var e=this.children.indexOf(t);if(-1!==e)return this.removeChildAt(e)},Tiny.Object2D.prototype.removeChildAt=function(t){var e=this.getChildAt(t);return e.parent=void 0,this.children.splice(t,1),e},Tiny.Object2D.prototype.updateTransform=function(){if(this.visible&&(this.displayObjectUpdateTransform(),!this._cacheAsBitmap))for(var t=0,e=this.children.length;t<e;t++)this.children[t].updateTransform()},Tiny.Object2D.prototype.displayObjectContainerUpdateTransform=Tiny.Object2D.prototype.updateTransform,Tiny.Object2D.prototype.getBounds=function(){if(0===this.children.length)return Tiny.EmptyRectangle;if(this._cachedSprite)return this._cachedSprite.getBounds();for(var t,e,i,n=1/0,s=1/0,r=-1/0,h=-1/0,o=!1,a=0,c=this.children.length;a<c;a++){this.children[a].visible&&(o=!0,n=n<(t=this.children[a].getBounds()).x?n:t.x,s=s<t.y?s:t.y,r=r>(e=t.width+t.x)?r:e,h=h>(i=t.height+t.y)?h:i)}if(!o)return Tiny.EmptyRectangle;var l=this._bounds;return l.x=n,l.y=s,l.width=r-n,l.height=h-s,l},Tiny.Object2D.prototype.getLocalBounds=function(){var t=this.worldTransform;this.worldTransform=Tiny.identityMatrix;for(var e=0,i=this.children.length;e<i;e++)this.children[e].updateTransform();var n=this.getBounds();return this.worldTransform=t,n},Tiny.Object2D.prototype.render=function(t){if(!1!==this.visible&&0!==this.alpha)if(this._cacheAsBitmap)this._renderCachedSprite(t);else{this._mask&&t.maskManager.pushMask(this._mask,t);for(var e=0;e<this.children.length;e++)this.children[e].render(t);this._mask&&t.maskManager.popMask(t)}}},9053:function(){Tiny.Scene=function(t){Tiny.Object2D.call(this),this.worldTransform=new Tiny.Matrix,this.game=t},Tiny.Scene.prototype=Object.create(Tiny.Object2D.prototype),Tiny.Scene.prototype.constructor=Tiny.Scene,Tiny.Scene.prototype.updateTransform=function(){this.worldAlpha=1;for(var t=0;t<this.children.length;t++)this.children[t].updateTransform()}},9853:function(){Tiny.Sprite=function(t,e){Tiny.Object2D.call(this),this.anchor=new Tiny.Point,this.setTexture(t,e,!1),this._width=0,this._height=0,this._frame=0,this.tint="#ffffff",this.blendMode="source-over",this.texture.hasLoaded&&this.onTextureUpdate(),this.renderable=!0},Tiny.Sprite.prototype=Object.create(Tiny.Object2D.prototype),Tiny.Sprite.prototype.constructor=Tiny.Sprite,Object.defineProperty(Tiny.Sprite.prototype,"frameName",{get:function(){return this.texture.frame.name},set:function(t){this.texture.frame.name&&this.setTexture(Tiny.Cache.texture[this.texture.key+"."+t])}}),Object.defineProperty(Tiny.Sprite.prototype,"width",{get:function(){return this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(Tiny.Sprite.prototype,"height",{get:function(){return this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),Tiny.Sprite.prototype.setTexture=function(t,e,i){if("string"==typeof t){var n=t;null!=e&&(n=n+"."+e),(t=Tiny.Cache.texture[n])||(t=new Tiny.Texture(n))}return this.texture!==t&&(this.texture=t,this.cachedTint="#ffffff",!0===i&&this.onTextureUpdate(),!0)},Tiny.Sprite.prototype.onTextureUpdate=function(){this._width&&(this.scale.x=this._width/this.texture.frame.width),this._height&&(this.scale.y=this._height/this.texture.frame.height)},Tiny.Sprite.prototype.getBounds=function(t){var e=this.texture.frame.width/this.texture.resolution,i=this.texture.frame.height/this.texture.resolution,n=e*(1-this.anchor.x),s=e*-this.anchor.x,r=i*(1-this.anchor.y),h=i*-this.anchor.y,o=t||this.worldTransform,a=o.a,c=o.b,l=o.c,d=o.d,u=o.tx,p=o.ty,y=-1/0,f=-1/0,T=1/0,m=1/0;if(0===c&&0===l)a<0?(T=a*n+u,y=a*s+u):(T=a*s+u,y=a*n+u),d<0?(m=d*r+p,f=d*h+p):(m=d*h+p,f=d*r+p);else{var x=a*s+l*h+u,g=d*h+c*s+p,w=a*n+l*h+u,v=d*h+c*n+p,b=a*n+l*r+u,S=d*r+c*n+p,C=a*s+l*r+u,_=d*r+c*s+p;T=C<(T=b<(T=w<(T=x<T?x:T)?w:T)?b:T)?C:T,m=_<(m=S<(m=v<(m=g<m?g:m)?v:m)?S:m)?_:m,y=C>(y=b>(y=w>(y=x>y?x:y)?w:y)?b:y)?C:y,f=_>(f=S>(f=v>(f=g>f?g:f)?v:f)?S:f)?_:f}var k=this._bounds;return k.x=T,k.width=y-T,k.y=m,k.height=f-m,this._currentBounds=k,k},Tiny.Sprite.prototype.render=function(t){if(!(!1===this.visible||0===this.alpha||!1===this.renderable||this.texture.crop.width<=0||this.texture.crop.height<=0)){if(this.blendMode!==t.currentBlendMode&&(t.currentBlendMode=this.blendMode,t.context.globalCompositeOperation=t.currentBlendMode),this._mask&&t.maskManager.pushMask(this._mask,t),this.texture.valid){var e=this.texture.resolution/t.resolution;t.context.globalAlpha=this.worldAlpha;var i=this.texture.trim?this.texture.trim.x-this.anchor.x*this.texture.trim.width:this.anchor.x*-this.texture.frame.width,n=this.texture.trim?this.texture.trim.y-this.anchor.y*this.texture.trim.height:this.anchor.y*-this.texture.frame.height;t.roundPixels?(t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution|0,this.worldTransform.ty*t.resolution|0),i|=0,n|=0):t.context.setTransform(this.worldTransform.a,this.worldTransform.b,this.worldTransform.c,this.worldTransform.d,this.worldTransform.tx*t.resolution,this.worldTransform.ty*t.resolution),"#ffffff"!==this.tint?(this.cachedTint!==this.tint&&(this.cachedTint=this.tint,this.tintedTexture=Tiny.CanvasTinter.getTintedTexture(this,this.tint)),t.context.drawImage(this.tintedTexture,0,0,this.texture.crop.width,this.texture.crop.height,i/e,n/e,this.texture.crop.width/e,this.texture.crop.height/e)):t.context.drawImage(this.texture.source,this.texture.crop.x,this.texture.crop.y,this.texture.crop.width,this.texture.crop.height,i/e,n/e,this.texture.crop.width/e,this.texture.crop.height/e)}for(var s=0;s<this.children.length;s++)this.children[s].render(t);this._mask&&t.maskManager.popMask(t)}}},7512:function(){Tiny.Text=function(t,e){this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=1,Tiny.Sprite.call(this,Tiny.Texture.fromCanvas(this.canvas)),this.setText(t),this.setStyle(e)},Tiny.Text.prototype=Object.create(Tiny.Sprite.prototype),Tiny.Text.prototype.constructor=Tiny.Text,Object.defineProperty(Tiny.Text.prototype,"width",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.x*this.texture.frame.width},set:function(t){this.scale.x=t/this.texture.frame.width,this._width=t}}),Object.defineProperty(Tiny.Text.prototype,"height",{get:function(){return this.dirty&&(this.updateText(),this.dirty=!1),this.scale.y*this.texture.frame.height},set:function(t){this.scale.y=t/this.texture.frame.height,this._height=t}}),Tiny.Text.prototype.setStyle=function(t){(t=t||{}).font=t.font||"bold 20pt Arial",t.fill=t.fill||"black",t.align=t.align||"left",t.stroke=t.stroke||"black",t.strokeThickness=t.strokeThickness||0,t.wordWrap=t.wordWrap||!1,t.lineSpacing=t.lineSpacing||0,t.wordWrapWidth=void 0!==t.wordWrapWidth?t.wordWrapWidth:100,t.dropShadow=t.dropShadow||!1,t.dropShadowAngle=void 0!==t.dropShadowAngle?t.dropShadowAngle:Math.PI/6,t.dropShadowDistance=void 0!==t.dropShadowDistance?t.dropShadowDistance:4,t.dropShadowColor=t.dropShadowColor||"black",this.style=t,this.dirty=!0},Tiny.Text.prototype.setText=function(t){this.text=t.toString()||" ",this.dirty=!0},Tiny.Text.prototype.updateText=function(){this.texture.resolution=this.resolution,this.context.font=this.style.font;var t=this.text;this.style.wordWrap&&(t=this.wordWrap(this.text));for(var e=t.split(/(?:\r\n|\r|\n)/),i=[],n=0,s=this.determineFontProperties(this.style.font),r=0;r<e.length;r++){var h=this.context.measureText(e[r]).width;i[r]=h,n=Math.max(n,h)}var o=n+this.style.strokeThickness;this.style.dropShadow&&(o+=this.style.dropShadowDistance),this.canvas.width=(o+this.context.lineWidth)*this.resolution;var a,c,l=s.fontSize+this.style.strokeThickness+this.style.lineSpacing,d=l*e.length;if(this.style.dropShadow&&(d+=this.style.dropShadowDistance),this.canvas.height=(d-this.style.lineSpacing)*this.resolution,this.context.scale(this.resolution,this.resolution),navigator.isCocoonJS&&this.context.clearRect(0,0,this.canvas.width,this.canvas.height),this.context.font=this.style.font,this.context.strokeStyle=this.style.stroke,this.context.lineWidth=this.style.strokeThickness,this.context.textBaseline="alphabetic",this.context.miterLimit=2,this.style.dropShadow){this.context.fillStyle=this.style.dropShadowColor;var u=Math.sin(this.style.dropShadowAngle)*this.style.dropShadowDistance,p=Math.cos(this.style.dropShadowAngle)*this.style.dropShadowDistance;for(r=0;r<e.length;r++)a=this.style.strokeThickness/2,c=this.style.strokeThickness/2+r*l+s.ascent,"right"===this.style.align?a+=n-i[r]:"center"===this.style.align&&(a+=(n-i[r])/2),this.style.fill&&this.context.fillText(e[r],a+u,c+p)}for(this.context.fillStyle=this.style.fill,r=0;r<e.length;r++)a=this.style.strokeThickness/2,c=this.style.strokeThickness/2+r*l+s.ascent,"right"===this.style.align?a+=n-i[r]:"center"===this.style.align&&(a+=(n-i[r])/2),this.style.stroke&&this.style.strokeThickness&&this.context.strokeText(e[r],a,c),this.style.fill&&this.context.fillText(e[r],a,c);this.updateTexture()},Tiny.Text.prototype.updateTexture=function(){this.texture.width=this.canvas.width,this.texture.height=this.canvas.height,this.texture.crop.width=this.texture.frame.width=this.canvas.width,this.texture.crop.height=this.texture.frame.height=this.canvas.height,this._width=this.canvas.width,this._height=this.canvas.height},Tiny.Text.prototype.render=function(t){(this.dirty||this.resolution!==t.resolution)&&(this.resolution=t.resolution,this.updateText(),this.dirty=!1),Tiny.Sprite.prototype.render.call(this,t)},Tiny.Text.prototype.determineFontProperties=function(t){var e=Tiny.Text.fontPropertiesCache[t];if(!e){e={};var i=Tiny.Text.fontPropertiesCanvas,n=Tiny.Text.fontPropertiesContext;n.font=t;var s=Math.ceil(n.measureText("|MÉq").width),r=Math.ceil(n.measureText("|MÉq").width),h=2*r;r=1.4*r|0,i.width=s,i.height=h,n.fillStyle="#f00",n.fillRect(0,0,s,h),n.font=t,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText("|MÉq",0,r);var o,a,c=n.getImageData(0,0,s,h).data,l=c.length,d=4*s,u=0,p=!1;for(o=0;o<r;o++){for(a=0;a<d;a+=4)if(255!==c[u+a]){p=!0;break}if(p)break;u+=d}for(e.ascent=r-o,u=l-d,p=!1,o=h;o>r;o--){for(a=0;a<d;a+=4)if(255!==c[u+a]){p=!0;break}if(p)break;u-=d}e.descent=o-r,e.descent+=6,e.fontSize=e.ascent+e.descent,Tiny.Text.fontPropertiesCache[t]=e}return e},Tiny.Text.prototype.wordWrap=function(t){for(var e="",i=t.split("\n"),n=0;n<i.length;n++){for(var s=this.style.wordWrapWidth,r=i[n].split(" "),h=0;h<r.length;h++){var o=this.context.measureText(r[h]).width,a=o+this.context.measureText(" ").width;0===h||a>s?(h>0&&(e+="\n"),e+=r[h],s=this.style.wordWrapWidth-o):(s-=a,e+=" "+r[h])}n<i.length-1&&(e+="\n")}return e},Tiny.Text.prototype.getBounds=function(t){return this.dirty&&(this.updateText(),this.dirty=!1),Tiny.Sprite.prototype.getBounds.call(this,t)},Tiny.Text.prototype.destroy=function(){this.context=null,this.canvas=null,this.texture.destroy(),Tiny.Sprite.prototype.destroy.call(this)},Tiny.Text.fontPropertiesCache={},Tiny.Text.fontPropertiesCanvas=document.createElement("canvas"),Tiny.Text.fontPropertiesContext=Tiny.Text.fontPropertiesCanvas.getContext("2d")},3129:function(){Tiny.CanvasRenderer=function(t,e,i){i=i||{},this.resolution=null!=i.resolution?i.resolution:1,this.clearBeforeRender=null==i.clearBeforeRender||i.clearBeforeRender,this.transparent=null!=i.transparent&&i.transparent,this.autoResize=i.autoResize||!1,Tiny.defaultRenderer||(Tiny.defaultRenderer=this);var n=this.domElement=i.domElement||document.createElement("canvas");this.context=n.getContext("2d",{alpha:this.transparent}),this.resize(t||800,e||600),this.setClearColor("#ffffff"),Tiny.CanvasMaskManager&&(this.maskManager=new Tiny.CanvasMaskManager),this.renderSession={context:this.context,maskManager:this.maskManager,smoothProperty:null,roundPixels:!1},"imageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="imageSmoothingEnabled":"webkitImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="webkitImageSmoothingEnabled":"mozImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="mozImageSmoothingEnabled":"oImageSmoothingEnabled"in this.context?this.renderSession.smoothProperty="oImageSmoothingEnabled":"msImageSmoothingEnabled"in this.context&&(this.renderSession.smoothProperty="msImageSmoothingEnabled")},Tiny.CanvasRenderer.prototype.constructor=Tiny.CanvasRenderer,Tiny.CanvasRenderer.prototype.setClearColor=function(t){this.clearColor=t},Tiny.CanvasRenderer.prototype.render=function(t){t.updateTransform(),this.context.setTransform(1,0,0,1,0,0),this.context.globalAlpha=1,this.renderSession.currentBlendMode="source-over",this.context.globalCompositeOperation="source-over",navigator.isCocoonJS&&this.domElement.screencanvas&&(this.context.fillStyle="black",this.context.clear()),this.clearBeforeRender&&(this.transparent?this.context.clearRect(0,0,this.width*this.resolution,this.height*this.resolution):(this.context.fillStyle=this.clearColor,this.context.fillRect(0,0,this.width*this.resolution,this.height*this.resolution))),this.renderObject(t)},Tiny.CanvasRenderer.prototype.destroy=function(t){void 0===t&&(t=!0),t&&this.domElement.parentNode&&this.domElement.parentNode.removeChild(this.domElement),this.domElement=null,this.context=null,this.maskManager=null,this.renderSession=null,Tiny.defaultRenderer===this&&(Tiny.defaultRenderer=null)},Tiny.CanvasRenderer.prototype.resize=function(t,e){this.width=t,this.height=e;var i=this.domElement;i.width=Math.floor(this.width*this.resolution),i.height=Math.floor(this.height*this.resolution),this.autoResize&&(i.style.width=t+"px",i.style.height=e+"px")},Tiny.CanvasRenderer.prototype.setPixelRatio=function(t){this.resolution=t;var e=this.domElement;e.width=Math.floor(this.width*this.resolution),e.height=Math.floor(this.height*this.resolution)},Tiny.CanvasRenderer.prototype.renderObject=function(t,e){this.renderSession.context=e||this.context,this.renderSession.resolution=this.resolution,t.render(this.renderSession)}},2511:function(){var t;Tiny.Input=function(t){this.game=t;var e=this.domElement=t.inputView;this.bounds={x:0,y:0,width:0,height:0},this.candidates=[],this.list=[],this.lastMove=null,this.isDown=!1,this.downHandler=this.downHandler.bind(this),this.moveHandler=this.moveHandler.bind(this),this.upHandler=this.upHandler.bind(this),e.addEventListener("touchstart",this.downHandler),e.addEventListener("touchmove",this.moveHandler),e.addEventListener("touchend",this.upHandler),e.addEventListener("touchcancel",this.upHandler),e.addEventListener("mousedown",this.downHandler),e.addEventListener("mousemove",this.moveHandler),e.addEventListener("mouseup",this.upHandler),Tiny.EventEmitter.mixin(this);for(var i=0;i<Tiny.Input.systems.length;i++)Tiny.Input.systems[i].init.call(this);this.updateBounds()},Tiny.Input.prototype={add:function(t,e){t.inputEnabled=!0,(e=e||{}).system=this,t.input=e,Tiny.EventEmitter.mixin(t.input),this.list.push(t)},remove:function(t){var e=this.list.indexOf(t);if(e>-1){var i=this.list[e];return i.input=null,i.inputEnabled=!1,this.list.splice(e,1),i}},inputHandler:function(t,e){var i=this.getCoords(e);if(null!==i){if("move"!=t){this.candidates.length=0;for(var n=0;n<Tiny.Input.systems.length;n++)Tiny.Input.systems[n].preHandle.call(this,i.x,i.y);for(var s,r=0;r<this.list.length;r++)(s=this.list[r]).inputEnabled&&s.parent&&(s.input.checkBounds?s.input.checkBounds.call(this,s,i.x,i.y):Tiny.Input.checkBounds.call(this,s,i.x,i.y))&&this.candidates.push(s);for(n=this.candidates.length-1;n>=0;n--){if((s=this.candidates[n]).input["last_"+t]={x:i.x,y:i.y},s.input.emit(t,{x:i.x,y:i.y}),"up"==t){var h=s.input.last_down;h&&Tiny.Math.distance(h.x,h.y,i.x,i.y)<30&&s.input.emit("click",{x:i.x,y:i.y})}if(!s.input.transparent)break}}this.emit(t,{x:i.x,y:i.y})}},moveHandler:function(t){this.lastMove=t,this.inputHandler("move",t)},upHandler:function(t){this.isDown=!1,this.inputHandler("up",this.lastMove)},downHandler:function(t){this.isDown=!0,this.lastMove=t,this.inputHandler("down",t)},clickHandler:function(t){this.inputHandler("click",t)},getCoords:function(e){var i=null;return"undefined"!=typeof TouchEvent&&e instanceof TouchEvent?(t=!0,e.touches.length>0?i={x:e.touches[0].clientX,y:e.touches[0].clientY}:e.clientX&&e.clientY&&(i={x:e.clientX,y:e.clientY})):i={x:e.clientX,y:e.clientY},t&&e instanceof MouseEvent||null===i?null:i={x:i.x-this.bounds.x,y:i.y-this.bounds.y}},updateBounds:function(){bounds=this.bounds;var t=this.domElement.getBoundingClientRect();bounds.x=t.left,bounds.y=t.top,bounds.width=t.width,bounds.height=t.height},destroy:function(){var t=this.domElement;t.removeEventListener("touchstart",this.downHandler),t.removeEventListener("touchmove",this.moveHandler),t.removeEventListener("touchend",this.upHandler),t.removeEventListener("touchcancel",this.upHandler),t.removeEventListener("mousedown",this.downHandler),t.removeEventListener("mousemove",this.moveHandler),t.removeEventListener("mouseup",this.upHandler)}},Tiny.Input.checkBounds=function(t,e,i){if(t.worldVisible&&t.getBounds().contains(e,i))return!0},Tiny.Input.systems=[],Tiny.registerSystem("input",Tiny.Input)},5193:function(){Tiny.Cache={image:{},texture:{}},Tiny.Loader=function(t){t.cache=Tiny.Cache,this.game=t,this.list=[]},Tiny.Loader.prototype={clearCache:function(){for(var t in Tiny.Cache.texture)Tiny.Cache.texture[t].destroy();for(var t in Tiny.Cache)Tiny.Cache[t]={}},all:function(t){this.list=this.list.concat(t)},image:function(t,e){this.list.push({src:e,key:t,type:"image"})},spritesheet:function(t,e,i,n,s,r){var h={src:e,key:t,type:"spritesheet"};"number"==typeof i?(h.width=i,h.height=n,h.total=s,h.duration=r):i.length>0&&(h.data=i),this.list.push(h)},atlas:function(t,e,i){this.list.push({src:e,key:t,data:i,type:"atlas"})},start:function(t){var e=this.game,i=this.list;function n(){var t=i.shift(),e=Tiny.Loader[t.type];e?e(t,s):(console.warn("Cannot find loader for "+t.type),s())}function s(s,r){0!=i.length?n():t.call(e)}0!=i.length?n():t.call(e)}},Tiny.Loader.atlas=function(t,e){var i=t.key;Tiny.Loader.image(t,(function(t,n){for(var s=0;s<t.data.length;s++){var r=i+"."+t.data[s].name,h=new Tiny.Texture(n,t.data[s]);h.key=i,Tiny.Cache.texture[r]=h}e()}))},Tiny.Loader.spritesheet=function(t,e){var i=t.key;Tiny.Loader.image(t,(function(t,n){var s,r,h;if(t.data){var o=t.data;s=o.length-1;for(var a=0;a<=s;a++)r=i+"."+a,(h=new Tiny.Texture(n,{name:a,x:Math.floor(o[a].x),y:Math.floor(o[a].y),width:Math.floor(o[a].width),height:Math.floor(o[a].height),duration:o[a].duration})).key=i,h.lastFrame=s,Tiny.Cache.texture[r]=h}else{var c=n.naturalWidth||n.width,l=n.naturalHeight||n.height,d=t.width,u=t.height;d||(d=Math.floor(c/(t.cols||1))),u||(u=Math.floor(l/(t.rows||1)));var p=Math.floor(c/d)*Math.floor(l/u);if(0===p)return e();t.total&&(p=Math.min(p,t.total));var y=0,f=0;s=p-1;for(a=0;a<p;a++)r=i+"."+a,(h=new Tiny.Texture(n,{name:a,x:y,y:f,width:d,height:u,duration:t.duration})).key=i,h.lastFrame=s,Tiny.Cache.texture[r]=h,(y+=d)+d>c&&(y=0,f+=u)}e()}))},Tiny.Loader.image=function(t,e){const i=new Image;i.addEventListener("load",(function(){Tiny.Cache.image[t.key]=i,e(t,i)})),i.src=t.src},Tiny.registerSystem("load",Tiny.Loader)},6881:function(){var t,e,i,n,s,r=function(){return(new Date).getTime()};void 0!==self.performance&&void 0!==self.performance.now?r=self.performance.now.bind(self.performance):void 0!==Date.now&&(r=Date.now),Tiny.RAF=function(r,h){void 0===h&&(h=!1),this.game=r,this.isRunning=!1,this.forceSetTimeOut=h;for(var o=["ms","moz","webkit","o"],a=0;a<o.length&&!window.requestAnimationFrame;a++)window.requestAnimationFrame=window[o[a]+"RequestAnimationFrame"],window.cancelAnimationFrame=window[o[a]+"CancelAnimationFrame"]||window[o[a]+"CancelRequestAnimationFrame"];t=!1,e=null,i=null,n=0,s=0},Tiny.RAF.prototype={start:function(){n=r(),this.isRunning=!0;var s=this;!window.requestAnimationFrame||this.forceSetTimeOut?(t=!0,e=function(){return s.updateSetTimeout()},i=window.setTimeout(e,0)):(t=!1,e=function(){return s.updateRAF()},i=window.requestAnimationFrame(e))},updateRAF:function(){s=r(),this.isRunning&&(this.game._update(Math.floor(s),s-n),i=window.requestAnimationFrame(e)),n=s},updateSetTimeout:function(){s=r(),this.isRunning&&(this.game._update(Math.floor(s),s-n),i=window.setTimeout(e,Tiny.RAF.timeToCall)),n=s},reset:function(){n=r()},stop:function(){t?clearTimeout(i):window.cancelAnimationFrame(i),this.isRunning=!1}},Tiny.RAF.timeToCall=15},6634:function(){var t=function(){},e=function(e,i,n,s,r,h,o,a,c){this.game=n,this.cb=s||t,this.ctx=r||this,this.delay=null==h?1e3:h,this.loop=o,this.count=a||0,this.repeat=this.count>0,this.running=!!e,this._lastFrame=0,this.autoRemove=i,this.onComplete=c||t};e.prototype={start:function(){this.running=!0},pause:function(){this.running=!1},stop:function(){this.running=!1,this._lastFrame=0},update:function(t){this.running&&(this._lastFrame+=t,this._lastFrame>=this.delay&&(this.cb.call(this.ctx),this._lastFrame=0,this.repeat?(this.count--,0===this.count&&(this.running=!1,this.autoRemove&&this.game.timer.remove(this),this.onComplete())):this.loop||(this.running=!1,this.autoRemove&&this.game.timer.remove(this))))}},Tiny.Timer=e,Tiny.TimerCreator=function(t){this.game=t,this.list=[],this.autoStart=!0,this.autoRemove=!0},Tiny.TimerCreator.prototype={update:function(t){for(var e=0;e<this.list.length;e++)this.list[e].update(t)},removeAll:function(){for(var t=0;t<this.list.length;t++)this.list[t].stop();this.list=[]},remove:function(t){var e=this.list.indexOf(t);e>-1&&(t.stop(),this.list.splice(e,1))},add:function(t,i,n,s,r){s=null!=s?s:this.autoStart,r=null!=r?r:this.autoRemove;var h=new e(s,r,this.game,i,n,t);return this.list.push(h),h},loop:function(t,i,n,s,r){s=null!=s?s:this.autoStart,r=null!=r?r:this.autoRemove;var h=new e(s,r,this.game,i,n,t,!0);return this.list.push(h),h},repeat:function(t,i,n,s,r,h,o){r=null!=r?r:this.autoStart,h=null!=h?h:this.autoRemove;var a=new e(r,h,this.game,n,s,t,!1,i,o);return this.list.push(a),a},destroy:function(){this.removeAll()}},Tiny.registerSystem("timer",Tiny.TimerCreator)},3478:function(){Tiny.TextureCacheIdGenerator=0,Tiny.TextureSilentFail=!1,Tiny.Texture=function(t,e,i,n){if(this.noFrame=!1,this.resolution=1,this.hasLoaded=!1,e||(this.noFrame=!0,e=new Tiny.Rectangle(0,0,1,1)),"string"==typeof t){var s=t;if(!(t=Tiny.Cache.image[s]))throw new Error("Cache Error: image "+s+" does`t found in cache");Tiny.Cache.texture[s]=this,this.key=s}if(this.source=t,this.frame=e,this.trim=n,this.valid=!1,this.width=0,this.height=0,this.crop=i||new Tiny.Rectangle(0,0,1,1),(this.source.complete||this.source.getContext)&&this.source.width&&this.source.height)this.onSourceLoaded();else{var r=this;this.source.onload=function(){r.onSourceLoaded()}}},Tiny.Texture.prototype.constructor=Tiny.Texture,Tiny.Texture.prototype.onSourceLoaded=function(){this.hasLoaded=!0,this.width=this.source.naturalWidth||this.source.width,this.height=this.source.naturalHeight||this.source.height,this.noFrame&&(this.frame=new Tiny.Rectangle(0,0,this.width,this.height)),this.setFrame(this.frame)},Tiny.Texture.prototype.addToCache=function(t,e){this.key=this.key||t,this.frame.name=this.frame.name||e,this.frame.name&&(t+="."+this.frame.name),Tiny.Cache.texture[t]=this},Tiny.Texture.prototype.destroy=function(){this.key&&delete Tiny.Cache.texture[this.key],this.source=null,this.valid=!1},Tiny.Texture.prototype.setFrame=function(t){if(this.noFrame=!1,this.frame=t,this.valid=t&&t.width&&t.height&&this.source&&this.hasLoaded,this.valid)if(this.crop.x=t.x,this.crop.y=t.y,this.crop.width=t.width,this.crop.height=t.height,this.trim||!(t.x+t.width>this.width||t.y+t.height>this.height))this.trim&&(this.frame.width=this.trim.width,this.frame.height=this.trim.height);else{if(!Tiny.TextureSilentFail)throw new Error("Texture Error: frame does not fit inside the base Texture dimensions "+this);this.valid=!1}},Tiny.Texture.fromCanvas=function(t){return new Tiny.Texture(t)}},7076:function(){function t(){this.a=[],this.n=0}Tiny.EventEmitter={call:function(t){t&&(t=t.prototype||t,Tiny.EventEmitter.mixin(t))},mixin:function(e){const i={};function n(e,n,s,r){var h=i[e];h||(h=i[e]=new t),h.a.push(n,s||null,r||!1),h.n+=3}e.once=function(t,e,i){n(t,e,i,!0)},e.on=n,e.off=function(t,e,n){if(i[t]){var s=i[t].a;if(e)if(n)for(r=0;r<s.length;r+=3)s[r]==e&&s[r+1]==n&&(s.splice(r,3),r-=3);else for(var r=0;r<s.length;r+=3)s[r]==e&&(s.splice(r,3),r-=3);else s.length=0;0==s.length&&delete i[t]}},e.emit=function(t,e,n,s){var r=i[t];if(r){var h=r.a;r.n=0;for(var o,a,c=arguments.length,l=0;l<h.length-r.n;l+=3)o=h[l],a=h[l+1],h[l+2]&&(h.splice(l,3),l-=3),c<=1?o.call(a):2==c?o.call(a,e):3==c?o.call(a,e,n):o.call(a,e,n,s);0==h.length&&delete i[t]}}}}},8518:function(){Date.now||(Date.now=function(){return(new Date).getTime()}),"undefined"==typeof Float32Array&&(window.Float32Array=Array)}},e={};function i(n){var s=e[n];if(void 0!==s)return s.exports;var r=e[n]={exports:{}};return t[n](r,r.exports,i),r.exports}i(5996),i(6881),i(5193),i(2511),i(6634),i(7076),i(3478),i(9853),i(7512)}();